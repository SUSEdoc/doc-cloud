<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Chapter 1. Maintenance</title><meta name="generator" content="DocBook XSL Stylesheets V1.79.2" /><style type="text/css">
body { background-image: url('static/images/draft.png');
       background-repeat: no-repeat;
       background-position: top left;
       /* The following properties make the watermark "fixed" on the page. */
       /* I think that's just a bit too distracting for the reader... */
       /* background-attachment: fixed; */
       /* background-position: center center; */
     }</style><link rel="home" href="index.html" title="SUSE OpenStack Cloud Crowbar 9 Documentation" /><link rel="up" href="book-crowbar-operations.html" title="Operations Guide Crowbar" /><link rel="prev" href="book-crowbar-operations.html" title="Operations Guide Crowbar" /><link rel="next" href="sec-service-orders.html" title="Service Order on SUSE OpenStack Cloud Start-up or Shutdown" /></head><body onload="$('#betawarn-button-wrap').toggle();if (document.cookie.length > 0) {if (document.cookie.indexOf('betawarn=closed') != -1){$('#betawarn').toggle()}};"><div id="betawarn" style="position:fixed;bottom:0;z-index:9025;background-color:#FDE8E8;padding:1em;margin-left:10%;margin-right:10%;display:block;border-top:.75em solid #E11;width:80%"><p style="color:#333;margin:1em 0;padding:0;">This is a draft document that was built and uploaded automatically. It may document beta software and be incomplete or even incorrect. <strong>Use this document at your own risk.</strong></p> <div id="betawarn-button-wrap" style="display:none;margin:0;padding:0;"><a href="#" onclick="$('#betawarn').toggle();var d=new Date();d.setTime(d.getTime()+(0.5*24*60*60*1000));document.cookie='betawarn=closed; expires='+d.toUTCString()+'; path=/'; return false;" style="color:#333;text-decoration:underline;float:left;margin-top:.5em;padding:1em;display:block;background-color:#FABEBE;">I understand this is a draft</a></div></div><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter 1. Maintenance</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="book-crowbar-operations.html">Prev</a> </td><th width="60%" align="center"><em class="citetitle">Operations Guide Crowbar</em></th><td width="20%" align="right"> <a accesskey="n" href="sec-service-orders.html">Next</a></td></tr></table><hr /></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="sec-maintenance"></a>Chapter 1. Maintenance</h1></div></div></div><div class="toc"><p><strong>Table of Contents</strong></p><dl class="toc"><dt><span class="section"><a href="sec-maintenance.html#sec-nodes-update">Keeping the Nodes Up-To-Date</a></span></dt><dt><span class="section"><a href="sec-service-orders.html">Service Order on SUSE <span class="productname">OpenStack</span> Cloud Start-up or Shutdown</a></span></dt><dt><span class="section"><a href="sec-upgrade-8-9.html">Upgrading from <span class="phrase"><span class="phrase">SUSE <span class="productname">OpenStack</span> Cloud Crowbar</span></span> 8 to <span class="phrase"><span class="phrase">SUSE <span class="productname">OpenStack</span> Cloud Crowbar</span></span> 9</a></span></dt><dd><dl><dt><span class="section"><a href="sec-upgrade-8-9.html#sec-upgrade-8-9-requirements">Requirements</a></span></dt><dt><span class="section"><a href="sec-upgrade-8-9.html#sec-upgrade-unsupported-configs">Unsupported configurations</a></span></dt><dt><span class="section"><a href="sec-upgrade-8-9.html#sec-upgrade-web-ui">Upgrading Using the Web Interface</a></span></dt><dt><span class="section"><a href="sec-upgrade-8-9.html#sec-upgrade-command-line">Upgrading from the Command Line</a></span></dt><dt><span class="section"><a href="sec-upgrade-8-9.html#sec-depl-maintenance-upgrade-troubleshooting">Troubleshooting Upgrade Issues</a></span></dt></dl></dd><dt><span class="section"><a href="sec-recover-comp-node-failure.html">Recovering from Compute Node Failure</a></span></dt><dt><span class="section"><a href="sec-bootstrap-compute-plane.html">Bootstrapping the Compute Plane</a></span></dt><dt><span class="section"><a href="sec-bootstrap-galera-cluster-with-missing-node.html">Bootstrapping the MariaDB Galera Cluster with Pacemaker when a node is missing</a></span></dt><dt><span class="section"><a href="bk03ch01s07.html">Updating MariaDB with Galera</a></span></dt><dt><span class="section"><a href="OctaviaMaintenance.html">Load Balancer: Octavia Administration</a></span></dt><dd><dl><dt><span class="section"><a href="OctaviaMaintenance.html#octavia-admin-delete">Removing load balancers</a></span></dt></dl></dd><dt><span class="section"><a href="database-maintenance.html">Periodic OpenStack Maintenance Tasks</a></span></dt><dt><span class="section"><a href="sec-depl-maintenance-fernet-tokens.html">Rotating Fernet Tokens</a></span></dt></dl></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="sec-nodes-update"></a>Keeping the Nodes Up-To-Date</h2></div></div></div><p>
      Keeping the nodes in <span class="phrase"><span class="phrase">SUSE <span class="productname">OpenStack</span> Cloud Crowbar</span></span> up-to-date requires an appropriate
      setup of the update and pool repositories and the deployment of
      either the <span class="guimenu">Updater</span> barclamp or the SUSE Manager
      barclamp. For details, see
      <a class="xref" href="sec-depl-adm-conf-repos-scc.html" title="Update and Pool Repositories">the section called “Update and Pool Repositories”</a>, <a class="xref" href="sec-depl-inst-nodes-post.html#sec-depl-inst-nodes-post-updater" title="Deploying Node Updates with the Updater Barclamp">the section called “Deploying Node Updates with the Updater Barclamp”</a>, and
      <a class="xref" href="sec-depl-inst-nodes-post.html#sec-depl-inst-nodes-post-manager" title="Configuring Node Updates with the SUSE Manager Client Barclamp">the section called “Configuring Node Updates with the <span class="guimenu">SUSE Manager Client</span>
    Barclamp”</a>.
    </p><p>
      If one of those barclamps is deployed, patches are installed on the
      nodes. Patches that do not require a reboot will not cause a service
      interruption. If a patch (for example, a kernel update) requires a reboot
      after the installation, services running on the machine that is rebooted
      will not be available within SUSE <span class="productname">OpenStack</span> Cloud.  Therefore, we strongly recommend
      installing those patches during a maintenance window.
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Maintenance Mode</h3><p>
        As of <span class="phrase"><span class="phrase">SUSE <span class="productname">OpenStack</span> Cloud Crowbar</span></span> 8, it is not possible to put your entire SUSE <span class="productname">OpenStack</span> Cloud into
        <span class="quote">“<span class="quote">Maintenance Mode</span>”</span> (such as limiting all users to
        read-only operations on the control plane), as <span class="productname">OpenStack</span> does
        not support this. However when Pacemaker is deployed to
        manage HA clusters, it should be used to place services and
        cluster nodes into <span class="quote">“<span class="quote">Maintenance Mode</span>”</span> before
        performing maintenance functions on them. For more
        information,
        see <a class="link" href="https://documentation.suse.com/sle-ha/12-SP5/single-html/SLE-HA-guide/#cha-conf-hawk2" target="_top">SUSE Linux Enterprise
        High Availability documentation</a>.
      </p></div><div class="variablelist"><p class="title"><strong>Consequences when Rebooting Nodes</strong></p><dl class="variablelist"><dt><span class="term">Administration Server</span></dt><dd><p>
            While the Administration Server is offline, it is not possible to deploy new
            nodes. However, rebooting the Administration Server has no effect on starting
            instances or on instances already running.
          </p></dd><dt><span class="term">Control Nodes</span></dt><dd><p>
            The consequences a reboot of a Control Node depend on the
            services running on that node:
          </p><p><strong>Database, keystone, RabbitMQ, glance, nova: </strong>
              No new instances can be started.
            </p><p><strong>swift: </strong>
              No object storage data is available. If glance uses
              swift, it will not be possible to start new instances.
            </p><p><strong>cinder, Ceph: </strong>
              No block storage data is available.
            </p><p><strong>neutron: </strong>
              No new instances can be started. On running instances the
              network will be unavailable.
            </p><p><strong>horizon. </strong>
              horizon will be unavailable. Starting and managing instances
              can be done with the command line tools.
            </p></dd><dt><span class="term">Compute Nodes</span></dt><dd><p>
            Whenever a Compute Node is rebooted, all instances running on
            that particular node will be shut down and must be manually restarted.
            Therefore it is recommended to <span class="quote">“<span class="quote">evacuate</span>”</span> the node by
            migrating instances to another node, before rebooting it.
          </p></dd></dl></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="book-crowbar-operations.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="book-crowbar-operations.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="sec-service-orders.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top"><em class="citetitle">Operations Guide Crowbar</em> </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Service Order on SUSE <span class="productname">OpenStack</span> Cloud Start-up or Shutdown</td></tr></table></div></body></html>