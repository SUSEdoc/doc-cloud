<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang=""><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>The SUSE OpenStack Cloud Architecture | Deployment Guide using Crowbar | SUSE OpenStack Cloud Crowbar 9</title><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" /><link rel="stylesheet" type="text/css" href="static/css/style.css" /><link rel="stylesheet" type="text/css" href="static/css/highlight.css" /><meta name="generator" content="DAPS 3.0.0 (https://opensuse.github.io/daps) using SUSE XSL Stylesheets 2.0.17 (based on DocBook XSL Stylesheets 1.79.2) - chunked" /><meta name="product-name" content="SUSE OpenStack Cloud Crowbar" /><meta name="product-number" content="9" /><meta name="book-title" content="Deployment Guide using Crowbar" /><meta name="chapter-title" content="Chapter 1. The SUSE OpenStack Cloud Architecture" /><meta name="description" content="SUSE OpenStack Cloud Crowbar is a managed cloud infrastructure solution that provides a full stack of cloud deployment and management services." /><meta name="tracker-url" content="https://bugzilla.suse.com/enter_bug.cgi" /><meta name="tracker-type" content="bsc" /><meta name="tracker-bsc-assignee" content="dpopov@suse.com" /><meta name="tracker-bsc-component" content="Documentation" /><meta name="tracker-bsc-product" content="SUSE OpenStack Cloud 9" /><link rel="home" href="index.html" title="SUSE OpenStack Cloud Crowbar 9 Documentation" /><link rel="up" href="part-depl-intro.html" title="Part I. Architecture and Requirements" /><link rel="prev" href="part-depl-intro.html" title="Part I. Architecture and Requirements" /><link rel="next" href="cha-depl-req.html" title="Chapter 2. Considerations and Requirements" />
<script type="text/javascript">

if ( window.location.protocol.toLowerCase() != 'file:' ) {
  document.write('<link rel="stylesheet" type="text/css" href="https://static.opensuse.org/fonts/fonts.css"></link>');
}
else {
  document.write('<link rel="stylesheet" type="text/css" href="static/css/fonts-onlylocal.css"></link>');
}

</script><noscript><link rel="stylesheet" type="text/css" href="https://static.opensuse.org/fonts/fonts.css" /></noscript><script src="static/js/jquery-1.10.2.min.js" type="text/javascript"></script><script src="static/js/script.js" type="text/javascript"></script><script src="static/js/highlight.min.js" type="text/javascript"></script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script></head><body class="draft offline js-off" onload="$('#betawarn-button-wrap').toggle();if (document.cookie.length > 0) {if (document.cookie.indexOf('betawarn=closed') != -1){$('#betawarn').toggle()}};"><div id="betawarn" style="position:fixed;bottom:0;z-index:9025;background-color:#FDE8E8;padding:1em;margin-left:10%;margin-right:10%;display:block;border-top:.75em solid #E11;width:80%"><p style="color:#333;margin:1em 0;padding:0;">This is a draft document that was built and uploaded automatically. It may document beta software and be incomplete or even incorrect. <strong>Use this document at your own risk.</strong></p> <div id="betawarn-button-wrap" style="display:none;margin:0;padding:0;"><a href="#" onclick="$('#betawarn').toggle();var d=new Date();d.setTime(d.getTime()+(0.5*24*60*60*1000));document.cookie='betawarn=closed; expires='+d.toUTCString()+'; path=/'; return false;" style="color:#333;text-decoration:underline;float:left;margin-top:.5em;padding:1em;display:block;background-color:#FABEBE;">I understand this is a draft</a></div></div><div class="bypass-block"><a href="#_content">Jump to content</a><a href="#_bottom-navigation">Jump to page navigation: previous page [access key p]/next page [access key n]</a></div><div id="_outer-wrap"><div id="_white-bg" style="background-color: #FABEBE;"><div id="_header"><div id="_logo"><img src="static/images/logo.png" alt="Logo" /></div><div class="crumbs"><a class="book-link" href="index.html" title="SUSE OpenStack Cloud Crowbar 9 Documentation"><span class="book-icon">SUSE OpenStack Cloud Crowbar 9 Documentation</span></a><span> › </span><a class="crumb" href="book-crowbar-deployment.html">Deployment Guide using Crowbar</a><span> › </span><a class="crumb" href="part-depl-intro.html">Architecture and Requirements</a><span> › </span><a class="crumb" href="cha-depl-arch.html">The SUSE OpenStack Cloud Architecture</a></div><div class="clearme"></div></div></div><div id="_toolbar-wrap"><div id="_toolbar"><div id="_toc-area" class="inactive"><a id="_toc-area-button" class="tool" title="Contents" accesskey="c" href="index.html"><span class="tool-spacer"><span class="toc-icon">Contents</span><span class="clearme"></span></span><span class="tool-label">Contents</span></a><div class="active-contents bubble-corner"></div><div class="active-contents bubble"><div class="bubble-container"><h6>Deployment Guide using Crowbar</h6><div id="_bubble-toc"><ol><li class="inactive"><a href="pre-cloud-deploy.html"><span class="number"> </span><span class="name">About This Guide</span></a></li><li class="inactive"><a href="part-depl-intro.html"><span class="number">I </span><span class="name">Architecture and Requirements</span></a><ol><li class="inactive"><a href="cha-depl-arch.html"><span class="number">1 </span><span class="name">The SUSE <span class="productname">OpenStack</span> Cloud Architecture</span></a></li><li class="inactive"><a href="cha-depl-req.html"><span class="number">2 </span><span class="name">Considerations and Requirements</span></a></li></ol></li><li class="inactive"><a href="part-depl-admserv.html"><span class="number">II </span><span class="name">Setting Up the Administration Server</span></a><ol><li class="inactive"><a href="cha-depl-adm-inst.html"><span class="number">3 </span><span class="name">Installing the Administration Server</span></a></li><li class="inactive"><a href="app-deploy-smt.html"><span class="number">4 </span><span class="name">Installing and Setting Up an SMT Server on the Administration Server (Optional)</span></a></li><li class="inactive"><a href="cha-depl-repo-conf.html"><span class="number">5 </span><span class="name">Software Repository Setup</span></a></li><li class="inactive"><a href="sec-depl-adm-inst-network.html"><span class="number">6 </span><span class="name">Service Configuration:  Administration Server Network Configuration</span></a></li><li class="inactive"><a href="sec-depl-adm-inst-crowbar.html"><span class="number">7 </span><span class="name">Crowbar Setup</span></a></li><li class="inactive"><a href="sec-depl-adm-start-crowbar.html"><span class="number">8 </span><span class="name">Starting the SUSE <span class="productname">OpenStack</span> Cloud Crowbar installation</span></a></li><li class="inactive"><a href="sec-depl-adm-crowbar-extra-features.html"><span class="number">9 </span><span class="name">Customizing Crowbar</span></a></li></ol></li><li class="inactive"><a href="part-depl-ostack.html"><span class="number">III </span><span class="name">Setting Up <span class="productname">OpenStack</span> Nodes and Services</span></a><ol><li class="inactive"><a href="cha-depl-crowbar.html"><span class="number">10 </span><span class="name">The Crowbar Web Interface</span></a></li><li class="inactive"><a href="cha-depl-inst-nodes.html"><span class="number">11 </span><span class="name">Installing the <span class="productname">OpenStack</span> Nodes</span></a></li><li class="inactive"><a href="cha-depl-ostack.html"><span class="number">12 </span><span class="name">Deploying the <span class="productname">OpenStack</span> Services</span></a></li><li class="inactive"><a href="sec-deploy-policy-json.html"><span class="number">13 </span><span class="name">Limiting Users' Access Rights</span></a></li><li class="inactive"><a href="cha-depl-ostack-configs.html"><span class="number">14 </span><span class="name">Configuration Files for <span class="productname">OpenStack</span> Services</span></a></li><li class="inactive"><a href="install-heat-templates.html"><span class="number">15 </span><span class="name">Installing SUSE CaaS Platform heat Templates</span></a></li><li class="inactive"><a href="install-caasp-terraform.html"><span class="number">16 </span><span class="name">Installing SUSE CaaS Platform v4 using terraform</span></a></li></ol></li><li class="inactive"><a href="part-depl-nostack.html"><span class="number">IV </span><span class="name">Setting Up Non-<span class="productname">OpenStack</span> Services</span></a><ol><li class="inactive"><a href="cha-depl-nostack.html"><span class="number">17 </span><span class="name">Deploying the Non-<span class="productname">OpenStack</span> Components</span></a></li></ol></li><li class="inactive"><a href="part-depl-troubleshooting.html"><span class="number">V </span><span class="name">Troubleshooting and Support</span></a><ol><li class="inactive"><a href="cha-depl-trouble.html"><span class="number">18 </span><span class="name">Troubleshooting and Support</span></a></li></ol></li><li class="inactive"><a href="app-deploy-cisco.html"><span class="number">A </span><span class="name">Using Cisco Nexus Switches with neutron</span></a></li><li class="inactive"><a href="app-deploy-docupdates.html"><span class="number">B </span><span class="name">Documentation Updates</span></a></li><li class="inactive"><a href="gl-cloud.html"><span class="number"> </span><span class="name">Glossary of Terminology and Product Names</span></a></li></ol></div><div class="clearme"></div></div></div></div><div id="_nav-area" class="inactive"><div class="tool"><span class="nav-inner"><span class="tool-label">Navigation</span><a accesskey="p" class="tool-spacer" title="Part I. Architecture and Requirements" href="part-depl-intro.html"><span class="prev-icon">←</span></a><a accesskey="n" class="tool-spacer" title="Chapter 2. Considerations and Requirements" href="cha-depl-req.html"><span class="next-icon">→</span></a></span></div></div></div></div><div id="_fixed-header-wrap" style="background-color: #FABEBE;" class="inactive"><div id="_fixed-header"><div class="crumbs"><a class="book-link" href="index.html" title="SUSE OpenStack Cloud Crowbar 9 Documentation"><span class="book-icon">SUSE OpenStack Cloud Crowbar 9 Documentation</span></a><span> › </span><a class="crumb" href="book-crowbar-deployment.html">Deployment Guide using Crowbar</a><span> › </span><a class="crumb" href="part-depl-intro.html">Architecture and Requirements</a><span> › </span><a class="crumb" href="cha-depl-arch.html">The SUSE OpenStack Cloud Architecture</a></div><div class="buttons"><a class="top-button button" href="#">Top</a><div class="button"><a accesskey="p" class="tool-spacer" title="Part I. Architecture and Requirements" href="part-depl-intro.html"><span class="prev-icon">←</span></a><a accesskey="n" class="tool-spacer" title="Chapter 2. Considerations and Requirements" href="cha-depl-req.html"><span class="next-icon">→</span></a></div><div class="clearme"></div></div><div class="clearme"></div></div></div><div id="_content" class="draft "><div class="documentation"><div class="chapter " id="cha-depl-arch"><div class="titlepage"><div><div class="version-info">Applies to  <span class="productname "><span class="phrase"><span class="phrase">SUSE <span class="productname">OpenStack</span> Cloud Crowbar</span></span></span> <span class="productnumber ">9</span></div><div><h2 class="title"><span class="number">1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">The SUSE <span class="productname">OpenStack</span> Cloud Architecture</span> <a title="Permalink" class="permalink" href="cha-depl-arch.html#">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>depl_overview.xml</li><li><span class="ds-label">ID: </span>cha-depl-arch</li></ul></div></div><div><div class="abstract"><p>
    <span class="phrase"><span class="phrase">SUSE <span class="productname">OpenStack</span> Cloud Crowbar</span></span> is a managed cloud infrastructure solution that provides a
    full stack of cloud deployment and management services.
   </p></div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="cha-depl-arch.html#sec-depl-arch-components-admin"><span class="number">1.1 </span><span class="name">The Administration Server</span></a></span></dt><dt><span class="sect1"><a href="cha-depl-arch.html#sec-depl-arch-components-control"><span class="number">1.2 </span><span class="name">The Control Node(s)</span></a></span></dt><dt><span class="sect1"><a href="cha-depl-arch.html#sec-depl-arch-components-compute"><span class="number">1.3 </span><span class="name">The Compute Nodes</span></a></span></dt><dt><span class="sect1"><a href="cha-depl-arch.html#sec-depl-arch-components-storage"><span class="number">1.4 </span><span class="name">The Storage Nodes</span></a></span></dt><dt><span class="sect1"><a href="cha-depl-arch.html#sec-depl-arch-components-monitoring"><span class="number">1.5 </span><span class="name">The Monitoring Node</span></a></span></dt><dt><span class="sect1"><a href="cha-depl-arch.html#sec-depl-arch-components-ha"><span class="number">1.6 </span><span class="name">HA Setup</span></a></span></dt></dl></div></div><p>
  <span class="phrase"><span class="phrase">SUSE <span class="productname">OpenStack</span> Cloud Crowbar</span></span>  9 provides the following features:
 </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
    Open source software that is based on the <span class="productname">OpenStack</span> Rocky
    release.
   </p></li><li class="listitem "><p>
    Centralized resource tracking providing insight into activities and
    capacity of the cloud infrastructure for optimized automated deployment
    of services.
   </p></li><li class="listitem "><p>
    A self-service portal enabling end users to configure and deploy
    services as necessary, and to track resource
    consumption (horizon).
   </p></li><li class="listitem "><p>
    An image repository from which standardized, pre-configured virtual
    machines are published (glance).
   </p></li><li class="listitem "><p>
    Automated installation processes via Crowbar using pre-defined scripts
    for configuring and deploying the Control Node(s) and Compute
    and Storage Nodes.
   </p></li><li class="listitem "><p>
    Multi-tenant, role-based provisioning and access control for multiple
    departments and users within your organization.
   </p></li><li class="listitem "><p>
    APIs enabling the integration of third-party software, such as identity
    management and billing solutions.
   </p></li><li class="listitem "><p>
    An optional monitoring as a service solution, that allows to manage, track,
    and optimize the cloud infrastructure and the services provided to end
    users (<span class="phrase"><span class="phrase">SUSE <span class="productname">OpenStack</span> Cloud Crowbar</span></span> Monitoring, monasca).
   </p></li></ul></div><p>
  <span class="phrase"><span class="phrase">SUSE <span class="productname">OpenStack</span> Cloud Crowbar</span></span> is based on SUSE Linux Enterprise Server, <span class="productname">OpenStack</span>, Crowbar, and
  Chef. SUSE Linux Enterprise Server is the underlying operating system for all
  cloud infrastructure machines (also called nodes). The cloud management layer,
  <span class="productname">OpenStack</span>, works as the <span class="quote">“<span class="quote ">Cloud Operating
  System</span>”</span>. Crowbar and Chef automatically deploy
  and manage the <span class="productname">OpenStack</span> nodes from a central Administration Server.
 </p><div class="figure" id="id-1.4.3.2.6"><div class="figure-contents"><div class="mediaobject"><a xmlns="" href="images/cloud_node_structure.png" target="_blank"><img src="images/cloud_node_structure.png" width="" alt="SUSE OpenStack Cloud Crowbar Infrastructure" /></a></div></div><div class="figure-title-wrap"><h6 class="figure-title"><span class="number">Figure 1.1: </span><span class="name"><span class="phrase"><span class="phrase">SUSE <span class="productname">OpenStack</span> Cloud Crowbar</span></span> Infrastructure </span><a title="Permalink" class="permalink" href="cha-depl-arch.html#id-1.4.3.2.6">#</a></h6></div></div><p>
  <span class="phrase"><span class="phrase">SUSE <span class="productname">OpenStack</span> Cloud Crowbar</span></span> is deployed to four different types of machines:
 </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
    one Administration Server for node deployment and management
   </p></li><li class="listitem "><p>
    one or more Control Nodes hosting the cloud management services
   </p></li><li class="listitem "><p>
    several Compute Nodes on which the instances are started
   </p></li><li class="listitem "><p>
    several Monitoring Node for monitoring services and servers.
   </p></li></ul></div><div class="sect1 " id="sec-depl-arch-components-admin"><div class="titlepage"><div><div><h2 class="title"><span class="number">1.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">The Administration Server</span> <a title="Permalink" class="permalink" href="cha-depl-arch.html#sec-depl-arch-components-admin">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>depl_overview.xml</li><li><span class="ds-label">ID: </span>sec-depl-arch-components-admin</li></ul></div></div></div></div><p>
   The Administration Server provides all services needed to manage and deploy all
   other nodes in the cloud. Most of these services are provided by the
   Crowbar tool that—together with Chef—automates all the
   required installation and configuration tasks. Among the services
   provided by the server are DHCP, DNS, NTP, PXE, and TFTP.
  </p><div class="informalfigure"><div class="mediaobject"><a xmlns="" href="images/cloud_admin-node-crowbar.png" target="_blank"><img src="images/cloud_admin-node-crowbar.png" width="" alt="Administration Server Diagram" /></a></div></div><p>
   The Administration Server also hosts the software repositories for SUSE Linux Enterprise Server and
   <span class="phrase"><span class="phrase">SUSE <span class="productname">OpenStack</span> Cloud Crowbar</span></span>, which are needed for node deployment. If no other
   sources for the software repositories are available, it can host the Subscription Management Tool (SMT), providing up-to-date repositories
   with updates and patches for all nodes.
  </p></div><div class="sect1 " id="sec-depl-arch-components-control"><div class="titlepage"><div><div><h2 class="title"><span class="number">1.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">The Control Node(s)</span> <a title="Permalink" class="permalink" href="cha-depl-arch.html#sec-depl-arch-components-control">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>depl_overview.xml</li><li><span class="ds-label">ID: </span>sec-depl-arch-components-control</li></ul></div></div></div></div><p>
   The Control Node(s) hosts all <span class="productname">OpenStack</span> components needed to
   orchestrate virtual machines deployed on the Compute Nodes in the
   SUSE <span class="productname">OpenStack</span> Cloud. <span class="productname">OpenStack</span> on SUSE <span class="productname">OpenStack</span> Cloud uses a MariaDB database,
   which is hosted on the Control Node(s). The following <span class="productname">OpenStack</span>
   components—if deployed—run on the Control Node(s):
  </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
     MariaDB database.
    </p></li><li class="listitem "><p>
     Image (glance) for managing virtual images.
    </p></li><li class="listitem "><p>
     Identity (keystone), providing authentication and authorization
     for all <span class="productname">OpenStack</span> components.
    </p></li><li class="listitem "><p>
     Networking (neutron), providing <span class="quote">“<span class="quote ">networking as a
     service</span>”</span> between interface devices managed by other <span class="productname">OpenStack</span>
     services.
    </p></li><li class="listitem "><p>
     Block Storage (cinder), providing block storage.
    </p></li><li class="listitem "><p>
     <span class="productname">OpenStack</span> Dashboard (horizon), providing the Dashboard,
     a user Web interface for the <span class="productname">OpenStack</span> components.
    </p></li><li class="listitem "><p>
     Compute (nova) management (<code class="literal">nova-controller</code>) including API and
     scheduler.
    </p></li><li class="listitem "><p>
     Message broker (RabbitMQ).
    </p></li><li class="listitem "><p>
     swift proxy server plus dispersion tools (health monitor) and
     swift ring (index of objects, replicas, and
     devices). swift provides object storage.
    </p></li><li class="listitem "><p>
     Hawk, a monitor for a pacemaker cluster in a High Availability (HA)
     setup.
    </p></li><li class="listitem "><p>
     heat, an orchestration engine.
    </p></li><li class="listitem "><p>
     designate provides DNS as a Service (DNSaaS)
    </p></li><li class="listitem "><p>
     ironic, the <span class="productname">OpenStack</span> bare metal service for provisioning physical machines.
    </p></li></ul></div><p>
   <span class="phrase"><span class="phrase">SUSE <span class="productname">OpenStack</span> Cloud Crowbar</span></span> requires a three-node cluster for any production deployment
   since it leverages a MariaDB Galera Cluster for high availability.
  </p><p>
   We recommend deploying certain parts of Networking (neutron) on separate nodes for production clouds. See
   <a class="xref" href="cha-depl-ostack.html#sec-depl-ostack-neutron" title="12.9. Deploying neutron">Section 12.9, “Deploying neutron”</a> for details.
  </p><p>
   You can separate authentication and authorization services from other cloud
   services, for stronger security, by hosting Identity (keystone) on a
   separate node. Hosting Block Storage (cinder, particularly the
   cinder-volume role) on a separate node when using local disks for storage
   enables you to customize your storage and network hardware to best meet your
   requirements.
  </p><div id="id-1.4.3.2.10.7" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: Moving Services in an Existing Setup</h6><p>
    If you plan to move a service from one Control Node to another, we strongly recommended shutting down or saving <span class="emphasis"><em>all</em></span> instances before doing so. Restart
    them after having successfully re-deployed the services. Moving
    services also requires stopping them manually on the original
    Control Node.


   </p></div></div><div class="sect1 " id="sec-depl-arch-components-compute"><div class="titlepage"><div><div><h2 class="title"><span class="number">1.3 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">The Compute Nodes</span> <a title="Permalink" class="permalink" href="cha-depl-arch.html#sec-depl-arch-components-compute">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>depl_overview.xml</li><li><span class="ds-label">ID: </span>sec-depl-arch-components-compute</li></ul></div></div></div></div><p>
   The Compute Nodes are the pool of machines on which your instances
   are running. These machines need to be equipped with a sufficient number
   of CPUs and enough RAM to start several instances. They also need to
   provide sufficient hard disk space, see
   <a class="xref" href="cha-depl-req.html#sec-depl-req-storage-hardware-compute" title="2.2.2.3. Compute Nodes">Section 2.2.2.3, “Compute Nodes”</a> for details. The
   Control Node distributes instances within the pool of
   Compute Nodes and provides them with the necessary network resources. The
   <span class="productname">OpenStack</span> component Compute (nova) runs on the Compute Nodes and
   provides the means for setting up, starting, and stopping virtual machines.
  </p><p>
   <span class="phrase"><span class="phrase">SUSE <span class="productname">OpenStack</span> Cloud Crowbar</span></span> supports several hypervisors, including KVM and  VMware
   vSphere. Each image that is started with an instance is
   bound to one hypervisor. Each Compute Node can only run one hypervisor
   at a time. You will choose which hypervisor to run on each Compute Node
   when deploying the nova barclamp.
  </p></div><div class="sect1 " id="sec-depl-arch-components-storage"><div class="titlepage"><div><div><h2 class="title"><span class="number">1.4 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">The Storage Nodes</span> <a title="Permalink" class="permalink" href="cha-depl-arch.html#sec-depl-arch-components-storage">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>depl_overview.xml</li><li><span class="ds-label">ID: </span>sec-depl-arch-components-storage</li></ul></div></div></div></div><p>
   The Storage Nodes are the pool of machines providing object or block
   storage. Object storage is provided by the <span class="productname">OpenStack</span> swift component,
   while block storage is provided by cinder. The latter supports several
   back-ends, including Ceph, that are deployed during the
   installation. Deploying swift and Ceph is optional.
  </p></div><div class="sect1 " id="sec-depl-arch-components-monitoring"><div class="titlepage"><div><div><h2 class="title"><span class="number">1.5 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">The Monitoring Node</span> <a title="Permalink" class="permalink" href="cha-depl-arch.html#sec-depl-arch-components-monitoring">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>depl_overview.xml</li><li><span class="ds-label">ID: </span>sec-depl-arch-components-monitoring</li></ul></div></div></div></div><p>
The Monitoring Node is the node that has the <code class="literal">monasca-server</code> role assigned.
It hosts most services needed for SUSE <span class="productname">OpenStack</span> Cloud
Monitoring, our monasca-based monitoring and logging solution. The following
services run on this node:
</p><div class="variablelist "><dl class="variablelist"><dt id="id-1.4.3.2.13.3.1"><span class="term ">Monitoring API</span></dt><dd><p>
          The monasca Web API that is used for sending metrics by monasca agents, and
  retrieving metrics with the monasca command line client and the monasca Grafana dashboard.
      </p></dd><dt id="id-1.4.3.2.13.3.2"><span class="term ">Message Queue</span></dt><dd><p>
         A Kafka instance used exclusively by SUSE <span class="productname">OpenStack</span> Cloud Monitoring.
      </p></dd><dt id="id-1.4.3.2.13.3.3"><span class="term ">Persister</span></dt><dd><p>
         Stores metrics and alarms in InfluxDB.
      </p></dd><dt id="id-1.4.3.2.13.3.4"><span class="term ">Notification Engine</span></dt><dd><p>
         Consumes alarms sent by the Threshold Engine and sends
notifications (e.g. via email).
      </p></dd><dt id="id-1.4.3.2.13.3.5"><span class="term ">Threshold Engine</span></dt><dd><p>
         Based on Apache Storm. Computes thresholds on metrics and handles alarming.
      </p></dd><dt id="id-1.4.3.2.13.3.6"><span class="term ">Metrics and Alarms Database</span></dt><dd><p>
         A Cassandra database for storing metrics alarm history.
      </p></dd><dt id="id-1.4.3.2.13.3.7"><span class="term ">Config Database</span></dt><dd><p>
         A dedicated MariaDB instance used only for monitoring related data.
      </p></dd><dt id="id-1.4.3.2.13.3.8"><span class="term ">Log API</span></dt><dd><p>
         The monasca Web API that is used for sending log entries by monasca agents, and
  retrieving log entries with the Kibana Server.
      </p></dd><dt id="id-1.4.3.2.13.3.9"><span class="term ">Log Transformer</span></dt><dd><p>
         Transforms raw log entries sent to the Log API into a format
suitable for storage.
      </p></dd><dt id="id-1.4.3.2.13.3.10"><span class="term ">Log Metrics</span></dt><dd><p>
         Sends metrics about high severity log messages to the Monitoring API.
      </p></dd><dt id="id-1.4.3.2.13.3.11"><span class="term ">Log Persister</span></dt><dd><p>
         Stores logs processed by monasca Log Transformer in the Log Database.
      </p></dd><dt id="id-1.4.3.2.13.3.12"><span class="term ">Kibana Server</span></dt><dd><p>
         A graphical web frontend for querying the Log Database.
      </p></dd><dt id="id-1.4.3.2.13.3.13"><span class="term ">Log Database</span></dt><dd><p>
         An Elasticsearch database for storing logs.
      </p></dd><dt id="id-1.4.3.2.13.3.14"><span class="term ">Zookeeper</span></dt><dd><p>
         Cluster synchronization for Kafka and Storm.
      </p></dd></dl></div><p>
Currently there can only be one Monitoring node. Clustering support is
planned for a future release. We strongly recommend using a dedicated physical
node without any other services as a Monitoring Node.
</p></div><div class="sect1 " id="sec-depl-arch-components-ha"><div class="titlepage"><div><div><h2 class="title"><span class="number">1.6 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">HA Setup</span> <a title="Permalink" class="permalink" href="cha-depl-arch.html#sec-depl-arch-components-ha">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>depl_overview.xml</li><li><span class="ds-label">ID: </span>sec-depl-arch-components-ha</li></ul></div></div></div></div><p>
   A failure of components in <span class="phrase"><span class="phrase">SUSE <span class="productname">OpenStack</span> Cloud Crowbar</span></span> can lead to system downtime
   and data loss. To prevent this, set up a High Availability (HA) cluster
   consisting of several nodes. You can assign certain roles to this cluster
   instead of assigning them to individual nodes. As of <span class="phrase"><span class="phrase">SUSE <span class="productname">OpenStack</span> Cloud Crowbar</span></span>
   8, Control Nodes and Compute Nodes can be made highly available.
  </p><p>
   For all HA-enabled roles, their respective functions are automatically
   handled by the clustering software SUSE Linux Enterprise High Availability Extension. The High Availability Extension uses
   the Pacemaker cluster stack with Pacemaker as cluster resource manager,
   and Corosync as the messaging/infrastructure layer.
  </p><p>
   View the cluster status and configuration with the cluster
   management tools HA Web Console (Hawk) or the
   <code class="command">crm</code> shell.
  </p><div id="id-1.4.3.2.14.5" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.png" /><h6>Important: Do Not Change the Configuration</h6><p>
    Use the cluster management tools only for <span class="emphasis"><em>viewing</em></span>.
    All of the clustering configuration is done automatically via Crowbar
    and Chef. If you change anything via the cluster management tools
    you risk breaking the cluster. Changes done there may be reverted by the
    next run of Chef anyway.
   </p></div><p>
   A failure of the <span class="productname">OpenStack</span> infrastructure services (running on the
   Control Nodes) can be critical and may cause downtime within the cloud. For more information on making those services highly-available and avoiding other potential points of
   failure in your cloud setup, refer to <a class="xref" href="cha-depl-req.html#sec-depl-req-ha" title="2.6. High Availability">Section 2.6, “High Availability”</a>.
  </p></div></div></div><div class="page-bottom"><div id="_bottom-navigation"><a class="nav-link" href="cha-depl-req.html"><span class="next-icon">→</span><span class="nav-label"><span class="number">Chapter 2 </span>Considerations and Requirements</span></a><a class="nav-link" href="part-depl-intro.html"><span class="prev-icon">←</span><span class="nav-label"><span class="number">Part I </span>Architecture and Requirements</span></a></div><div class="_share-print"><div class="online-contents share"><strong>Share this page: </strong><span class="share-buttons"><span class="_share-fb bottom-button">Facebook</span><span class="spacer"> • </span><span class="_share-in bottom-button">LinkedIn</span><span class="spacer"> • </span><span class="_share-tw bottom-button">Twitter</span><span class="spacer"> • </span><span class="_share-mail bottom-button">E-Mail</span></span></div><div class="print"><span class="_print-button bottom-button">Print this page</span></div><div class="clearme"></div></div></div></div><div id="_inward"></div></div><div id="_footer-wrap"><div id="_footer"><p>©
        2020 
        SUSE</p><ul><li><a href="https://jobs.suse.com/" target="_top">Careers</a></li><li><a href="https://www.suse.com/company/legal/" target="_top">Legal</a></li><li><a href="https://www.suse.com/company/about/" target="_top">About</a></li><li><a href="https://www.suse.com/contact/" target="_top">Contact Us</a></li></ul></div></div></body></html>