<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes"/><title>SUSE OpenStack Cloud Crowbar 9 | Deployment Guide using Crowbar | Deploying the Non-OpenStack Components</title><link rel="stylesheet" type="text/css" href="static/css/style.css"/>
<meta name="title" content="Deploying the Non-OpenStack Components | SUSE OpenStac…"/>
<meta name="description" content="In addition to OpenStack barclamps, SUSE OpenStack Cloud includes several components that can be configured using the appropriate Crowbar barclamps."/>
<meta name="product-name" content="SUSE OpenStack Cloud Crowbar"/>
<meta name="product-number" content="9"/>
<meta name="book-title" content="Deployment Guide using Crowbar"/>
<meta name="chapter-title" content="Chapter 17. Deploying the Non-OpenStack Components"/>
<meta name="tracker-url" content="https://bugzilla.suse.com/enter_bug.cgi"/>
<meta name="tracker-type" content="bsc"/>
<meta name="tracker-bsc-assignee" content="dpopov@suse.com"/>
<meta name="tracker-bsc-component" content="Documentation"/>
<meta name="tracker-bsc-product" content="SUSE OpenStack Cloud 9"/>
<meta property="og:title" content="Deploying the Non-OpenStack Components | SUSE OpenStac…"/>
<meta property="og:description" content="In addition to OpenStack barclamps, SUSE OpenStack Cloud includes several components that can be configured using the appropriate Crowbar barclamps."/>
<meta property="og:type" content="article"/>
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Deploying the Non-OpenStack Components | SUSE OpenStac…"/>
<meta name="twitter:description" content="In addition to OpenStack barclamps, SUSE OpenStack Cloud includes several components that can be configured using the appropriate Crowbar barclamps."/>
<link rel="prev" href="part-depl-nostack.html" title="Part IV. Setting Up Non-OpenStack Services"/><link rel="next" href="part-depl-troubleshooting.html" title="Part V. Troubleshooting and Support"/>
<script type="text/javascript">

if ( window.location.protocol.toLowerCase() != 'file:' ) {
  document.write('<link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"></link>');
};

</script><noscript><link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"/></noscript><script src="static/js/jquery-1.12.4.min.js" type="text/javascript"> </script><script src="static/js/script.js" type="text/javascript"> </script><script src="static/js/highlight.min.js" type="text/javascript"> </script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script></head><body class="draft wide offline js-off" onload="$('#betawarn-button-wrap').toggle();if (document.cookie.length > 0) {if (document.cookie.indexOf('betawarn=closed') != -1){$('#betawarn').toggle()}};"><div id="betawarn" style="position:fixed;bottom:0;z-index:9025;background-color:#FDE8E8;padding:1em;margin-left:10%;margin-right:10%;display:block;border-top:.75em solid #E11;width:80%"><p style="color:#333;margin:1em 0;padding:0;">This is a draft document that was built and uploaded automatically. It may document beta software and be incomplete or even incorrect. <strong>Use this document at your own risk.</strong></p> <div id="betawarn-button-wrap" style="display:none;margin:0;padding:0;"><a href="#" onclick="$('#betawarn').toggle();var d=new Date();d.setTime(d.getTime()+(0.5*24*60*60*1000));document.cookie='betawarn=closed; expires='+d.toUTCString()+'; path=/'; return false;" style="color:#333;text-decoration:underline;float:left;margin-top:.5em;padding:1em;display:block;background-color:#FABEBE;">I understand this is a draft</a></div></div><div class="bypass-block"><a href="#_content">Jump to content</a><a href="#_bottom-pagination">Jump to page navigation: previous page [access key p]/next page [access key n]</a></div><header id="_mainnav"><div class="growth-inhibitor"><img src="static/images/logo.svg" alt="Logo" class="logo"/></div></header><div class="crumbs"><div class="growth-inhibitor"><a class="crumb" href="index.html">Deployment Guide using Crowbar</a><span> / </span><a class="crumb" href="part-depl-nostack.html">Setting Up Non-OpenStack Services</a><span> / </span><a class="crumb" href="cha-depl-nostack.html">Deploying the Non-OpenStack Components</a></div></div><main id="_content"><nav id="_side-toc-overall" class="side-toc"><div class="side-title"><em class="citetitle">Deployment Guide using Crowbar</em></div><ol><li><a href="pre-cloud-deploy.html" class=" "><span class="title-number"> </span><span class="title-name">About This Guide</span></a></li><li><a href="part-depl-intro.html" class="has-children "><span class="title-number">I </span><span class="title-name">Architecture and Requirements</span></a><ol><li><a href="cha-depl-arch.html" class=" "><span class="title-number">1 </span><span class="title-name">The SUSE <span class="productname">OpenStack</span> Cloud Architecture</span></a></li><li><a href="cha-depl-req.html" class=" "><span class="title-number">2 </span><span class="title-name">Considerations and Requirements</span></a></li></ol></li><li><a href="part-depl-admserv.html" class="has-children "><span class="title-number">II </span><span class="title-name">Setting Up the Administration Server</span></a><ol><li><a href="cha-depl-adm-inst.html" class=" "><span class="title-number">3 </span><span class="title-name">Installing the Administration Server</span></a></li><li><a href="app-deploy-smt.html" class=" "><span class="title-number">4 </span><span class="title-name">Installing and Setting Up an SMT Server on the Administration Server (Optional)</span></a></li><li><a href="cha-depl-repo-conf.html" class=" "><span class="title-number">5 </span><span class="title-name">Software Repository Setup</span></a></li><li><a href="sec-depl-adm-inst-network.html" class=" "><span class="title-number">6 </span><span class="title-name">Service Configuration:  Administration Server Network Configuration</span></a></li><li><a href="sec-depl-adm-inst-crowbar.html" class=" "><span class="title-number">7 </span><span class="title-name">Crowbar Setup</span></a></li><li><a href="sec-depl-adm-start-crowbar.html" class=" "><span class="title-number">8 </span><span class="title-name">Starting the SUSE <span class="productname">OpenStack</span> Cloud Crowbar installation</span></a></li><li><a href="sec-depl-adm-crowbar-extra-features.html" class=" "><span class="title-number">9 </span><span class="title-name">Customizing Crowbar</span></a></li></ol></li><li><a href="part-depl-ostack.html" class="has-children "><span class="title-number">III </span><span class="title-name">Setting Up <span class="productname">OpenStack</span> Nodes and Services</span></a><ol><li><a href="cha-depl-crowbar.html" class=" "><span class="title-number">10 </span><span class="title-name">The Crowbar Web Interface</span></a></li><li><a href="cha-depl-inst-nodes.html" class=" "><span class="title-number">11 </span><span class="title-name">Installing the <span class="productname">OpenStack</span> Nodes</span></a></li><li><a href="cha-depl-ostack.html" class=" "><span class="title-number">12 </span><span class="title-name">Deploying the <span class="productname">OpenStack</span> Services</span></a></li><li><a href="sec-deploy-policy-json.html" class=" "><span class="title-number">13 </span><span class="title-name">Limiting Users' Access Rights</span></a></li><li><a href="cha-depl-ostack-configs.html" class=" "><span class="title-number">14 </span><span class="title-name">Configuration Files for <span class="productname">OpenStack</span> Services</span></a></li><li><a href="install-heat-templates.html" class=" "><span class="title-number">15 </span><span class="title-name">Installing SUSE CaaS Platform heat Templates</span></a></li><li><a href="install-caasp-terraform.html" class=" "><span class="title-number">16 </span><span class="title-name">Installing SUSE CaaS Platform v4 using terraform</span></a></li></ol></li><li class="active"><a href="part-depl-nostack.html" class="has-children you-are-here"><span class="title-number">IV </span><span class="title-name">Setting Up Non-<span class="productname">OpenStack</span> Services</span></a><ol><li><a href="cha-depl-nostack.html" class=" you-are-here"><span class="title-number">17 </span><span class="title-name">Deploying the Non-<span class="productname">OpenStack</span> Components</span></a></li></ol></li><li><a href="part-depl-troubleshooting.html" class="has-children "><span class="title-number">V </span><span class="title-name">Troubleshooting and Support</span></a><ol><li><a href="cha-depl-trouble.html" class=" "><span class="title-number">18 </span><span class="title-name">Troubleshooting and Support</span></a></li></ol></li><li><a href="app-deploy-cisco.html" class=" "><span class="title-number">A </span><span class="title-name">Using Cisco Nexus Switches with neutron</span></a></li><li><a href="app-deploy-docupdates.html" class=" "><span class="title-number">B </span><span class="title-name">Documentation Updates</span></a></li><li><a href="gl-cloud.html" class=" "><span class="title-number"> </span><span class="title-name">Glossary of Terminology and Product Names</span></a></li> </ol> </nav><button id="_open-side-toc-overall" title="Contents"> </button><article class="documentation"><button id="_unfold-side-toc-page">On this page</button><section class="chapter" id="cha-depl-nostack" data-id-title="Deploying the Non-OpenStack Components"><div class="titlepage"><div><div class="version-info">Applies to  <span class="productname"><span class="phrase"><span class="phrase">SUSE <span class="productname">OpenStack</span> Cloud Crowbar</span></span></span> <span class="productnumber">9</span></div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">17 </span><span class="title-name">Deploying the Non-<span class="productname">OpenStack</span> Components</span></span> <a title="Permalink" class="permalink" href="cha-depl-nostack.html#">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>
    In addition to <span class="productname">OpenStack</span> barclamps, SUSE <span class="productname">OpenStack</span> Cloud includes several components that can be configured using the appropriate  Crowbar barclamps.
   </p><section class="sect1" id="sec-depl-nostack-crowbar-tuning" data-id-title="Tuning the Crowbar Service"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">17.1 </span><span class="title-name">Tuning the Crowbar Service</span></span> <a title="Permalink" class="permalink" href="cha-depl-nostack.html#sec-depl-nostack-crowbar-tuning">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>
    Crowbar is a self-referential barclamp used for enabling other barclamps. By
    creating a Crowbar proposal, you can modify the default number of threads
    and workers. This way, you can scale the admin
    server according to the actual usage or the number of available cores of
    the admin node.
  </p><div class="figure" id="id-1.4.6.2.4.3"><div class="figure-contents"><div class="mediaobject"><a href="images/crowbar_tuning_raw.png"><img src="images/crowbar_tuning_raw.png" width="75%" alt="The Crowbar barclamp: Raw Mode" title="The Crowbar barclamp: Raw Mode"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 17.1: </span><span class="title-name">The Crowbar barclamp: Raw Mode </span></span><a title="Permalink" class="permalink" href="cha-depl-nostack.html#id-1.4.6.2.4.3">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div><p>
    To change the default settings, create a Crowbar proposal and switch to the
    <span class="guimenu">Raw</span> view. Adjust then the
    <code class="systemitem">workers</code> and <code class="systemitem">threads</code>
    values. The number of threads should be set to the number of available
    cores. The default number of workers should be increased to 3 if the
    graphical interface becomes slow. Save and apply the changes using the
    appropriate buttons.
  </p></section><section class="sect1" id="sec-depl-nostack-ntp" data-id-title="Configuring the NTP Service"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">17.2 </span><span class="title-name">Configuring the NTP Service</span></span> <a title="Permalink" class="permalink" href="cha-depl-nostack.html#sec-depl-nostack-ntp">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>
    The NTP service is responsible for keeping the clocks in your cloud servers
    in sync. Among other things, synchronized clocks ensure that the
    chef-client works properly. It also makes it easier to read logs from
    different nodes by correlating timestamps in them. The NTP component is deployed on the Administration Server automatically using the default settings. The NTP barclamp can be used to specify IP addresses of the external NTP servers and assign specific roles to the desired nodes. The following parameter can be configured using the NTP barclamp:
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.4.6.2.5.3.1"><span class="term">External servers</span></dt><dd><p>
	  A comma-separated list of IP addresses of external NTP servers.
	</p></dd></dl></div><p>
    The NTP service consists of two different roles:
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.4.6.2.5.5.1"><span class="term"><span class="guimenu">ntp-server</span>
    </span></dt><dd><p>
      A node that acts as an NTP server for NTP clients in your cloud. There
      can be more than one node with the ntp-server role in your cloud. In
      this scenario, the NTP server nodes can communicate with each other and the specified external servers to
      keep their time in sync.
     </p></dd><dt id="id-1.4.6.2.5.5.2"><span class="term"><span class="guimenu">ntp-client</span>
    </span></dt><dd><p>
      The <code class="systemitem">ntp-client</code> role can be assigned to any
      node. Nodes with the ntp-client role assigned to them keep their time in
      sync using NTP servers in your cloud.
     </p></dd></dl></div></section><section class="sect1" id="sec-depl-nostack-salt" data-id-title="Installing and using Salt"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">17.3 </span><span class="title-name">Installing and using Salt</span></span> <a title="Permalink" class="permalink" href="cha-depl-nostack.html#sec-depl-nostack-salt">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>
    Crowbar can setup Salt on the admin node to be able to use
    <code class="command">salt-ssh</code> from the admin node.
  </p><div id="id-1.4.6.2.6.3" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note</div><p>
        Salt is not replacing Chef. It can be used in parallel to Chef
        to automate tasks on the nodes.
      </p></div><div id="id-1.4.6.2.6.4" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note</div><p>
        Only <code class="command">salt-ssh</code> can currently be used. Installing the
        Salt barclamp does not setup a full Salt stack with Salt Master and
        Salt Minions.
      </p></div><p>
    To be able to apply the Salt proposal, the
    <a class="link" href="https://documentation.suse.com/sles/15-SP1/single-html/SLES-deployment/#sec-yast-install-addons" target="_blank">https://documentation.suse.com/sles/15-SP1/single-html/SLES-deployment/#sec-yast-install-addons</a>
    must be available on the node where the <code class="literal">salt-ssh</code> role will be applied
    (usually the admin node).
    After the Module is available, the barclamp can be applied.
  </p><p>
    From the node where the <code class="literal">salt-ssh</code> role is applied,
    Salt can be tested with:
  </p><div class="verbatim-wrap"><pre class="screen"># salt-ssh '*' test.ping
crowbar:
    True
storage1:
    True
controller:
    True</pre></div><p>
    To list the available nodes visible to <code class="literal">salt-ssh</code>, do:
  </p><div class="verbatim-wrap"><pre class="screen"># salt-ssh -H
/etc/salt/roster:
    ----------
    controller:
        192.168.192.81
    crowbar:
        192.168.192.10
    storage1:
        192.168.192.82</pre></div></section></section><nav class="bottom-pagination"><div><a class="pagination-link prev" href="part-depl-nostack.html"><span class="pagination-relation">Previous</span><span class="pagination-label"><span class="title-number">Part IV </span>Setting Up Non-<span class="productname">OpenStack</span> Services</span></a> </div><div><a class="pagination-link next" href="part-depl-troubleshooting.html"><span class="pagination-relation">Next</span><span class="pagination-label"><span class="title-number">Part V </span>Troubleshooting and Support</span></a> </div></nav></article><aside id="_side-toc-page" class="side-toc"><div class="side-title">On this page</div><div class="toc"><ul><li><span class="sect1"><a href="cha-depl-nostack.html#sec-depl-nostack-crowbar-tuning"><span class="title-number">17.1 </span><span class="title-name">Tuning the Crowbar Service</span></a></span></li><li><span class="sect1"><a href="cha-depl-nostack.html#sec-depl-nostack-ntp"><span class="title-number">17.2 </span><span class="title-name">Configuring the NTP Service</span></a></span></li><li><span class="sect1"><a href="cha-depl-nostack.html#sec-depl-nostack-salt"><span class="title-number">17.3 </span><span class="title-name">Installing and using Salt</span></a></span></li></ul></div><div class="side-title">Share this page</div><ul class="share"><li><a id="_share-fb" href="#" title="Facebook"> </a></li><li><a id="_share-in" href="#" title="LinkedIn"> </a></li><li><a id="_share-tw" href="#" title="Twitter"> </a></li><li><a id="_share-mail" href="#" title="E-Mail"> </a></li><li><a id="_print-button" href="#" title="Print this page"> </a></li></ul> </aside></main><footer id="_footer"><div class="growth-inhibitor"><div class="copy"><span class="copy__rights">© SUSE
                 2022</span></div></div></footer></body></html>