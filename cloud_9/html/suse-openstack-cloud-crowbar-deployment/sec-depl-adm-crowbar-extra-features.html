<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes"/><title>SUSE OpenStack Cloud Crowbar 9 | Deployment Guide using Crowbar | Customizing Crowbar</title><link rel="stylesheet" type="text/css" href="static/css/style.css"/>
<meta name="title" content="Customizing Crowbar | SUSE OpenStack Cloud Crowbar 9"/>
<meta name="description" content="In large deployments with many nodes, there are always some nodes that are in a fail or unknown state. New barclamps cannot be applied to them and va…"/>
<meta name="product-name" content="SUSE OpenStack Cloud Crowbar"/>
<meta name="product-number" content="9"/>
<meta name="book-title" content="Deployment Guide using Crowbar"/>
<meta name="chapter-title" content="Chapter 9. Customizing Crowbar"/>
<meta name="tracker-url" content="https://bugzilla.suse.com/enter_bug.cgi"/>
<meta name="tracker-type" content="bsc"/>
<meta name="tracker-bsc-assignee" content="dpopov@suse.com"/>
<meta name="tracker-bsc-component" content="Documentation"/>
<meta name="tracker-bsc-product" content="SUSE OpenStack Cloud 9"/>
<meta property="og:title" content="Customizing Crowbar | SUSE OpenStack Cloud Crowbar 9"/>
<meta property="og:description" content="In large deployments with many nodes, there are always some nodes that are in a fail or unknown state. New barclamps cannot be applied to them and va…"/>
<meta property="og:type" content="article"/>
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Customizing Crowbar | SUSE OpenStack Cloud Crowbar 9"/>
<meta name="twitter:description" content="In large deployments with many nodes, there are always some nodes that are in a fail or unknown state. New barclamps cannot be applied to them and va…"/>
<link rel="prev" href="sec-depl-adm-start-crowbar.html" title="Chapter 8. Starting the SUSE OpenStack Cloud Crowbar installation"/><link rel="next" href="part-depl-ostack.html" title="Part III. Setting Up OpenStack Nodes and Services"/>
<script type="text/javascript">

if ( window.location.protocol.toLowerCase() != 'file:' ) {
  document.write('<link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"></link>');
};

</script><noscript><link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"/></noscript><script src="static/js/jquery-1.12.4.min.js" type="text/javascript"> </script><script src="static/js/script.js" type="text/javascript"> </script><script src="static/js/highlight.min.js" type="text/javascript"> </script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script></head><body class="draft wide offline js-off" onload="$('#betawarn-button-wrap').toggle();if (document.cookie.length > 0) {if (document.cookie.indexOf('betawarn=closed') != -1){$('#betawarn').toggle()}};"><div id="betawarn" style="position:fixed;bottom:0;z-index:9025;background-color:#FDE8E8;padding:1em;margin-left:10%;margin-right:10%;display:block;border-top:.75em solid #E11;width:80%"><p style="color:#333;margin:1em 0;padding:0;">This is a draft document that was built and uploaded automatically. It may document beta software and be incomplete or even incorrect. <strong>Use this document at your own risk.</strong></p> <div id="betawarn-button-wrap" style="display:none;margin:0;padding:0;"><a href="#" onclick="$('#betawarn').toggle();var d=new Date();d.setTime(d.getTime()+(0.5*24*60*60*1000));document.cookie='betawarn=closed; expires='+d.toUTCString()+'; path=/'; return false;" style="color:#333;text-decoration:underline;float:left;margin-top:.5em;padding:1em;display:block;background-color:#FABEBE;">I understand this is a draft</a></div></div><div class="bypass-block"><a href="#_content">Jump to content</a><a href="#_bottom-pagination">Jump to page navigation: previous page [access key p]/next page [access key n]</a></div><header id="_mainnav"><div class="growth-inhibitor"><img src="static/images/logo.svg" alt="Logo" class="logo"/></div></header><div class="crumbs"><div class="growth-inhibitor"><a class="crumb" href="index.html">Deployment Guide using Crowbar</a><span> / </span><a class="crumb" href="part-depl-admserv.html">Setting Up the Administration Server</a><span> / </span><a class="crumb" href="sec-depl-adm-crowbar-extra-features.html">Customizing Crowbar</a></div></div><main id="_content"><nav id="_side-toc-overall" class="side-toc"><div class="side-title"><em class="citetitle">Deployment Guide using Crowbar</em></div><ol><li><a href="pre-cloud-deploy.html" class=" "><span class="title-number"> </span><span class="title-name">About This Guide</span></a></li><li><a href="part-depl-intro.html" class="has-children "><span class="title-number">I </span><span class="title-name">Architecture and Requirements</span></a><ol><li><a href="cha-depl-arch.html" class=" "><span class="title-number">1 </span><span class="title-name">The SUSE <span class="productname">OpenStack</span> Cloud Architecture</span></a></li><li><a href="cha-depl-req.html" class=" "><span class="title-number">2 </span><span class="title-name">Considerations and Requirements</span></a></li></ol></li><li class="active"><a href="part-depl-admserv.html" class="has-children you-are-here"><span class="title-number">II </span><span class="title-name">Setting Up the Administration Server</span></a><ol><li><a href="cha-depl-adm-inst.html" class=" "><span class="title-number">3 </span><span class="title-name">Installing the Administration Server</span></a></li><li><a href="app-deploy-smt.html" class=" "><span class="title-number">4 </span><span class="title-name">Installing and Setting Up an SMT Server on the Administration Server (Optional)</span></a></li><li><a href="cha-depl-repo-conf.html" class=" "><span class="title-number">5 </span><span class="title-name">Software Repository Setup</span></a></li><li><a href="sec-depl-adm-inst-network.html" class=" "><span class="title-number">6 </span><span class="title-name">Service Configuration:  Administration Server Network Configuration</span></a></li><li><a href="sec-depl-adm-inst-crowbar.html" class=" "><span class="title-number">7 </span><span class="title-name">Crowbar Setup</span></a></li><li><a href="sec-depl-adm-start-crowbar.html" class=" "><span class="title-number">8 </span><span class="title-name">Starting the SUSE <span class="productname">OpenStack</span> Cloud Crowbar installation</span></a></li><li><a href="sec-depl-adm-crowbar-extra-features.html" class=" you-are-here"><span class="title-number">9 </span><span class="title-name">Customizing Crowbar</span></a></li></ol></li><li><a href="part-depl-ostack.html" class="has-children "><span class="title-number">III </span><span class="title-name">Setting Up <span class="productname">OpenStack</span> Nodes and Services</span></a><ol><li><a href="cha-depl-crowbar.html" class=" "><span class="title-number">10 </span><span class="title-name">The Crowbar Web Interface</span></a></li><li><a href="cha-depl-inst-nodes.html" class=" "><span class="title-number">11 </span><span class="title-name">Installing the <span class="productname">OpenStack</span> Nodes</span></a></li><li><a href="cha-depl-ostack.html" class=" "><span class="title-number">12 </span><span class="title-name">Deploying the <span class="productname">OpenStack</span> Services</span></a></li><li><a href="sec-deploy-policy-json.html" class=" "><span class="title-number">13 </span><span class="title-name">Limiting Users' Access Rights</span></a></li><li><a href="cha-depl-ostack-configs.html" class=" "><span class="title-number">14 </span><span class="title-name">Configuration Files for <span class="productname">OpenStack</span> Services</span></a></li><li><a href="install-heat-templates.html" class=" "><span class="title-number">15 </span><span class="title-name">Installing SUSE CaaS Platform heat Templates</span></a></li><li><a href="install-caasp-terraform.html" class=" "><span class="title-number">16 </span><span class="title-name">Installing SUSE CaaS Platform v4 using terraform</span></a></li></ol></li><li><a href="part-depl-nostack.html" class="has-children "><span class="title-number">IV </span><span class="title-name">Setting Up Non-<span class="productname">OpenStack</span> Services</span></a><ol><li><a href="cha-depl-nostack.html" class=" "><span class="title-number">17 </span><span class="title-name">Deploying the Non-<span class="productname">OpenStack</span> Components</span></a></li></ol></li><li><a href="part-depl-troubleshooting.html" class="has-children "><span class="title-number">V </span><span class="title-name">Troubleshooting and Support</span></a><ol><li><a href="cha-depl-trouble.html" class=" "><span class="title-number">18 </span><span class="title-name">Troubleshooting and Support</span></a></li></ol></li><li><a href="app-deploy-cisco.html" class=" "><span class="title-number">A </span><span class="title-name">Using Cisco Nexus Switches with neutron</span></a></li><li><a href="app-deploy-docupdates.html" class=" "><span class="title-number">B </span><span class="title-name">Documentation Updates</span></a></li><li><a href="gl-cloud.html" class=" "><span class="title-number"> </span><span class="title-name">Glossary of Terminology and Product Names</span></a></li> </ol> </nav><button id="_open-side-toc-overall" title="Contents"> </button><article class="documentation"><button id="_unfold-side-toc-page">On this page</button><section class="chapter" id="sec-depl-adm-crowbar-extra-features" data-id-title="Customizing Crowbar"><div class="titlepage"><div><div class="version-info">Applies to  <span class="productname"><span class="phrase"><span class="phrase">SUSE <span class="productname">OpenStack</span> Cloud Crowbar</span></span></span> <span class="productnumber">9</span></div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">9 </span><span class="title-name">Customizing Crowbar</span></span> <a title="Permalink" class="permalink" href="sec-depl-adm-crowbar-extra-features.html#">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><section class="sect1" id="id-1.4.4.8.2" data-id-title="Skip Unready Nodes"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">9.1 </span><span class="title-name">Skip Unready Nodes</span></span> <a title="Permalink" class="permalink" href="sec-depl-adm-crowbar-extra-features.html#id-1.4.4.8.2">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>
   In large deployments with many nodes, there are always some nodes that are
   in a fail or unknown state. New barclamps cannot be applied to them and
   values cannot be updated in some barclamps that are already deployed. This
   happens because Crowbar will refuse to apply a barclamp to a list of nodes if
   they are not all in <code class="literal">ready</code> state.
  </p><p>
   To avoid having to manually take out nodes that are not
   <code class="literal">ready</code>, there is a feature called <code class="literal">skip unready
   nodes</code>. Instead of refusing to apply the barclamp, it will skip the
   nodes that it finds in any other state than <code class="literal">ready</code>.
  </p><p>
   <span class="bold"><strong>Enabling the Feature</strong></span>
  </p><p>
   In <code class="filename">/opt/dell/crowbar_framework/config/crowbar.yml</code>, set
   the option <code class="literal">skip_unready_nodes</code> to <code class="literal">true</code>.
  </p><div class="verbatim-wrap"><pre class="screen">default: &amp;default
skip_unready_nodes:
  enabled: false <span class="bold"><strong>&lt;&lt;&lt; change to true</strong></span></pre></div><p>
   <span class="bold"><strong>Roles Affected</strong></span>
  </p><p>
   All Barclamp roles are affected. The default config file includes all the
   roles that have been tested and found to be working. Adding roles to the
   default list is not supported for the <code class="literal">skip_unready_nodes</code>
   feature. Removing default roles is supported.
  </p><p>
   The list of currently supported roles to skip:
  </p><div class="verbatim-wrap"><pre class="screen">- bmc-nat-client
- ceilometer-agent
- deployer-client
- dns-client
- ipmi
- logging-client
- nova-compute-ironic
- nova-compute-kvm
- nova-compute-qemu
- nova-compute-vmware
- ntp-client
- provisioner-base
- suse-manager-client
- swift-storage
- updater</pre></div><p>
   <span class="bold"><strong>Determining Which Nodes Were Skipped</strong></span>
  </p><p>
   Skipped nodes are logged to the Crowbar log
   (<code class="filename">/var/log/crowbar/production.log</code>) where you can search
   for the text <code class="literal">skipped until next chef run</code>. This will print
   the log lines where nodes were skipped, the name of the node, and the
   barclamp which was being applied.
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code>grep "skipped until next chef run" /var/log/crowbar/production.log</pre></div><div id="id-1.4.4.8.2.14" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important</div><p>
    After enabling/disabling the <code class="literal">skip_unready_nodes</code> feature
    or adding/removing roles, the Crowbar framework service must be restarted
    (<code class="command">systemctl restart crowbar</code>) in order to use the updated
    settings.
   </p></div></section><section class="sect1" id="id-1.4.4.8.3" data-id-title="Skip Unchanged Nodes"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">9.2 </span><span class="title-name">Skip Unchanged Nodes</span></span> <a title="Permalink" class="permalink" href="sec-depl-adm-crowbar-extra-features.html#id-1.4.4.8.3">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>
   When a barclamp is applied, all nodes will run <code class="literal">chef-client</code>. Sometimes it is
   not necessary to run chef for each node as attributes or roles may have not
   changed for some of the nodes.
  </p><p>
   The <code class="literal">skip unchanged nodes</code> feature allows nodes to be
   skipped if their attributes or roles have not changed. This can help speed
   up applying a barclamp, especially in large deployments and with roles that
   are usually applied to a lot of nodes, such as nova.
  </p><p>
   <span class="bold"><strong>Enabling the Feature</strong></span>
  </p><p>
   In <code class="filename">/opt/dell/crowbar_framework/config/crowbar.yml</code>, set
   the option <code class="literal">skip_unchanged_nodes</code> to
   <code class="literal">true</code>.
  </p><div class="verbatim-wrap"><pre class="screen">default: &amp;default
skip_unchanged_nodes:
  enabled: false <span class="bold"><strong>&lt;&lt;&lt; change to true</strong></span></pre></div></section><section class="sect1" id="id-1.4.4.8.4" data-id-title="Controlling Chef Restarts Manually"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">9.3 </span><span class="title-name">Controlling Chef Restarts Manually</span></span> <a title="Permalink" class="permalink" href="sec-depl-adm-crowbar-extra-features.html#id-1.4.4.8.4">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>
   When a service configuration has changed, Chef forces this service to
   restart. Sometimes it is useful to have manual control of these
   restarts. This feature supports avoiding automatic restart of services and
   including them in a pending restart list.  Disabling restarts is
   enabled/disabled by barclamp and cannot be done on a service level. In other
   words, enabling this feature on the cinder barclamp will disable
   automatic restarts for all cinder-* services.
  </p><p>
   Two steps are necessary to activate this feature:
  </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
     Enable <code class="literal">disallow_restart</code> in the Crowbar configuration file
    </p></li><li class="step"><p>
     Set the <code class="literal">disable_restart</code> flag for a specific barclamp
     using <code class="literal">crowbar-client</code> or API
    </p></li></ol></div></div><p>
   <span class="bold"><strong>Enabling the Feature</strong></span>
  </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
     In <code class="filename">/opt/dell/crowbar_framework/config/crowbar.yml</code>, set
     the option <code class="literal">disallow_restart</code> to <code class="literal">true</code>.
    </p><div class="verbatim-wrap"><pre class="screen">default: &amp;default
disallow_restart:
  enabled: false <span class="bold"><strong>&lt;&lt;&lt; change to true</strong></span></pre></div></li><li class="step"><p>
     The <code class="literal">disable_restart</code> flag can be set with the Crowbar
     client or with the API.
    </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
       Set Flag with Crowbar Client
      </p><p>
       The crowbar client options for this feature are accessed with the
       <code class="command">crowbarctl services</code> command, and only work for
       <span class="productname">OpenStack</span> services. The options are:
      </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.4.4.8.4.6.2.2.1.3.1"><span class="term">disable_restart</span></dt><dd><p>
          The parameters are the barclamp name and the flag value
          (<code class="literal">true</code> to disable automatic restart and
          <code class="literal">false</code> to enable automatic restart). The command is
          <code class="literal">crowbarctl services disable_restart
          <em class="replaceable">BARCLAMP</em> &lt;true|false&gt;</code>. For
          example, to disable restart of the keystone barclamp, enter the
          command <code class="command">crowbarctl services disable_restart keystone
          true</code>.
         </p></dd><dt id="id-1.4.4.8.4.6.2.2.1.3.2"><span class="term">restart_flags</span></dt><dd><p>
          Used to check the <code class="literal">disable_restart</code> flag for each
          barclamp
         </p><div class="verbatim-wrap"><pre class="screen">crowbarctl services restart_flags
{
  "nova": true,
  "keystone": true,
  "database": true
}</pre></div></dd><dt id="id-1.4.4.8.4.6.2.2.1.3.3"><span class="term">list_restarts</span></dt><dd><p>
          Displays the list of pending restarts. The <code class="literal">pending
          restart</code> flag indicates that a service tried to
          restart due to the Chef run but it did not due to the automatic
          restart being disabled. It also indicates that the service might have
          a new configuration and it will not be applied until it is manually
          restarted.
         </p><p>
          In the following example, the <code class="literal">pacemaker_service</code>
          attribute indicates whether this service is managed by Pacemaker
          (usually in an HA environment) or it is a standalone service managed
          by <code class="literal">systemd</code> (usually in non-HA environments). More
          on Pacemaker at <a class="xref" href="cha-depl-ostack.html#sec-depl-ostack-pacemaker" title="12.2. Deploying Pacemaker (Optional, HA Setup Only)">Section 12.2, “Deploying Pacemaker (Optional, HA Setup Only)”</a>. The
          service to restart will be <code class="literal">apache2</code> not managed by
          Pacemaker.
         </p><div class="verbatim-wrap"><pre class="screen">crowbarctl services list_restarts
{
  "<em class="replaceable">NODE_IP</em>": {
    "alias": "controller1",
    "keystone": {
      "apache2": {
        "pacemaker_service": false,
        "timestamp": "2017-11-22 11:17:49 UTC"
      }
    }
  }
}</pre></div></dd><dt id="id-1.4.4.8.4.6.2.2.1.3.4"><span class="term">clear_restart</span></dt><dd><p>
          Removes the flag on a specific node for a specific service. It can
          be executed when the service has restarted manually. The command is
          <code class="literal">crowbarctl services clear_restart
          <em class="replaceable">NODE</em>
          <em class="replaceable">SERVICE</em></code>. For example, <code class="command">crowbarctl
          services clear_restart <em class="replaceable">NODE_IP</em>
          apache2</code>
         </p></dd></dl></div></li><li class="listitem"><p>
       Using the API to List, Get Status, Set and Clear Flags
      </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
         /restart_management/configuration
        </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.4.4.8.4.6.2.2.2.2.1.2.1"><span class="term">GET</span></dt><dd><p>
           Lists the barclamps and the status of service reboots disallowed
          </p></dd><dt id="id-1.4.4.8.4.6.2.2.2.2.1.2.2"><span class="term">POST (parameters: disallow_restarts, barclamp)</span></dt><dd><p>
            Sets the disallow_restart flag for a barclamp
           </p></dd></dl></div></li><li class="listitem"><p>
         /restart_management/restarts
        </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.4.4.8.4.6.2.2.2.2.2.2.1"><span class="term">GET</span></dt><dd><p>
           Lists all of the services needing restarts
          </p></dd><dt id="id-1.4.4.8.4.6.2.2.2.2.2.2.2"><span class="term">POST (parameters: node, service)</span></dt><dd><p>
            Clears the restart flag for the given service in the given node
           </p></dd></dl></div></li></ul></div></li></ul></div></li></ol></div></div></section><section class="sect1" id="id-1.4.4.8.5" data-id-title="Prevent Automatic Restart"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">9.4 </span><span class="title-name">Prevent Automatic Restart</span></span> <a title="Permalink" class="permalink" href="sec-depl-adm-crowbar-extra-features.html#id-1.4.4.8.5">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>
   Sometimes a change in a proposal requires services to be restarted on all
   implicated nodes. This could be a problem in a production environment where
   interrupting a service completely is not an option, and where manual restart
   control is needed. With the service <code class="literal">disable_restart</code>
   feature in <code class="literal">crowbarctl</code>, you can set a flag for certain
   proposals to prevent the automatic restart.
  </p><p>
   <span class="bold"><strong>Enabling the Feature</strong></span>
  </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
     In <code class="filename">/opt/dell/crowbar_framework/config/crowbar.yml</code>, set
     the option <code class="literal">disallow_restart</code> to <code class="literal">true</code>.
    </p><div class="verbatim-wrap"><pre class="screen">default: &amp;default
disallow_restart:
  enabled: false <span class="bold"><strong>&lt;&lt;&lt; change to true</strong></span></pre></div></li><li class="step"><p>
     Restart Crowbar
    </p></li><li class="step"><p>
     Enable the <code class="literal">disable_restart</code> flag in the affected
     cookbook.
    </p><div class="verbatim-wrap"><pre class="screen">crowbarctl services disable_restart <em class="replaceable">COOKBOOK</em> true</pre></div><p>
     For example, to disable keystone and RabbitMQ restarts:
    </p><div class="verbatim-wrap"><pre class="screen">crowbarctl services disable_restart keystone true
crowbarctl services disable_restart rabbitmq true</pre></div></li><li class="step"><p>
     To check the proposals that have <code class="literal">disable_restart</code>
     enabled:
    </p><div class="verbatim-wrap"><pre class="screen">crowbarctl services restart_flags
{
  "rabbitmq": true,
  "keystone": true,
}</pre></div></li></ol></div></div><p>
   <span class="bold"><strong>Check Pending Restarts</strong></span>
  </p><p>
   When a proposal is applied with the <code class="literal">disable_restart</code> flag
   enabled, the implicated nodes will not restart. They will be listed as
   pending restarts. To check this list, run the command <code class="command">crowbarctl
   services list_restarts</code>.
  </p><p>
   In the following example, <code class="literal">disable_restart</code> is enabled for
   RabbitMQ. After applying rabbitmq, <code class="literal">list_restarts</code> will
   show the affected nodes, the proposal, and the services to restart.
  </p><div class="verbatim-wrap"><pre class="screen">crowbarctl services list_restarts
{
   "d52-54-77-77-01-01.vo5.cloud.suse.de": {
    "alias": "controller1",
    "rabbitmq": {
      "rabbitmq-server": {
        "pacemaker_service": false,
        "timestamp": "2018-03-07 15:30:30 UTC"
      }
    }
  }
}</pre></div><p>
   After a manual restart of the service, the flags should be cleaned. The
   following command will clean the flag for a specific node, for a specific
   proposal or all proposals, and for a specific service.
  </p><div class="verbatim-wrap"><pre class="screen">crowbarctl services clear_restart <em class="replaceable">NODE [COOKBOOK [SERVICE]]</em></pre></div><p>
   For example, to clean the RabbitMQ flag from the
   <code class="literal">controller1</code> node, run the command:
  </p><div class="verbatim-wrap"><pre class="screen">crowbarctl service clear_restart controller1 rabbitmq</pre></div><p>
   To clean the <code class="literal">controller1</code> node, run the command:
  </p><div class="verbatim-wrap"><pre class="screen">crowbarctl service clear_restart controller1</pre></div></section></section><nav class="bottom-pagination"><div><a class="pagination-link prev" href="sec-depl-adm-start-crowbar.html"><span class="pagination-relation">Previous</span><span class="pagination-label"><span class="title-number">Chapter 8 </span>Starting the SUSE <span class="productname">OpenStack</span> Cloud Crowbar installation</span></a> </div><div><a class="pagination-link next" href="part-depl-ostack.html"><span class="pagination-relation">Next</span><span class="pagination-label"><span class="title-number">Part III </span>Setting Up <span class="productname">OpenStack</span> Nodes and Services</span></a> </div></nav></article><aside id="_side-toc-page" class="side-toc"><div class="side-title">On this page</div><div class="toc"><ul><li><span class="section"><a href="sec-depl-adm-crowbar-extra-features.html#id-1.4.4.8.2"><span class="title-number">9.1 </span><span class="title-name">Skip Unready Nodes</span></a></span></li><li><span class="section"><a href="sec-depl-adm-crowbar-extra-features.html#id-1.4.4.8.3"><span class="title-number">9.2 </span><span class="title-name">Skip Unchanged Nodes</span></a></span></li><li><span class="section"><a href="sec-depl-adm-crowbar-extra-features.html#id-1.4.4.8.4"><span class="title-number">9.3 </span><span class="title-name">Controlling Chef Restarts Manually</span></a></span></li><li><span class="section"><a href="sec-depl-adm-crowbar-extra-features.html#id-1.4.4.8.5"><span class="title-number">9.4 </span><span class="title-name">Prevent Automatic Restart</span></a></span></li></ul></div><div class="side-title">Share this page</div><ul class="share"><li><a id="_share-fb" href="#" title="Facebook"> </a></li><li><a id="_share-in" href="#" title="LinkedIn"> </a></li><li><a id="_share-tw" href="#" title="Twitter"> </a></li><li><a id="_share-mail" href="#" title="E-Mail"> </a></li><li><a id="_print-button" href="#" title="Print this page"> </a></li></ul> </aside></main><footer id="_footer"><div class="growth-inhibitor"><div class="copy"><span class="copy__rights">© SUSE
                 2022</span></div></div></footer></body></html>