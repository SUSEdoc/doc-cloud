<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Encryption of Passwords and Sensitive Data | Security Guide | SUSE OpenStack Cloud 9</title><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" /><link rel="stylesheet" type="text/css" href="static/css/style.css" /><link rel="stylesheet" type="text/css" href="static/css/highlight.css" /><meta name="generator" content="DAPS 3.2.0 (https://opensuse.github.io/daps) using SUSE XSL Stylesheets 2.81.0 (based on DocBook XSL Stylesheets 1.79.2) - chunked" /><meta name="product-name" content="SUSE OpenStack Cloud" /><meta name="product-number" content="9" /><meta name="book-title" content="Security Guide" /><meta name="chapter-title" content="Chapter 10. Encryption of Passwords and Sensitive Data" /><meta name="description" content="In SUSE OpenStack Cloud, sensitive connection data is encrypted. The passwords that are encrypted include:" /><meta name="tracker-url" content="https://bugzilla.suse.com/enter_bug.cgi" /><meta name="tracker-type" content="bsc" /><meta name="tracker-bsc-component" content="Documentation" /><meta name="tracker-bsc-product" content="SUSE OpenStack Cloud 9" /><link rel="home" href="index.html" title="Documentation" /><link rel="up" href="book-security.html" title="Security Guide" /><link rel="prev" href="header-poisoning.html" title="Chapter 9. Preventing Host Header Poisoning" /><link rel="next" href="encryption-ephemeral.html" title="Chapter 11. Encryption of Ephemeral Volumes" />
<script type="text/javascript">

if ( window.location.protocol.toLowerCase() != 'file:' ) {
  document.write('<link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"></link>');
};

</script><noscript><link rel="stylesheet" type="text/css" href="https://static.opensuse.org/fonts/fonts.css" /></noscript><script src="static/js/jquery-1.10.2.min.js" type="text/javascript"></script><script src="static/js/script.js" type="text/javascript"></script><script src="static/js/highlight.min.js" type="text/javascript"></script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script></head><body class="draft offline js-off" onload="$('#betawarn-button-wrap').toggle();if (document.cookie.length > 0) {if (document.cookie.indexOf('betawarn=closed') != -1){$('#betawarn').toggle()}};"><div id="betawarn" style="position:fixed;bottom:0;z-index:9025;background-color:#FDE8E8;padding:1em;margin-left:10%;margin-right:10%;display:block;border-top:.75em solid #E11;width:80%"><p style="color:#333;margin:1em 0;padding:0;">This is a draft document that was built and uploaded automatically. It may document beta software and be incomplete or even incorrect. <strong>Use this document at your own risk.</strong></p> <div id="betawarn-button-wrap" style="display:none;margin:0;padding:0;"><a href="#" onclick="$('#betawarn').toggle();var d=new Date();d.setTime(d.getTime()+(0.5*24*60*60*1000));document.cookie='betawarn=closed; expires='+d.toUTCString()+'; path=/'; return false;" style="color:#333;text-decoration:underline;float:left;margin-top:.5em;padding:1em;display:block;background-color:#FABEBE;">I understand this is a draft</a></div></div><div class="bypass-block"><a href="#_content">Jump to content</a><a href="#_bottom-navigation">Jump to page navigation: previous page [access key p]/next page [access key n]</a></div><div id="_outer-wrap"><div id="_white-bg" style="background-color: #E11;"><div id="_header"><div id="_logo"><img src="static/images/logo.svg" alt="Logo" /></div><div class="crumbs"><a class="book-link" href="index.html" title="Security Guide"><span class="book-icon">Security Guide</span></a><span> › </span><a class="crumb" href="password-encryption.html">Encryption of Passwords and Sensitive Data</a></div><div class="clearme"></div></div></div><div id="_toolbar-wrap"><div id="_toolbar"><div id="_toc-area" class="inactive"><a id="_toc-area-button" class="tool" title="Contents" accesskey="c" href="index.html"><span class="tool-spacer"><span class="toc-icon">Contents</span><span class="clearme"></span></span><span class="tool-label">Contents</span></a><div class="active-contents bubble-corner"></div><div class="active-contents bubble"><div class="bubble-container"><h6>Security Guide</h6><div id="_bubble-toc"><ol><li class="inactive"><a href="newsecurity.html"><span class="number">1 </span><span class="name"><span class="phrase"><span class="phrase">SUSE® <span class="productname">OpenStack</span> Cloud</span></span>: Security Planning and Features</span></a></li><li class="inactive"><a href="barbican.html"><span class="number">2 </span><span class="name">Key Management with the barbican Service</span></a></li><li class="inactive"><a href="barbicanAdmin.html"><span class="number">3 </span><span class="name">Key Management Service Administration</span></a></li><li class="inactive"><a href="roleSegregation.html"><span class="number">4 </span><span class="name">Service Admin Role Segregation in the Identity Service</span></a></li><li class="inactive"><a href="cha-security-rbac.html"><span class="number">5 </span><span class="name">Role-Based Access Control in neutron</span></a></li><li class="inactive"><a href="sg-logging.html"><span class="number">6 </span><span class="name">Enabling Network Security Group Logging</span></a></li><li class="inactive"><a href="x509-certificate-auth.html"><span class="number">7 </span><span class="name">Configuring keystone and horizon to use X.509 Client Certificates</span></a></li><li class="inactive"><a href="tls30overview.html"><span class="number">8 </span><span class="name">Transport Layer Security (TLS) Overview</span></a></li><li class="inactive"><a href="header-poisoning.html"><span class="number">9 </span><span class="name">Preventing Host Header Poisoning</span></a></li><li class="inactive"><a href="password-encryption.html"><span class="number">10 </span><span class="name">Encryption of Passwords and Sensitive Data</span></a></li><li class="inactive"><a href="encryption-ephemeral.html"><span class="number">11 </span><span class="name">Encryption of Ephemeral Volumes</span></a></li><li class="inactive"><a href="topic-rmq-j1v-4t.html"><span class="number">12 </span><span class="name">Refining Access Control with AppArmor</span></a></li><li class="inactive"><a href="dar.html"><span class="number">13 </span><span class="name">Data at Rest Encryption</span></a></li><li class="inactive"><a href="glance-rate-limit.html"><span class="number">14 </span><span class="name">glance-API Rate Limit (CVE-2016-8611)</span></a></li><li class="inactive"><a href="idg-all-security-middleware-auditing-xml-1.html"><span class="number">15 </span><span class="name">Security Audit Logs</span></a></li></ol></div><div class="clearme"></div></div></div></div><div id="_nav-area" class="inactive"><div class="tool"><span class="nav-inner"><span class="tool-label">Navigation</span><a accesskey="p" class="tool-spacer" title="Chapter 9. Preventing Host Header Poisoning" href="header-poisoning.html"><span class="prev-icon">←</span></a><a accesskey="n" class="tool-spacer" title="Chapter 11. Encryption of Ephemeral Volumes" href="encryption-ephemeral.html"><span class="next-icon">→</span></a></span></div></div></div></div><div id="_fixed-header-wrap" style="background-color: #E11;" class="inactive"><div id="_fixed-header"><div class="crumbs"><a class="book-link" href="index.html" title="Security Guide"><span class="book-icon">Security Guide</span></a><span> › </span><a class="crumb" href="password-encryption.html">Encryption of Passwords and Sensitive Data</a></div><div class="buttons"><a class="top-button button" href="#">Top</a><div class="button"><a accesskey="p" class="tool-spacer" title="Chapter 9. Preventing Host Header Poisoning" href="header-poisoning.html"><span class="prev-icon">←</span></a><a accesskey="n" class="tool-spacer" title="Chapter 11. Encryption of Ephemeral Volumes" href="encryption-ephemeral.html"><span class="next-icon">→</span></a></div><div class="clearme"></div></div><div class="clearme"></div></div></div><div id="_content" class="draft "><div class="documentation"><div class="chapter " id="password-encryption"><div class="titlepage"><div><div class="version-info">Applies to  <span class="productname "><span class="phrase"><span class="phrase">SUSE <span class="productname">OpenStack</span> Cloud</span></span></span> <span class="productnumber ">9</span></div><div><h1 class="title"><span class="number">10 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Encryption of Passwords and Sensitive Data</span> <a title="Permalink" class="permalink" href="password-encryption.html#">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE-Cloud/doc-cloud/blob/maintenance/cloud_9/xml/security-encrypted_storage.xml" title="Edit the source file for this section">Edit source</a></h1><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>security-encrypted_storage.xml</li><li><span class="ds-label">ID: </span>password-encryption</li></ul></div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="section"><a href="password-encryption.html#id-1.4.12.4"><span class="number">10.1 </span><span class="name">SSH Introduction</span></a></span></dt><dt><span class="section"><a href="password-encryption.html#protection"><span class="number">10.2 </span><span class="name">Protecting sensitive data on the Cloud Lifecycle Manager</span></a></span></dt><dt><span class="section"><a href="password-encryption.html#id-1.4.12.6"><span class="number">10.3 </span><span class="name">Interacting with Encrypted Files</span></a></span></dt></dl></div></div><p>
  In <span class="phrase"><span class="phrase">SUSE <span class="productname">OpenStack</span> Cloud</span></span>, sensitive connection data is encrypted. The passwords
  that are encrypted include:
 </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
    Inter-service passwords generated by the configuration processor (keystone,
    MariaDB, RabbitMQ and Cassandra passwords)
   </p></li><li class="listitem "><p>
    Secret keys generated by the configuration processor (MariaDB cluster-id,
    erlang cookie for RabbitMQ, horizon secret key, keystone admin token)
   </p></li><li class="listitem "><p>
    User-supplied passwords (IPMI passwords, Block Storage back-end passwords)
   </p></li></ul></div><div class="sect1" id="id-1.4.12.4"><div class="titlepage"><div><div><h2 class="title"><span class="number">10.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">SSH Introduction</span> <a title="Permalink" class="permalink" href="password-encryption.html#id-1.4.12.4">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE-Cloud/doc-cloud/blob/maintenance/cloud_9/xml/security-encrypted_storage.xml" title="Edit the source file for this section">Edit source</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>security-encrypted_storage.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><div class="informaltable"><table class="informaltable" border="1"><colgroup><col class="c1" /><col class="c2" /><col class="c3" /><col class="c4" /></colgroup><thead><tr><th>What is encrypted</th><th>Encryption mechanism</th><th>Is password changeable</th><th>Is encryption key changeable</th></tr></thead><tbody><tr><td>
       <p>
        Inter-service passwords and secret keys generated by the configuration
        processor (keystone, MariaDB, RabbitMQ and Cassandra passwords)
       </p>
      </td><td>Uses PyCrypto libraries &amp; Ansible vault for encryption</td><td>No</td><td>
       <p>
        Yes
       </p>
       <p>
        Passphrase for the encryption key will be prompted when running Ansible
        playbook. Can also use command
        <code class="command">ask-ansible-pass</code>
       </p>
      </td></tr><tr><td>
       <p>
        User supplied passwords (IPMI passwords, Block Storage back-end
        passwords)
       </p>
      </td><td>OpenSSL</td><td>Yes</td><td>
       <p>
        Yes
       </p>
       <p>
        The environment variable ARDANA_USER_PASSWORD_ENCRYPT_KEY must contain the
        key used to encrypt those passwords.
       </p>
      </td></tr></tbody></table></div><p>
   Other protected data:
  </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
     The SSH private key used by Ansible to connect to client nodes from the
     Cloud Lifecycle Manager is protected with a passphrase.
    </p></li><li class="listitem "><p>
     The swift swift-hash prefix and suffix values are encrypted.
    </p></li><li class="listitem "><p>
     All of the Ansible variables generated by the configuration processor are
     encrypted and held in Ansible Vault.
    </p></li></ul></div><p>
   However, if a user wants to change the encryption keys then that can be done
   for all categories of password and secret-keys listed below, and the
   processes are documented.
  </p><p>
   The SSH private key passphrase needs to be entered once before any Ansible
   plays are run against the cloud.
  </p><p>
   The configuration processor encryption key will be prompted for when the
   relevant Ansible play is run. Once the configuration processor output has
   been encrypted, all subsequent Ansible plays need to have --ask-ansible-pass
   added to the command line to ensure that the encryption key which is needed
   by Ansible is prompted for.
  </p><p>
   Finally, if user-supplied passwords have been encrypted (this process uses
   the OpenSSL library) then the environment variable
   ARDANA_USER_PASSWORD_ENCRYPT_KEY must contain the key used to encrypt those
   passwords.
  </p><p>
   In the case where the ARDANA_USER_PASSWORD_ENCRYPT_KEY environment variable is
   either null, the empty string, or not defined, then no encryption will be
   performed on your passwords when using the ardanaencrypt.py script.
  </p><p>
   The generated passwords are stored in Ansible inputs generated by the
   configuration processor and also in the persistent state information
   maintained by the configuration processor.
  </p></div><div class="sect1" id="protection"><div class="titlepage"><div><div><h2 class="title"><span class="number">10.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Protecting sensitive data on the Cloud Lifecycle Manager</span> <a title="Permalink" class="permalink" href="password-encryption.html#protection">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE-Cloud/doc-cloud/blob/maintenance/cloud_9/xml/security-encrypted_storage.xml" title="Edit the source file for this section">Edit source</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>security-encrypted_storage.xml</li><li><span class="ds-label">ID: </span>protection</li></ul></div></div></div></div><p>
   There are a number of mechanisms that can be used to protect sensitive data
   such as passwords, some Ansible inputs, and the SSH key used by Ansible on
   the Cloud Lifecycle Manager. See the installation documents for details. Please
   remember the need to guard against exposure of your environment variables,
   which may happen through observation over the shoulder.
  </p><p>
   There are instructions included in the installation documents that show how
   to encrypt your data using the <code class="literal">ardanaencrypt.py</code> script. You
   may want to change the encryption keys used to protect your sensitive data
   in the future and this shows you how:
  </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
     <span class="bold"><strong>SSH keys</strong></span> - Run the command below to
     change the passphrase used to protect the key:
    </p><div class="verbatim-wrap"><pre class="screen">ssh-keygen -f id_rsa -p</pre></div></li><li class="listitem "><p>
     <span class="bold"><strong>configuration processor Key</strong></span> - If you wish
     to change an encryption password that you have already used when running
     the configuration processor then enter the existing password at the first
     prompt and the new password at the second prompt when running the
     configuration processor playbook. See <span class="intraxref">Book “<em class="citetitle ">Deployment Guide using Cloud Lifecycle Manager</em>”, Chapter 24 “Installing Mid-scale and Entry-scale KVM”</span> for
     more details.
    </p></li><li class="listitem "><p>
     <span class="bold"><strong>IPMI passwords if encrypted with
     <code class="literal">ardanaencrypt.py</code></strong></span> - Rerun the utility specifying
     a new encryption key when prompted. You will need to enter the plain text
     passwords at the password prompt.
    </p></li></ul></div></div><div class="sect1" id="id-1.4.12.6"><div class="titlepage"><div><div><h2 class="title"><span class="number">10.3 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Interacting with Encrypted Files</span> <a title="Permalink" class="permalink" href="password-encryption.html#id-1.4.12.6">#</a><a class="report-bug" rel="nofollow" target="_blank" href="https://github.com/SUSE-Cloud/doc-cloud/blob/maintenance/cloud_9/xml/security-encrypted_storage.xml" title="Edit the source file for this section">Edit source</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>security-encrypted_storage.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>
   Once you have enabled encryption in your environment you may have a need to
   interact with these encrypted files at a later time. This section will show
   you how.
  </p><p>
   <span class="bold"><strong>ardanaencrypt.py script password encryption</strong></span>
  </p><p>
   If you used the <code class="literal">ardanaencrypt.py</code> script to encrypt your IPMI
   or other passwords and have a need to view them later, you can do so with
   these steps.
  </p><p>
   You will want to ensure that the
   <code class="literal">ARDANA_USER_PASSWORD_ENCRYPT_KEY</code> environment variable is set
   prior to running these commands:
  </p><div class="verbatim-wrap"><pre class="screen">export ARDANA_USER_PASSWORD_ENCRYPT_KEY="&lt;encryption_key&gt;"</pre></div><p>
   To view an encrypted password, you can use this command below which will
   promot you for the encrypted password value. It will then output the
   decrypted value:
  </p><div class="verbatim-wrap"><pre class="screen">./ardanaencrypt.py -d</pre></div><p>
   <span class="bold"><strong>Configuration processor encryption key</strong></span>
  </p><p>
   If you have used the encryption options available with the configuration
   processor, which uses Ansible vault, you can do so with these commands. Each
   of these commands will prompt you for the password you used when setting the
   encryption initially.
  </p><p>
   To view an encrypted file in read-only mode, use this command:
  </p><div class="verbatim-wrap"><pre class="screen">ansible-vault view &lt;filename&gt;</pre></div><p>
   To edit an encrypted file, use this command. This allows you to edit a
   decrypted version of the file without the need to decrypt and re-encrypt it:
  </p><div class="verbatim-wrap"><pre class="screen">ansible-vault edit &lt;filename&gt;</pre></div><p>
   For other available commands, use the help file:
  </p><div class="verbatim-wrap"><pre class="screen">ansible-vault -h</pre></div></div></div></div><div class="page-bottom"><div id="_bottom-navigation"><a class="nav-link" href="encryption-ephemeral.html"><span class="next-icon">→</span><span class="nav-label"><span class="number">Chapter 11 </span>Encryption of Ephemeral Volumes</span></a><a class="nav-link" href="header-poisoning.html"><span class="prev-icon">←</span><span class="nav-label"><span class="number">Chapter 9 </span>Preventing Host Header Poisoning</span></a></div><div class="_share-print"><div class="online-contents share"><strong>Share this page: </strong><span class="share-buttons"><span class="_share-fb bottom-button">Facebook</span><span class="spacer"> • </span><span class="_share-in bottom-button">LinkedIn</span><span class="spacer"> • </span><span class="_share-tw bottom-button">Twitter</span><span class="spacer"> • </span><span class="_share-mail bottom-button">E-Mail</span></span></div><div class="print"><span class="_print-button bottom-button">Print this page</span></div><div class="clearme"></div></div></div></div><div id="_inward"></div></div><div id="_footer-wrap"><div id="_footer"><p>©
        2022 
        SUSE</p><ul><li><a href="https://jobs.suse.com/" target="_top">Careers</a></li><li><a href="https://www.suse.com/company/legal/" target="_top">Legal</a></li><li><a href="https://www.suse.com/company/about/" target="_top">About</a></li><li><a href="https://www.suse.com/contact/" target="_top">Contact Us</a></li></ul></div></div></body></html>