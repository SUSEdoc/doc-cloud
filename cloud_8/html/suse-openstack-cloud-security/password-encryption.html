<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes"/><title>SUSE OpenStack Cloud 8 | Security Guide | Encryption of Passwords and Sensitive Data</title><link rel="stylesheet" type="text/css" href="static/css/style.css"/>
<meta name="title" content="Encryption of Passwords and Sensitive Data | SUSE Open…"/>
<meta name="description" content="In SUSE OpenStack Cloud, sensitive connection data is encrypted. The passwords that are encrypted include:"/>
<meta name="product-name" content="SUSE OpenStack Cloud"/>
<meta name="product-number" content="8"/>
<meta name="book-title" content="Security Guide"/>
<meta name="chapter-title" content="Chapter 9. Encryption of Passwords and Sensitive Data"/>
<meta name="tracker-url" content="https://bugzilla.suse.com/enter_bug.cgi"/>
<meta name="tracker-type" content="bsc"/>
<meta name="tracker-bsc-component" content="Documentation"/>
<meta name="tracker-bsc-product" content="SUSE OpenStack Cloud 8"/>
<meta property="og:title" content="Encryption of Passwords and Sensitive Data | SUSE Open…"/>
<meta property="og:description" content="In SUSE OpenStack Cloud, sensitive connection data is encrypted. The passwords that are encrypted include:"/>
<meta property="og:type" content="article"/>
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Encryption of Passwords and Sensitive Data | SUSE Open…"/>
<meta name="twitter:description" content="In SUSE OpenStack Cloud, sensitive connection data is encrypted. The passwords that are encrypted include:"/>
<link rel="prev" href="header-poisoning.html" title="Chapter 8. SUSE® OpenStack Cloud: Preventing Host Header Poisoning"/><link rel="next" href="encryption-ephemeral.html" title="Chapter 10. Encryption of Ephemeral Volumes"/>
<script type="text/javascript">

if ( window.location.protocol.toLowerCase() != 'file:' ) {
  document.write('<link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"></link>');
};

</script><noscript><link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"/></noscript><script src="static/js/jquery-1.12.4.min.js" type="text/javascript"> </script><script src="static/js/script.js" type="text/javascript"> </script><script src="static/js/highlight.min.js" type="text/javascript"> </script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script><meta name="edit-url" content="https://github.com/SUSE-Cloud/doc-cloud/blob/maintenance/cloud_8/xml/security-encrypted_storage.xml"/></head><body class="draft wide offline js-off" onload="$('#betawarn-button-wrap').toggle();if (document.cookie.length > 0) {if (document.cookie.indexOf('betawarn=closed') != -1){$('#betawarn').toggle()}};"><div id="betawarn" style="position:fixed;bottom:0;z-index:9025;background-color:#FDE8E8;padding:1em;margin-left:10%;margin-right:10%;display:block;border-top:.75em solid #E11;width:80%"><p style="color:#333;margin:1em 0;padding:0;">This is a draft document that was built and uploaded automatically. It may document beta software and be incomplete or even incorrect. <strong>Use this document at your own risk.</strong></p> <div id="betawarn-button-wrap" style="display:none;margin:0;padding:0;"><a href="#" onclick="$('#betawarn').toggle();var d=new Date();d.setTime(d.getTime()+(0.5*24*60*60*1000));document.cookie='betawarn=closed; expires='+d.toUTCString()+'; path=/'; return false;" style="color:#333;text-decoration:underline;float:left;margin-top:.5em;padding:1em;display:block;background-color:#FABEBE;">I understand this is a draft</a></div></div><div class="bypass-block"><a href="#_content">Jump to content</a><a href="#_bottom-pagination">Jump to page navigation: previous page [access key p]/next page [access key n]</a></div><header id="_mainnav"><div class="growth-inhibitor"><img src="static/images/logo.svg" alt="Logo" class="logo"/></div></header><div class="crumbs"><div class="growth-inhibitor"><a class="crumb" href="index.html">Security Guide</a><span> / </span><a class="crumb" href="password-encryption.html">Encryption of Passwords and Sensitive Data</a></div></div><main id="_content"><nav id="_side-toc-overall" class="side-toc"><div class="side-title">Security Guide</div><ol><li><a href="newsecurity.html" class=" "><span class="title-number">1 </span><span class="title-name"><span class="phrase"><span class="phrase">SUSE® <span class="productname">OpenStack</span> Cloud</span></span>: Security Features Overview</span></a></li><li><a href="barbican.html" class=" "><span class="title-number">2 </span><span class="title-name">Key Management with the Barbican Service</span></a></li><li><a href="barbicanAdmin.html" class=" "><span class="title-number">3 </span><span class="title-name">Key Management Service Administration</span></a></li><li><a href="roleSegregation.html" class=" "><span class="title-number">4 </span><span class="title-name"><span class="phrase"><span class="phrase">SUSE® <span class="productname">OpenStack</span> Cloud</span></span>: Service Admin Role Segregation in the Identity Service</span></a></li><li><a href="cha-security-rbac.html" class=" "><span class="title-number">5 </span><span class="title-name">Role-Based Access Control in Neutron</span></a></li><li><a href="x509-certificate-auth.html" class=" "><span class="title-number">6 </span><span class="title-name">Configuring Keystone and Horizon to use X.509 Client Certificates</span></a></li><li><a href="tls30overview.html" class=" "><span class="title-number">7 </span><span class="title-name">Transport Layer Security (TLS) Overview</span></a></li><li><a href="header-poisoning.html" class=" "><span class="title-number">8 </span><span class="title-name"><span class="phrase"><span class="phrase">SUSE® <span class="productname">OpenStack</span> Cloud</span></span>: Preventing Host Header Poisoning</span></a></li><li><a href="password-encryption.html" class=" you-are-here"><span class="title-number">9 </span><span class="title-name">Encryption of Passwords and Sensitive Data</span></a></li><li><a href="encryption-ephemeral.html" class=" "><span class="title-number">10 </span><span class="title-name">Encryption of Ephemeral Volumes</span></a></li><li><a href="topic-rmq-j1v-4t.html" class=" "><span class="title-number">11 </span><span class="title-name">Refining Access Control with AppArmor</span></a></li><li><a href="dar.html" class=" "><span class="title-number">12 </span><span class="title-name">Data at Rest Encryption</span></a></li><li><a href="glance-rate-limit.html" class=" "><span class="title-number">13 </span><span class="title-name">Glance-API Rate Limit (CVE-2016-8611)</span></a></li><li><a href="idg-all-security-middleware-auditing-xml-1.html" class=" "><span class="title-number">14 </span><span class="title-name">Security Audit Logs</span></a></li> </ol> </nav><button id="_open-side-toc-overall" title="Contents"> </button><article class="documentation"><button id="_unfold-side-toc-page">On this page</button><section class="chapter" id="password-encryption" data-id-title="Encryption of Passwords and Sensitive Data"><div class="titlepage"><div><div class="version-info">Applies to  <span class="productname"><span class="phrase"><span class="phrase">SUSE <span class="productname">OpenStack</span> Cloud</span></span></span> <span class="productnumber"><span class="phrase"><span class="phrase">8</span></span></span></div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">9 </span><span class="title-name">Encryption of Passwords and Sensitive Data</span></span> <a title="Permalink" class="permalink" href="password-encryption.html#">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE-Cloud/doc-cloud/blob/maintenance/cloud_8/xml/security-encrypted_storage.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  In <span class="phrase"><span class="phrase">SUSE <span class="productname">OpenStack</span> Cloud</span></span>, sensitive connection data is encrypted. The passwords
  that are encrypted include:
 </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
    Inter-service passwords generated by the configuration processor (Keystone,
    MariaDB, RabbitMQ and Cassandra passwords)
   </p></li><li class="listitem"><p>
    Secret keys generated by the configuration processor (MariaDB cluster-id,
    erlang cookie for RabbitMQ, Horizon secret key, Keystone admin token)
   </p></li><li class="listitem"><p>
    User-supplied passwords (IPMI passwords, Block Storage back-end passwords)
   </p></li></ul></div><section class="sect1" id="id-1.5.11.4" data-id-title="SSH Introduction"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">9.1 </span><span class="title-name">SSH Introduction</span></span> <a title="Permalink" class="permalink" href="password-encryption.html#id-1.5.11.4">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE-Cloud/doc-cloud/blob/maintenance/cloud_8/xml/security-encrypted_storage.xml" title="Edit source document"> </a></div></div></div></div></div><div class="informaltable"><table style="border-collapse: collapse; border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col class="c1"/><col class="c2"/><col class="c3"/><col class="c4"/></colgroup><thead><tr><th style="border-right: 1px solid ; border-bottom: 1px solid ; ">What is encrypted</th><th style="border-right: 1px solid ; border-bottom: 1px solid ; ">Encryption mechanism</th><th style="border-right: 1px solid ; border-bottom: 1px solid ; ">Is password changeable</th><th style="border-bottom: 1px solid ; ">Is encryption key changeable</th></tr></thead><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">
       <p>
        Inter-service passwords and secret keys generated by the configuration
        processor (Keystone, MariaDB, RabbitMQ and Cassandra passwords)
       </p>
      </td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">Uses PyCrypto libraries &amp; Ansible vault for encryption</td><td style="border-right: 1px solid ; border-bottom: 1px solid ; ">No</td><td style="border-bottom: 1px solid ; ">
       <p>
        Yes
       </p>
       <p>
        Passphrase for the encryption key will be prompted when running Ansible
        playbook. Can also use command
        <code class="command">ask-ansible-pass</code>
       </p>
      </td></tr><tr><td style="border-right: 1px solid ; ">
       <p>
        User supplied passwords (IPMI passwords, Block Storage back-end
        passwords)
       </p>
      </td><td style="border-right: 1px solid ; ">OpenSSL</td><td style="border-right: 1px solid ; ">Yes</td><td>
       <p>
        Yes
       </p>
       <p>
        The environment variable ARDANA_USER_PASSWORD_ENCRYPT_KEY must contain the
        key used to encrypt those passwords.
       </p>
      </td></tr></tbody></table></div><p>
   Other protected data:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     The SSH private key used by Ansible to connect to client nodes from the
     Cloud Lifecycle Manager is protected with a passphrase.
    </p></li><li class="listitem"><p>
     The Swift swift-hash prefix and suffix values are encrypted.
    </p></li><li class="listitem"><p>
     All of the Ansible variables generated by the configuration processor are
     encrypted and held in Ansible Vault.
    </p></li></ul></div><p>
   However, if a user wants to change the encryption keys then that can be done
   for all categories of password and secret-keys listed below, and the
   processes are documented.
  </p><p>
   The SSH private key passphrase needs to be entered once before any Ansible
   plays are run against the cloud.
  </p><p>
   The configuration processor encryption key will be prompted for when the
   relevant Ansible play is run. Once the configuration processor output has
   been encrypted, all subsequent Ansible plays need to have --ask-ansible-pass
   added to the command line to ensure that the encryption key which is needed
   by Ansible is prompted for.
  </p><p>
   Finally, if user-supplied passwords have been encrypted (this process uses
   the OpenSSL library) then the environment variable
   ARDANA_USER_PASSWORD_ENCRYPT_KEY must contain the key used to encrypt those
   passwords.
  </p><p>
   In the case where the ARDANA_USER_PASSWORD_ENCRYPT_KEY environment variable is
   either null, the empty string, or not defined, then no encryption will be
   performed on your passwords when using the ardanaencrypt.py script.
  </p><p>
   The generated passwords are stored in Ansible inputs generated by the
   configuration processor and also in the persistent state information
   maintained by the configuration processor.
  </p></section><section class="sect1" id="protection" data-id-title="Protecting sensitive data on the Cloud Lifecycle Manager"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">9.2 </span><span class="title-name">Protecting sensitive data on the Cloud Lifecycle Manager</span></span> <a title="Permalink" class="permalink" href="password-encryption.html#protection">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE-Cloud/doc-cloud/blob/maintenance/cloud_8/xml/security-encrypted_storage.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   There are a number of mechanisms that can be used to protect sensitive data
   such as passwords, some Ansible inputs, and the SSH key used by Ansible on
   the Cloud Lifecycle Manager. See the installation documents for details. Please
   remember the need to guard against exposure of your environment variables,
   which may happen through observation over the shoulder.
  </p><p>
   There are instructions included in the installation documents that show how
   to encrypt your data using the <code class="literal">ardanaencrypt.py</code> script. You
   may want to change the encryption keys used to protect your sensitive data
   in the future and this shows you how:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     <span class="bold"><strong>SSH keys</strong></span> - Run the command below to
     change the passphrase used to protect the key:
    </p><div class="verbatim-wrap"><pre class="screen">ssh-keygen -f id_rsa -p</pre></div></li><li class="listitem"><p>
     <span class="bold"><strong>configuration processor Key</strong></span> - If you wish
     to change an encryption password that you have already used when running
     the configuration processor then enter the existing password at the first
     prompt and the new password at the second prompt when running the
     configuration processor playbook. See <span class="intraxref">Book “<em class="citetitle">Installing with Cloud Lifecycle Manager</em>”, Chapter 12 “Installing Mid-scale and Entry-scale KVM”</span> for
     more details.
    </p></li><li class="listitem"><p>
     <span class="bold"><strong>IPMI passwords if encrypted with
     <code class="literal">ardanaencrypt.py</code></strong></span> - Rerun the utility specifying
     a new encryption key when prompted. You will need to enter the plain text
     passwords at the password prompt.
    </p></li></ul></div></section><section class="sect1" id="id-1.5.11.6" data-id-title="Interacting with Encrypted Files"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">9.3 </span><span class="title-name">Interacting with Encrypted Files</span></span> <a title="Permalink" class="permalink" href="password-encryption.html#id-1.5.11.6">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE-Cloud/doc-cloud/blob/maintenance/cloud_8/xml/security-encrypted_storage.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Once you have enabled encryption in your environment you may have a need to
   interact with these encrypted files at a later time. This section will show
   you how.
  </p><p>
   <span class="bold"><strong>ardanaencrypt.py script password encryption</strong></span>
  </p><p>
   If you used the <code class="literal">ardanaencrypt.py</code> script to encrypt your IPMI
   or other passwords and have a need to view them later, you can do so with
   these steps.
  </p><p>
   You will want to ensure that the
   <code class="literal">ARDANA_USER_PASSWORD_ENCRYPT_KEY</code> environment variable is set
   prior to running these commands:
  </p><div class="verbatim-wrap"><pre class="screen">export ARDANA_USER_PASSWORD_ENCRYPT_KEY="&lt;encryption_key&gt;"</pre></div><p>
   To view an encrypted password, you can use this command below which will
   promot you for the encrypted password value. It will then output the
   decrypted value:
  </p><div class="verbatim-wrap"><pre class="screen">./ardanaencrypt.py -d</pre></div><p>
   <span class="bold"><strong>Configuration processor encryption key</strong></span>
  </p><p>
   If you have used the encryption options available with the configuration
   processor, which uses Ansible vault, you can do so with these commands. Each
   of these commands will prompt you for the password you used when setting the
   encryption initially.
  </p><p>
   To view an encrypted file in read-only mode, use this command:
  </p><div class="verbatim-wrap"><pre class="screen">ansible-vault view &lt;filename&gt;</pre></div><p>
   To edit an encrypted file, use this command. This allows you to edit a
   decrypted version of the file without the need to decrypt and re-encrypt it:
  </p><div class="verbatim-wrap"><pre class="screen">ansible-vault edit &lt;filename&gt;</pre></div><p>
   For other available commands, use the help file:
  </p><div class="verbatim-wrap"><pre class="screen">ansible-vault -h</pre></div></section></section><nav class="bottom-pagination"><div><a class="pagination-link prev" href="header-poisoning.html"><span class="pagination-relation">Previous</span><span class="pagination-label"><span class="title-number">Chapter 8 </span><span class="phrase"><span class="phrase">SUSE® <span class="productname">OpenStack</span> Cloud</span></span>: Preventing Host Header Poisoning</span></a> </div><div><a class="pagination-link next" href="encryption-ephemeral.html"><span class="pagination-relation">Next</span><span class="pagination-label"><span class="title-number">Chapter 10 </span>Encryption of Ephemeral Volumes</span></a> </div></nav></article><aside id="_side-toc-page" class="side-toc"><div class="side-title">On this page</div><div class="toc"><ul><li><span class="section"><a href="password-encryption.html#id-1.5.11.4"><span class="title-number">9.1 </span><span class="title-name">SSH Introduction</span></a></span></li><li><span class="section"><a href="password-encryption.html#protection"><span class="title-number">9.2 </span><span class="title-name">Protecting sensitive data on the Cloud Lifecycle Manager</span></a></span></li><li><span class="section"><a href="password-encryption.html#id-1.5.11.6"><span class="title-number">9.3 </span><span class="title-name">Interacting with Encrypted Files</span></a></span></li></ul></div><div class="side-title">Share this page</div><ul class="share"><li><a id="_share-fb" href="#" title="Facebook"> </a></li><li><a id="_share-in" href="#" title="LinkedIn"> </a></li><li><a id="_share-tw" href="#" title="Twitter"> </a></li><li><a id="_share-mail" href="#" title="E-Mail"> </a></li><li><a id="_print-button" href="#" title="Print this page"> </a></li></ul> </aside></main><footer id="_footer"><div class="growth-inhibitor"><div class="copy"><span class="copy__rights">© SUSE
                 2022</span></div></div></footer></body></html>