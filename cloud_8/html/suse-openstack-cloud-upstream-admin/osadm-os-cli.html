<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang=""><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>OpenStack command-line clients | OpenStack Administrator Guide | SUSE OpenStack Cloud 8</title><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" /><link rel="stylesheet" type="text/css" href="static/css/style.css" /><link rel="stylesheet" type="text/css" href="static/css/highlight.css" /><meta name="generator" content="DAPS 3.2.0 (https://opensuse.github.io/daps) using SUSE XSL Stylesheets 2.81.0 (based on DocBook XSL Stylesheets 1.79.2) - chunked" /><meta name="product-name" content="SUSE OpenStack Cloud" /><meta name="product-number" content="8" /><meta name="book-title" content="OpenStack Administrator Guide" /><meta name="chapter-title" content="Chapter 14. OpenStack command-line clients" /><meta name="description" content="OpenStackClient project provides a unified command-line client, which enables you to access the project API through easy-to-use commands. Also, most OpenStack project provides a command-line client for each service. For example, the Compute service provides a nova command-line client." /><meta name="tracker-url" content="https://bugzilla.suse.com/enter_bug.cgi" /><meta name="tracker-type" content="bsc" /><meta name="tracker-bsc-component" content="Documentation" /><meta name="tracker-bsc-product" content="SUSE OpenStack Cloud 8" /><link rel="home" href="index.html" title="SUSE OpenStack Cloud Crowbar 8 Documentation" /><link rel="up" href="book-upstream-admin.html" title="OpenStack Administrator Guide" /><link rel="prev" href="bk02ch13.html" title="Chapter 13. Orchestration" /><link rel="next" href="bk02ch15.html" title="Chapter 15. Cross-project features" />
<script type="text/javascript">

if ( window.location.protocol.toLowerCase() != 'file:' ) {
  document.write('<link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"></link>');
};

</script><noscript><link rel="stylesheet" type="text/css" href="https://static.opensuse.org/fonts/fonts.css" /></noscript><script src="static/js/jquery-1.10.2.min.js" type="text/javascript"></script><script src="static/js/script.js" type="text/javascript"></script><script src="static/js/highlight.min.js" type="text/javascript"></script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script></head><body class="draft offline js-off" onload="$('#betawarn-button-wrap').toggle();if (document.cookie.length > 0) {if (document.cookie.indexOf('betawarn=closed') != -1){$('#betawarn').toggle()}};"><div id="betawarn" style="position:fixed;bottom:0;z-index:9025;background-color:#FDE8E8;padding:1em;margin-left:10%;margin-right:10%;display:block;border-top:.75em solid #E11;width:80%"><p style="color:#333;margin:1em 0;padding:0;">This is a draft document that was built and uploaded automatically. It may document beta software and be incomplete or even incorrect. <strong>Use this document at your own risk.</strong></p> <div id="betawarn-button-wrap" style="display:none;margin:0;padding:0;"><a href="#" onclick="$('#betawarn').toggle();var d=new Date();d.setTime(d.getTime()+(0.5*24*60*60*1000));document.cookie='betawarn=closed; expires='+d.toUTCString()+'; path=/'; return false;" style="color:#333;text-decoration:underline;float:left;margin-top:.5em;padding:1em;display:block;background-color:#FABEBE;">I understand this is a draft</a></div></div><div class="bypass-block"><a href="#_content">Jump to content</a><a href="#_bottom-navigation">Jump to page navigation: previous page [access key p]/next page [access key n]</a></div><div id="_outer-wrap"><div id="_white-bg" style="background-color: #E11;"><div id="_header"><div id="_logo"><img src="static/images/logo.svg" alt="Logo" /></div><div class="crumbs"><a class="book-link" href="index.html" title="SUSE OpenStack Cloud Crowbar 8 Documentation"><span class="book-icon">SUSE OpenStack Cloud Crowbar 8 Documentation</span></a><span> › </span><a class="crumb" href="book-upstream-admin.html">OpenStack Administrator Guide</a><span> › </span><a class="crumb" href="osadm-os-cli.html">OpenStack command-line clients</a></div><div class="clearme"></div></div></div><div id="_toolbar-wrap"><div id="_toolbar"><div id="_toc-area" class="inactive"><a id="_toc-area-button" class="tool" title="Contents" accesskey="c" href="index.html"><span class="tool-spacer"><span class="toc-icon">Contents</span><span class="clearme"></span></span><span class="tool-label">Contents</span></a><div class="active-contents bubble-corner"></div><div class="active-contents bubble"><div class="bubble-container"><h6>OpenStack Administrator Guide</h6><div id="_bubble-toc"><ol><li class="inactive"><a href="bk02ch01.html"><span class="number">1 </span><span class="name">Documentation Conventions</span></a></li><li class="inactive"><a href="bk02ch02.html"><span class="number">2 </span><span class="name">Get started with OpenStack</span></a></li><li class="inactive"><a href="cha-identity.html"><span class="number">3 </span><span class="name">Identity management</span></a></li><li class="inactive"><a href="bk02ch04.html"><span class="number">4 </span><span class="name">Dashboard</span></a></li><li class="inactive"><a href="bk02ch05.html"><span class="number">5 </span><span class="name">Compute</span></a></li><li class="inactive"><a href="bk02ch06.html"><span class="number">6 </span><span class="name">Object Storage</span></a></li><li class="inactive"><a href="bk02ch07.html"><span class="number">7 </span><span class="name">Block Storage</span></a></li><li class="inactive"><a href="bk02ch08.html"><span class="number">8 </span><span class="name">Shared File Systems</span></a></li><li class="inactive"><a href="networking.html"><span class="number">9 </span><span class="name">Networking</span></a></li><li class="inactive"><a href="bk02ch10.html"><span class="number">10 </span><span class="name">Telemetry</span></a></li><li class="inactive"><a href="bk02ch11.html"><span class="number">11 </span><span class="name">Database</span></a></li><li class="inactive"><a href="bk02ch12.html"><span class="number">12 </span><span class="name">Bare Metal</span></a></li><li class="inactive"><a href="bk02ch13.html"><span class="number">13 </span><span class="name">Orchestration</span></a></li><li class="inactive"><a href="osadm-os-cli.html"><span class="number">14 </span><span class="name">OpenStack command-line clients</span></a></li><li class="inactive"><a href="bk02ch15.html"><span class="number">15 </span><span class="name">Cross-project features</span></a></li><li class="inactive"><a href="bk02ch16.html"><span class="number">16 </span><span class="name">Appendix</span></a></li><li class="inactive"><a href="bk02go01.html"><span class="number"> </span><span class="name">Glossary</span></a></li></ol></div><div class="clearme"></div></div></div></div><div id="_nav-area" class="inactive"><div class="tool"><span class="nav-inner"><span class="tool-label">Navigation</span><a accesskey="p" class="tool-spacer" title="Chapter 13. Orchestration" href="bk02ch13.html"><span class="prev-icon">←</span></a><a accesskey="n" class="tool-spacer" title="Chapter 15. Cross-project features" href="bk02ch15.html"><span class="next-icon">→</span></a></span></div></div></div></div><div id="_fixed-header-wrap" style="background-color: #E11;" class="inactive"><div id="_fixed-header"><div class="crumbs"><a class="book-link" href="index.html" title="SUSE OpenStack Cloud Crowbar 8 Documentation"><span class="book-icon">SUSE OpenStack Cloud Crowbar 8 Documentation</span></a><span> › </span><a class="crumb" href="book-upstream-admin.html">OpenStack Administrator Guide</a><span> › </span><a class="crumb" href="osadm-os-cli.html">OpenStack command-line clients</a></div><div class="buttons"><a class="top-button button" href="#">Top</a><div class="button"><a accesskey="p" class="tool-spacer" title="Chapter 13. Orchestration" href="bk02ch13.html"><span class="prev-icon">←</span></a><a accesskey="n" class="tool-spacer" title="Chapter 15. Cross-project features" href="bk02ch15.html"><span class="next-icon">→</span></a></div><div class="clearme"></div></div><div class="clearme"></div></div></div><div id="_content" class="draft "><div class="documentation"><div class="chapter " id="osadm-os-cli"><div class="titlepage"><div><div class="version-info">Applies to  <span class="productname ">SUSE OpenStack Cloud</span> <span class="productnumber ">8</span></div><div><h1 class="title"><span class="number">14 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">OpenStack command-line clients</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#">#</a></h1><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span>osadm-os-cli</li></ul></div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="osadm-os-cli.html#id-1.4.16.3"><span class="number">14.1 </span><span class="name">Command-line client overview</span></a></span></dt><dt><span class="sect1"><a href="osadm-os-cli.html#id-1.4.16.4"><span class="number">14.2 </span><span class="name">Install the OpenStack command-line clients</span></a></span></dt><dt><span class="sect1"><a href="osadm-os-cli.html#id-1.4.16.5"><span class="number">14.3 </span><span class="name">Discover the version number for a client</span></a></span></dt><dt><span class="sect1"><a href="osadm-os-cli.html#sec-rcfile"><span class="number">14.4 </span><span class="name">Set environment variables using the OpenStack RC file</span></a></span></dt><dt><span class="sect1"><a href="osadm-os-cli.html#id-1.4.16.7"><span class="number">14.5 </span><span class="name">Manage projects, users, and roles</span></a></span></dt><dt><span class="sect1"><a href="osadm-os-cli.html#osadm-security-group"><span class="number">14.6 </span><span class="name">Manage project security</span></a></span></dt><dt><span class="sect1"><a href="osadm-os-cli.html#id-1.4.16.9"><span class="number">14.7 </span><span class="name">Manage services</span></a></span></dt><dt><span class="sect1"><a href="osadm-os-cli.html#id-1.4.16.10"><span class="number">14.8 </span><span class="name">Manage images</span></a></span></dt><dt><span class="sect1"><a href="osadm-os-cli.html#id-1.4.16.11"><span class="number">14.9 </span><span class="name">Manage volumes</span></a></span></dt><dt><span class="sect1"><a href="osadm-os-cli.html#id-1.4.16.12"><span class="number">14.10 </span><span class="name">Manage shares</span></a></span></dt><dt><span class="sect1"><a href="osadm-os-cli.html#osadm-manage-flavors-cmd"><span class="number">14.11 </span><span class="name">Manage flavors</span></a></span></dt><dt><span class="sect1"><a href="osadm-os-cli.html#id-1.4.16.14"><span class="number">14.12 </span><span class="name">Manage the OpenStack environment</span></a></span></dt><dt><span class="sect1"><a href="osadm-os-cli.html#manage-quotas"><span class="number">14.13 </span><span class="name">Manage quotas</span></a></span></dt><dt><span class="sect1"><a href="osadm-os-cli.html#id-1.4.16.16"><span class="number">14.14 </span><span class="name">Analyze log files</span></a></span></dt><dt><span class="sect1"><a href="osadm-os-cli.html#id-1.4.16.17"><span class="number">14.15 </span><span class="name">Manage Block Storage scheduling</span></a></span></dt></dl></div></div><div class="sect1 " id="id-1.4.16.3"><div class="titlepage"><div><div><h2 class="title"><span class="number">14.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Command-line client overview</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.3">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>OpenStackClient project provides a unified command-line client, which
enables you to access the project API through easy-to-use commands.
Also, most OpenStack project provides a command-line client for each service.
For example, the Compute service provides a <code class="literal">nova</code> command-line client.</p><p>You can run the commands from the command line, or include the
commands within scripts to automate tasks. If you provide OpenStack
credentials, such as your user name and password, you can run these
commands on any computer.</p><p>Internally, each command uses cURL command-line tools, which embed API
requests. OpenStack APIs are RESTful APIs, and use the HTTP
protocol. They include methods, URIs, media types, and response codes.</p><p>OpenStack APIs are open-source Python clients, and can run on Linux or
Mac OS X systems. On some client commands, you can specify a debug
parameter to show the underlying API request for the command. This is
a good way to become familiar with the OpenStack API calls.</p><p>As a cloud end user, you can use the OpenStack Dashboard to provision
your own resources within the limits set by administrators. You can
modify the examples provided in this section to create other types and
sizes of server instances.</p><div class="sect2 " id="id-1.4.16.3.7"><div class="titlepage"><div><div><h3 class="title"><span class="number">14.1.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Unified command-line client</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.3.7">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>You can use the unified <code class="literal">openstack</code> command (<span class="bold"><strong>python-openstackclient</strong></span>)
for the most of OpenStack services.
For more information, see <a class="link" href="http://docs.openstack.org/developer/python-openstackclient/" target="_blank">OpenStackClient document</a>.</p></div><div class="sect2 " id="id-1.4.16.3.8"><div class="titlepage"><div><div><h3 class="title"><span class="number">14.1.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Individual command-line clients</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.3.8">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>Unless the unified OpenStack Client (<span class="bold"><strong>python-openstackclient</strong></span>) is used,
the following table lists the command-line client for each OpenStack
service with its package name and description.</p><div class="table" id="id-1.4.16.3.8.3"><div class="table-title-wrap"><h6 class="table-title"><span class="number">Table 14.1: </span><span class="name">OpenStack services and clients </span><a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.3.8.3">#</a></h6></div><div class="table-contents"><table class="table" summary="OpenStack services and clients" border="1"><colgroup><col class="c1" /><col class="c2" /><col class="c3" /><col class="c4" /></colgroup><thead><tr><th>
                  <p>Service</p>
                </th><th>
                  <p>Client</p>
                </th><th>
                  <p>Package</p>
                </th><th>
                  <p>Description</p>
                </th></tr></thead><tbody><tr><td>
                  <p>Application Catalog service</p>
                </td><td>
                  <p>murano</p>
                </td><td>
                  <p>python-muranoclient</p>
                </td><td>
                  <p>Creates and manages applications.</p>
                </td></tr><tr><td>
                  <p>Bare Metal service</p>
                </td><td>
                  <p>ironic</p>
                </td><td>
                  <p>python-ironicclient</p>
                </td><td>
                  <p>manages and provisions physical machines.</p>
                </td></tr><tr><td>
                  <p>Block Storage service</p>
                </td><td>
                  <p>cinder</p>
                </td><td>
                  <p>python-cinderclient</p>
                </td><td>
                  <p>Creates and manages volumes.</p>
                </td></tr><tr><td>
                  <p>Clustering service</p>
                </td><td>
                  <p>senlin</p>
                </td><td>
                  <p>python-senlinclient</p>
                </td><td>
                  <p>Creates and manages clustering services.</p>
                </td></tr><tr><td>
                  <p>Compute service</p>
                </td><td>
                  <p>nova</p>
                </td><td>
                  <p>python-novaclient</p>
                </td><td>
                  <p>Creates and manages images, instances, and flavors.</p>
                </td></tr><tr><td>
                  <p>Container Infrastructure Management service</p>
                </td><td>
                  <p>magnum</p>
                </td><td>
                  <p>python-magnumclient</p>
                </td><td>
                  <p>Creates and manages containers.</p>
                </td></tr><tr><td>
                  <p>Data Processing service</p>
                </td><td>
                  <p>sahara</p>
                </td><td>
                  <p>python-saharaclient</p>
                </td><td>
                  <p>Creates and manages Hadoop clusters on OpenStack.</p>
                </td></tr><tr><td>
                  <p>Database service</p>
                </td><td>
                  <p>trove</p>
                </td><td>
                  <p>python-troveclient</p>
                </td><td>
                  <p>Creates and manages databases.</p>
                </td></tr><tr><td>
                  <p>Deployment service</p>
                </td><td>
                  <p>fuel</p>
                </td><td>
                  <p>python-fuelclient</p>
                </td><td>
                  <p>Plans deployments.</p>
                </td></tr><tr><td>
                  <p>DNS service</p>
                </td><td>
                  <p>designate</p>
                </td><td>
                  <p>python-designateclient</p>
                </td><td>
                  <p>Creates and manages self service authoritative DNS.</p>
                </td></tr><tr><td>
                  <p>Image service</p>
                </td><td>
                  <p>glance</p>
                </td><td>
                  <p>python-glanceclient</p>
                </td><td>
                  <p>Creates and manages images.</p>
                </td></tr><tr><td>
                  <p>Key Manager service</p>
                </td><td>
                  <p>barbican</p>
                </td><td>
                  <p>python-barbicanclient</p>
                </td><td>
                  <p>Creates and manages keys.</p>
                </td></tr><tr><td>
                  <p>Monitoring</p>
                </td><td>
                  <p>monasca</p>
                </td><td>
                  <p>python-monascaclient</p>
                </td><td>
                  <p>Monitoring solution.</p>
                </td></tr><tr><td>
                  <p>Networking service</p>
                </td><td>
                  <p>neutron</p>
                </td><td>
                  <p>python-neutronclient</p>
                </td><td>
                  <p>Configures networks for guest servers.</p>
                </td></tr><tr><td>
                  <p>Object Storage service</p>
                </td><td>
                  <p>swift</p>
                </td><td>
                  <p>python-swiftclient</p>
                </td><td>
                  <p>Gathers statistics, lists items, updates metadata, and uploads,
downloads, and deletes files stored by the Object Storage service.
Gains access to an Object Storage installation for ad hoc processing.</p>
                </td></tr><tr><td>
                  <p>Orchestration service</p>
                </td><td>
                  <p>heat</p>
                </td><td>
                  <p>python-heatclient</p>
                </td><td>
                  <p>Launches stacks from templates, views details of running stacks
including events and resources, and updates and deletes stacks.</p>
                </td></tr><tr><td>
                  <p>Rating service</p>
                </td><td>
                  <p>cloudkitty</p>
                </td><td>
                  <p>python-cloudkittyclient</p>
                </td><td>
                  <p>Rating service.</p>
                </td></tr><tr><td>
                  <p>Shared File Systems service</p>
                </td><td>
                  <p>manila</p>
                </td><td>
                  <p>python-manilaclient</p>
                </td><td>
                  <p>Creates and manages shared file systems.</p>
                </td></tr><tr><td>
                  <p>Telemetry service</p>
                </td><td>
                  <p>ceilometer</p>
                </td><td>
                  <p>python-ceilometerclient</p>
                </td><td>
                  <p>Creates and collects measurements across OpenStack.</p>
                </td></tr><tr><td>
                  <p>Telemetry v3</p>
                </td><td>
                  <p>gnocchi</p>
                </td><td>
                  <p>python-gnocchiclient</p>
                </td><td>
                  <p>Creates and collects measurements across OpenStack.</p>
                </td></tr><tr><td>
                  <p>Workflow service</p>
                </td><td>
                  <p>mistral</p>
                </td><td>
                  <p>python-mistralclient</p>
                </td><td>
                  <p>Workflow service for OpenStack cloud.</p>
                </td></tr></tbody></table></div></div></div></div><div class="sect1 " id="id-1.4.16.4"><div class="titlepage"><div><div><h2 class="title"><span class="number">14.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Install the OpenStack command-line clients</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.4">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>Install the prerequisite software and the Python package for each
OpenStack client.</p><div class="sect2 " id="id-1.4.16.4.3"><div class="titlepage"><div><div><h3 class="title"><span class="number">14.2.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Install the prerequisite software</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.4.3">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>Most Linux distributions include packaged versions of the command-line
clients that you can install directly, see <a class="xref" href="osadm-os-cli.html#installing-from-packages" title="14.2.2.2. Installing from packages">Section 14.2.2.2, “Installing from packages”</a>.</p><p>If you need to install the source package for the command-line package,
the following table lists the software needed to run the
command-line clients, and provides installation instructions as needed.</p><div class="table" id="id-1.4.16.4.3.4"><div class="table-title-wrap"><h6 class="table-title"><span class="number">Table 14.2: </span><span class="name">OpenStack command-line clients prerequisites </span><a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.4.3.4">#</a></h6></div><div class="table-contents"><table class="table" summary="OpenStack command-line clients prerequisites" border="1"><colgroup><col class="c1" /><col class="c2" /></colgroup><thead><tr><th>
                  <p>Prerequisite</p>
                </th><th>
                  <p>Description</p>
                </th></tr></thead><tbody><tr><td>
                  <p>Python 2.7 or later</p>
                </td><td>
                  <p>Supports Python 2.7, 3.4, and 3.5.</p>
                </td></tr><tr><td>
                  <p>setuptools package</p>
                </td><td>
                  <p>Installed by default on Mac OS X.</p>
                  <p>Many Linux distributions provide packages to make setuptools
easy to install. Search your package manager for setuptools to
find an installation package.
If you cannot find one, download the setuptools package
directly from <a class="link" href="https://pypi.python.org/pypi/setuptools" target="_blank">https://pypi.python.org/pypi/setuptools</a>.</p>
                  <p>The recommended way to install setuptools on Microsoft Windows
is to follow the documentation provided on the setuptools website
(<a class="link" href="https://pypi.python.org/pypi/setuptools" target="_blank">https://pypi.python.org/pypi/setuptools</a>).</p>
                  <p>Another option is to use the unofficial binary installer
maintained by Christoph Gohlke
(<a class="link" href="http://www.lfd.uci.edu/~gohlke/pythonlibs/#setuptools" target="_blank">http://www.lfd.uci.edu/~gohlke/pythonlibs/#setuptools</a>).</p>
                </td></tr><tr><td>
                  <p>pip package</p>
                </td><td>
                  <p>To install the clients on a Linux, Mac OS X, or Microsoft Windows
system, use pip. It is easy to use, ensures that you get the latest
version of the clients from the <a class="link" href="https://pypi.python.org/" target="_blank">Python Package Index</a>, and lets you update or remove
the packages later on.</p>
                  <p>Since the installation process compiles source files, this requires
the related Python development package for your operating system
and distribution.</p>
                  <p>Install pip through the package manager for your system:</p>
                  <p>
                    <span class="bold"><strong>MacOS</strong></span>
                  </p>
                  <div class="verbatim-wrap"><pre class="screen"># easy_install pip</pre></div>
                  <p>
                    <span class="bold"><strong>Microsoft Windows</strong></span>
                  </p>
                  <p>Ensure that the <code class="literal">C:\Python27\Scripts</code> directory is defined in the
<code class="literal">PATH</code> environment variable, and use the <code class="literal">easy_install</code> command
from the setuptools package:</p>
                  <div class="verbatim-wrap"><pre class="screen">C:\&gt;easy_install pip</pre></div>
                  <p>Another option is to use the unofficial binary installer provided by
Christoph Gohlke (<a class="link" href="http://www.lfd.uci.edu/~gohlke/pythonlibs/#pip" target="_blank">http://www.lfd.uci.edu/~gohlke/pythonlibs/#pip</a>).</p>
                  <p>
                    <span class="bold"><strong>Ubuntu or Debian</strong></span>
                  </p>
                  <div class="verbatim-wrap"><pre class="screen"># apt install python-dev python-pip</pre></div>
                  <p>Note that extra dependencies may be required, per operating system,
depending on the package being installed, such as is the case with
Tempest.</p>
                  <p>
                    <span class="bold"><strong>Red Hat Enterprise Linux, CentOS, or Fedora</strong></span>
                  </p>
                  <p>A packaged version enables you to use yum to install the package:</p>
                  <div class="verbatim-wrap"><pre class="screen"># yum install python-devel python-pip</pre></div>
                  <p>There are also packaged versions of the clients available in
<a class="link" href="https://www.rdoproject.org/" target="_blank">RDO</a> that enable yum to install
the clients as described in <a class="xref" href="osadm-os-cli.html#installing-from-packages" title="14.2.2.2. Installing from packages">Section 14.2.2.2, “Installing from packages”</a>.</p>
                  <p>
                    <span class="bold"><strong>SUSE Linux Enterprise Server</strong></span>
                  </p>
                  <p>A packaged version available in <a class="link" href="https://build.opensuse.org/package/show?package=python-pip&amp;project=Cloud:OpenStack:Master" target="_blank">the Open Build Service</a>
enables you to use YaST or zypper to install the package.</p>
                  <p>First, add the Open Build Service repository:</p>
                  <div class="verbatim-wrap"><pre class="screen"># zypper addrepo -f obs://Cloud:OpenStack:Mitaka/SLE_12_SP1 Mitaka</pre></div>
                  <p>Then install pip and use it to manage client installation:</p>
                  <div class="verbatim-wrap"><pre class="screen"># zypper install python-devel python-pip</pre></div>
                  <p>There are also packaged versions of the clients available that enable
zypper to install the clients as described in <a class="xref" href="osadm-os-cli.html#installing-from-packages" title="14.2.2.2. Installing from packages">Section 14.2.2.2, “Installing from packages”</a>.</p>
                  <p>
                    <span class="bold"><strong>openSUSE</strong></span>
                  </p>
                  <p>You can install pip and use it to manage client installation:</p>
                  <div class="verbatim-wrap"><pre class="screen"># zypper install python-devel python-pip</pre></div>
                  <p>There are also packaged versions of the clients available that enable
zypper to install the clients as described in <a class="xref" href="osadm-os-cli.html#installing-from-packages" title="14.2.2.2. Installing from packages">Section 14.2.2.2, “Installing from packages”</a>.</p>
                </td></tr></tbody></table></div></div></div><div class="sect2 " id="id-1.4.16.4.4"><div class="titlepage"><div><div><h3 class="title"><span class="number">14.2.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Install the OpenStack client</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.4.4">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>The following example shows the command for installing the OpenStack client
with <code class="literal">pip</code>, which supports multiple services.</p><div class="verbatim-wrap"><pre class="screen"># pip install python-openstackclient</pre></div><p>The following individual clients are deprecated in favor of a common client.
Instead of installing and learning all these clients, we recommend
installing and using the OpenStack client. You may need to install an
individual project's client because coverage is not yet sufficient in the
OpenStack client. If you need to install an individual client's project,
replace the <code class="literal">PROJECT</code> name in this <code class="literal">pip install</code> command using the
list below.</p><div class="verbatim-wrap"><pre class="screen"># pip install python-PROJECTclient</pre></div><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p><code class="literal">barbican</code> - Key Manager Service API</p></li><li class="listitem "><p><code class="literal">ceilometer</code> - Telemetry API</p></li><li class="listitem "><p><code class="literal">cinder</code> - Block Storage API and extensions</p></li><li class="listitem "><p><code class="literal">cloudkitty</code> - Rating service API</p></li><li class="listitem "><p><code class="literal">designate</code> - DNS service API</p></li><li class="listitem "><p><code class="literal">fuel</code> - Deployment service API</p></li><li class="listitem "><p><code class="literal">glance</code> - Image service API</p></li><li class="listitem "><p><code class="literal">gnocchi</code> - Telemetry API v3</p></li><li class="listitem "><p><code class="literal">heat</code> - Orchestration API</p></li><li class="listitem "><p><code class="literal">magnum</code> - Container Infrastructure Management service API</p></li><li class="listitem "><p><code class="literal">manila</code> - Shared file systems API</p></li><li class="listitem "><p><code class="literal">mistral</code> - Workflow service API</p></li><li class="listitem "><p><code class="literal">monasca</code> - Monitoring API</p></li><li class="listitem "><p><code class="literal">murano</code> - Application catalog API</p></li><li class="listitem "><p><code class="literal">neutron</code> - Networking API</p></li><li class="listitem "><p><code class="literal">nova</code> - Compute API and extensions</p></li><li class="listitem "><p><code class="literal">sahara</code> - Data Processing API</p></li><li class="listitem "><p><code class="literal">senlin</code> - Clustering service API</p></li><li class="listitem "><p><code class="literal">swift</code> - Object Storage API</p></li><li class="listitem "><p><code class="literal">trove</code> - Database service API</p></li></ul></div><div class="sect3 " id="id-1.4.16.4.4.7"><div class="titlepage"><div><div><h4 class="title"><span class="number">14.2.2.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Installing with pip</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.4.4.7">#</a></h4><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>Use pip to install the OpenStack clients on a Linux, Mac OS X, or
Microsoft Windows system. It is easy to use and ensures that you get the
latest version of the client from the <a class="link" href="https://pypi.python.org/pypi" target="_blank">Python Package
Index</a>. Also, pip enables you to update
or remove a package.</p><p>Install each client separately by using the following command:</p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>For Mac OS X or Linux:</p><div class="verbatim-wrap"><pre class="screen"># pip install python-PROJECTclient</pre></div></li><li class="listitem "><p>For Microsoft Windows:</p><div class="verbatim-wrap"><pre class="screen">C:\&gt;pip install python-PROJECTclient</pre></div></li></ul></div></div><div class="sect3 " id="installing-from-packages"><div class="titlepage"><div><div><h4 class="title"><span class="number">14.2.2.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Installing from packages</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#installing-from-packages">#</a></h4><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span>installing-from-packages</li></ul></div></div></div></div><p>RDO, openSUSE, SUSE Linux Enterprise, Debian, and Ubuntu have client packages
that can be installed without <code class="literal">pip</code>.</p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>On Red Hat Enterprise Linux, CentOS, or Fedora, use <code class="literal">yum</code> to install
the clients from the packaged versions available in
<a class="link" href="https://www.rdoproject.org/" target="_blank">RDO</a>:</p><div class="verbatim-wrap"><pre class="screen"># yum install python-PROJECTclient</pre></div></li><li class="listitem "><p>For Ubuntu or Debian, use <code class="literal">apt-get</code> to install the clients from the
packaged versions:</p><div class="verbatim-wrap"><pre class="screen"># apt-get install python-PROJECTclient</pre></div></li><li class="listitem "><p>For openSUSE, use <code class="literal">zypper</code> to install the clients from the distribution
packages service:</p><div class="verbatim-wrap"><pre class="screen"># zypper install python-PROJECTclient</pre></div></li><li class="listitem "><p>For SUSE Linux Enterprise Server, use <code class="literal">zypper</code> to install the clients from
the distribution packages in the Open Build Service. First, add the Open
Build Service repository:</p><div class="verbatim-wrap"><pre class="screen"># zypper addrepo -f obs://Cloud:OpenStack:Mitaka/SLE_12_SP1 Mitaka</pre></div><p>Then you can install the packages:</p><div class="verbatim-wrap"><pre class="screen"># zypper install python-PROJECTclient</pre></div></li></ul></div></div></div><div class="sect2 " id="id-1.4.16.4.5"><div class="titlepage"><div><div><h3 class="title"><span class="number">14.2.3 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Upgrade or remove clients</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.4.5">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>To upgrade a client, add the <code class="literal">--upgrade</code> option to the
<code class="command">pip install</code> command:</p><div class="verbatim-wrap"><pre class="screen"># pip install --upgrade python-PROJECTclient</pre></div><p>To remove the client, run the <code class="command">pip uninstall</code> command:</p><div class="verbatim-wrap"><pre class="screen"># pip uninstall python-PROJECTclient</pre></div></div><div class="sect2 " id="id-1.4.16.4.6"><div class="titlepage"><div><div><h3 class="title"><span class="number">14.2.4 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">What's next</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.4.6">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>Before you can run client commands, you must create and source the
<code class="literal">PROJECT-openrc.sh</code> file to set environment variables. See
 <a class="xref" href="osadm-os-cli.html#sec-rcfile" title="14.4. Set environment variables using the OpenStack RC file">Section 14.4, “Set environment variables using the OpenStack RC file”</a>.</p></div></div><div class="sect1 " id="id-1.4.16.5"><div class="titlepage"><div><div><h2 class="title"><span class="number">14.3 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Discover the version number for a client</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.5">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>Run the following command to discover the version number for a client:</p><div class="verbatim-wrap"><pre class="screen">$ PROJECT --version</pre></div><p>For example, to see the version number for the <code class="literal">openstack</code> client,
run the following command:</p><div class="verbatim-wrap"><pre class="screen">$ openstack --version
openstack 3.2.0</pre></div></div><div class="sect1 " id="sec-rcfile"><div class="titlepage"><div><div><h2 class="title"><span class="number">14.4 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Set environment variables using the OpenStack RC file</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#sec-rcfile">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span>sec-rcfile</li></ul></div></div></div></div><p>To set the required environment variables for the OpenStack command-line
clients, you must create an environment file called an OpenStack rc
file, or <code class="literal">openrc.sh</code> file. If your OpenStack installation provides
it, you can download the file from the OpenStack Dashboard as an
administrative user or any other user. This project-specific environment
file contains the credentials that all OpenStack services use.</p><p>When you source the file, environment variables are set for your current
shell. The variables enable the OpenStack client commands to communicate
with the OpenStack services that run in the cloud.</p><div id="id-1.4.16.6.4" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note</h6><p>Defining environment variables using an environment file is not a
common practice on Microsoft Windows. Environment variables are
usually defined in the <span class="guimenu ">Advanced</span> › <span class="guimenu ">System Properties</span>
dialog box. One method for using these scripts as-is on Windows is
to install <a class="link" href="https://git-for-windows.github.io/" target="_blank">Git for Windows</a> and using Git Bash to source the environment
variables and to run all CLI commands.</p></div><div class="sect2 " id="id-1.4.16.6.5"><div class="titlepage"><div><div><h3 class="title"><span class="number">14.4.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Download and source the OpenStack RC file</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.6.5">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>Log in to the dashboard and from the drop-down list select the project
for which you want to download the OpenStack RC file.</p></li><li class="step "><p>On the <span class="guimenu ">Project</span> tab, open the <span class="guimenu ">Compute</span> tab and
click <span class="guimenu ">Access &amp; Security</span>.</p></li><li class="step "><p>On the <span class="guimenu ">API Access</span> tab, click <span class="guimenu ">Download OpenStack
RC File</span> and save the file. The filename will be of the form
<code class="literal">PROJECT-openrc.sh</code> where <code class="literal">PROJECT</code> is the name of the project for
which you downloaded the file.</p></li><li class="step "><p>Copy the <code class="literal">PROJECT-openrc.sh</code> file to the computer from which you
want to run OpenStack commands.</p><p>For example, copy the file to the computer from which you want to upload
an image with a <code class="literal">glance</code> client command.</p></li><li class="step "><p>On any shell from which you want to run OpenStack commands, source the
<code class="literal">PROJECT-openrc.sh</code> file for the respective project.</p><p>In the following example, the <code class="literal">demo-openrc.sh</code> file is sourced for
the demo project:</p><div class="verbatim-wrap"><pre class="screen">$ . demo-openrc.sh</pre></div></li><li class="step "><p>When you are prompted for an OpenStack password, enter the password for
the user who downloaded the <code class="literal">PROJECT-openrc.sh</code> file.</p></li></ol></div></div></div><div class="sect2 " id="id-1.4.16.6.6"><div class="titlepage"><div><div><h3 class="title"><span class="number">14.4.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Create and source the OpenStack RC file</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.6.6">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>Alternatively, you can create the <code class="literal">PROJECT-openrc.sh</code> file from
scratch, if you cannot download the file from the dashboard.</p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>In a text editor, create a file named <code class="literal">PROJECT-openrc.sh</code> and add
the following authentication information:</p><div class="verbatim-wrap highlight bash"><pre class="screen">export OS_USERNAME=username
export OS_PASSWORD=password
export OS_TENANT_NAME=projectName
export OS_AUTH_URL=https://identityHost:portNumber/v2.0
# The following lines can be omitted
export OS_TENANT_ID=tenantIDString
export OS_REGION_NAME=regionName
export OS_CACERT=/path/to/cacertFile</pre></div><div id="id-1.4.16.6.6.3.1.3" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg" /><h6>Warning</h6><p>Saving <code class="literal">OS_PASSWORD</code> in plain text may bring a security risk.
You should protect the file or not save <code class="literal">OS_PASSWORD</code> into
the file in the production environment.</p></div></li><li class="step "><p>On any shell from which you want to run OpenStack commands, source the
<code class="literal">PROJECT-openrc.sh</code> file for the respective project. In this
example, you source the <code class="literal">admin-openrc.sh</code> file for the admin
project:</p><div class="verbatim-wrap"><pre class="screen">$ . admin-openrc.sh</pre></div></li></ol></div></div><div id="id-1.4.16.6.6.4" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note</h6><p>You are not prompted for the password with this method. The password
lives in clear text format in the <code class="literal">PROJECT-openrc.sh</code> file.
Restrict the permissions on this file to avoid security problems.
You can also remove the <code class="literal">OS_PASSWORD</code> variable from the file, and
use the <code class="literal">--password</code> parameter with OpenStack client commands
instead.</p></div><div id="id-1.4.16.6.6.5" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note</h6><p>You must set the <code class="literal">OS_CACERT</code> environment variable when using the
https protocol in the <code class="literal">OS_AUTH_URL</code> environment setting because
the verification process for the TLS (HTTPS) server certificate uses
the one indicated in the environment. This certificate will be used
when verifying the TLS (HTTPS) server certificate.</p></div></div><div class="sect2 " id="id-1.4.16.6.7"><div class="titlepage"><div><div><h3 class="title"><span class="number">14.4.3 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Override environment variable values</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.6.7">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>When you run OpenStack client commands, you can override some
environment variable settings by using the options that are listed at
the end of the <code class="literal">help</code> output of the various client commands. For
example, you can override the <code class="literal">OS_PASSWORD</code> setting in the
<code class="literal">PROJECT-openrc.sh</code> file by specifying a password on a
<code class="command">openstack</code> command, as follows:</p><div class="verbatim-wrap"><pre class="screen">$ openstack --os-password PASSWORD server list</pre></div><p>Where <code class="literal">PASSWORD</code> is your password.</p><p>A user specifies their username and password credentials to interact
with OpenStack, using any client command. These credentials can be
specified using various mechanisms, namely, the environment variable
or command-line argument. It is not safe to specify the password using
either of these methods.</p><p>For example, when you specify your password using the command-line
client with the <code class="literal">--os-password</code> argument, anyone with access to your
computer can view it in plain text with the <code class="literal">ps</code> field.</p><p>To avoid storing the password in plain text, you can prompt for the
OpenStack password interactively.</p></div></div><div class="sect1 " id="id-1.4.16.7"><div class="titlepage"><div><div><h2 class="title"><span class="number">14.5 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Manage projects, users, and roles</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.7">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>As an administrator, you manage projects, users, and
roles. Projects are organizational units in the cloud to which
you can assign users. Projects are also known as <span class="emphasis"><em>projects</em></span> or
<span class="emphasis"><em>accounts</em></span>. Users can be members of one or more projects. Roles
define which actions users can perform. You assign roles to
user-project pairs.</p><p>You can define actions for OpenStack service roles in the
<code class="literal">/etc/PROJECT/policy.json</code> files. For example, define actions for
Compute service roles in the <code class="literal">/etc/nova/policy.json</code> file.</p><p>You can manage projects, users, and roles independently from each other.</p><p>During cloud set up, the operator defines at least one project, user,
and role.</p><p>You can add, update, and delete projects and users, assign users to
one or more projects, and change or remove the assignment. To enable or
temporarily disable a project or user, update that project or user.
You can also change quotas at the project level.</p><p>Before you can delete a user account, you must remove the user account
from its primary project.</p><p>Before you can run client commands, you must download and
source an OpenStack RC file. See <a class="link" href="http://docs.openstack.org/user-guide/common/cli-set-environment-variables-using-openstack-rc.html#download-and-source-the-openstack-rc-file" target="_blank">Download and source the OpenStack RC file</a>.</p><div class="sect2 " id="id-1.4.16.7.9"><div class="titlepage"><div><div><h3 class="title"><span class="number">14.5.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Projects</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.7.9">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>A project is a group of zero or more users. In Compute, a project owns
virtual machines. In Object Storage, a project owns containers. Users
can be associated with more than one project. Each project and user
pairing can have a role associated with it.</p><div class="sect3 " id="id-1.4.16.7.9.3"><div class="titlepage"><div><div><h4 class="title"><span class="number">14.5.1.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">List projects</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.7.9.3">#</a></h4><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>List all projects with their ID, name, and whether they are
enabled or disabled:</p><div class="verbatim-wrap"><pre class="screen">$ openstack project list
+----------------------------------+--------------------+
| ID                               | Name               |
+----------------------------------+--------------------+
| f7ac731cc11f40efbc03a9f9e1d1d21f | admin              |
| c150ab41f0d9443f8874e32e725a4cc8 | alt_demo           |
| a9debfe41a6d4d09a677da737b907d5e | demo               |
| 9208739195a34c628c58c95d157917d7 | invisible_to_admin |
| 3943a53dc92a49b2827fae94363851e1 | service            |
| 80cab5e1f02045abad92a2864cfd76cb | test_project       |
+----------------------------------+--------------------+</pre></div></div><div class="sect3 " id="id-1.4.16.7.9.4"><div class="titlepage"><div><div><h4 class="title"><span class="number">14.5.1.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Create a project</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.7.9.4">#</a></h4><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>Create a project named <code class="literal">new-project</code>:</p><div class="verbatim-wrap"><pre class="screen">$ openstack project create --description 'my new project' new-project \
  --domain default
+-------------+----------------------------------+
| Field       | Value                            |
+-------------+----------------------------------+
| description | my new project                   |
| domain_id   | e601210181f54843b51b3edff41d4980 |
| enabled     | True                             |
| id          | 1a4a0618b306462c9830f876b0bd6af2 |
| is_domain   | False                            |
| name        | new-project                      |
| parent_id   | e601210181f54843b51b3edff41d4980 |
+-------------+----------------------------------+</pre></div></div><div class="sect3 " id="id-1.4.16.7.9.5"><div class="titlepage"><div><div><h4 class="title"><span class="number">14.5.1.3 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Update a project</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.7.9.5">#</a></h4><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>Specify the project ID to update a project. You can update the name,
description, and enabled status of a project.</p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>To temporarily disable a project:</p><div class="verbatim-wrap"><pre class="screen">$ openstack project set PROJECT_ID --disable</pre></div></li><li class="listitem "><p>To enable a disabled project:</p><div class="verbatim-wrap"><pre class="screen">$ openstack project set PROJECT_ID --enable</pre></div></li><li class="listitem "><p>To update the name of a project:</p><div class="verbatim-wrap"><pre class="screen">$ openstack project set PROJECT_ID --name project-new</pre></div></li><li class="listitem "><p>To verify your changes, show information for the updated project:</p><div class="verbatim-wrap"><pre class="screen">$ openstack project show PROJECT_ID
+-------------+----------------------------------+
| Field       | Value                            |
+-------------+----------------------------------+
| description | my new project                   |
| enabled     | True                             |
| id          | 0b0b995694234521bf93c792ed44247f |
| name        | new-project                      |
| properties  |                                  |
+-------------+----------------------------------+</pre></div></li></ul></div></div><div class="sect3 " id="id-1.4.16.7.9.6"><div class="titlepage"><div><div><h4 class="title"><span class="number">14.5.1.4 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Delete a project</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.7.9.6">#</a></h4><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>Specify the project ID to delete a project:</p><div class="verbatim-wrap"><pre class="screen">$ openstack project delete PROJECT_ID</pre></div></div></div><div class="sect2 " id="id-1.4.16.7.10"><div class="titlepage"><div><div><h3 class="title"><span class="number">14.5.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Users</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.7.10">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><div class="sect3 " id="id-1.4.16.7.10.2"><div class="titlepage"><div><div><h4 class="title"><span class="number">14.5.2.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">List users</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.7.10.2">#</a></h4><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>List all users:</p><div class="verbatim-wrap"><pre class="screen">$ openstack user list
+----------------------------------+----------+
| ID                               | Name     |
+----------------------------------+----------+
| 352b37f5c89144d4ad0534139266d51f | admin    |
| 86c0de739bcb4802b8dc786921355813 | demo     |
| 32ec34aae8ea432e8af560a1cec0e881 | glance   |
| 7047fcb7908e420cb36e13bbd72c972c | nova     |
+----------------------------------+----------+</pre></div></div><div class="sect3 " id="id-1.4.16.7.10.3"><div class="titlepage"><div><div><h4 class="title"><span class="number">14.5.2.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Create a user</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.7.10.3">#</a></h4><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>To create a user, you must specify a name. Optionally, you can
specify a project ID, password, and email address. It is recommended
that you include the project ID and password because the user cannot
log in to the dashboard without this information.</p><p>Create the <code class="literal">new-user</code> user:</p><div class="verbatim-wrap"><pre class="screen">$ openstack user create --project new-project --password PASSWORD new-user
+------------+----------------------------------+
| Field      | Value                            |
+------------+----------------------------------+
| email      | None                             |
| enabled    | True                             |
| id         | 6322872d9c7e445dbbb49c1f9ca28adc |
| name       | new-user                         |
| project_id | 0b0b995694234521bf93c792ed44247f |
| username   | new-user                         |
+------------+----------------------------------+</pre></div></div><div class="sect3 " id="id-1.4.16.7.10.4"><div class="titlepage"><div><div><h4 class="title"><span class="number">14.5.2.3 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Update a user</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.7.10.4">#</a></h4><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>You can update the name, email address, and enabled status for a user.</p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>To temporarily disable a user account:</p><div class="verbatim-wrap"><pre class="screen">$ openstack user set USER_NAME --disable</pre></div><p>If you disable a user account, the user cannot log in to the
dashboard. However, data for the user account is maintained, so you
can enable the user at any time.</p></li><li class="listitem "><p>To enable a disabled user account:</p><div class="verbatim-wrap"><pre class="screen">$ openstack user set USER_NAME --enable</pre></div></li><li class="listitem "><p>To change the name and description for a user account:</p><div class="verbatim-wrap"><pre class="screen">$ openstack user set USER_NAME --name user-new --email new-user@example.com
User has been updated.</pre></div></li></ul></div></div><div class="sect3 " id="id-1.4.16.7.10.5"><div class="titlepage"><div><div><h4 class="title"><span class="number">14.5.2.4 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Delete a user</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.7.10.5">#</a></h4><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>Delete a specified user account:</p><div class="verbatim-wrap"><pre class="screen">$ openstack user delete USER_NAME</pre></div></div></div><div class="sect2 " id="id-1.4.16.7.11"><div class="titlepage"><div><div><h3 class="title"><span class="number">14.5.3 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Roles and role assignments</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.7.11">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><div class="sect3 " id="id-1.4.16.7.11.2"><div class="titlepage"><div><div><h4 class="title"><span class="number">14.5.3.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">List available roles</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.7.11.2">#</a></h4><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>List the available roles:</p><div class="verbatim-wrap"><pre class="screen">$ openstack role list
+----------------------------------+---------------+
| ID                               | Name          |
+----------------------------------+---------------+
| 71ccc37d41c8491c975ae72676db687f | Member        |
| 149f50a1fe684bfa88dae76a48d26ef7 | ResellerAdmin |
| 9fe2ff9ee4384b1894a90878d3e92bab | _member_      |
| 6ecf391421604da985db2f141e46a7c8 | admin         |
| deb4fffd123c4d02a907c2c74559dccf | anotherrole   |
+----------------------------------+---------------+</pre></div></div><div class="sect3 " id="id-1.4.16.7.11.3"><div class="titlepage"><div><div><h4 class="title"><span class="number">14.5.3.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Create a role</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.7.11.3">#</a></h4><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>Users can be members of multiple projects. To assign users to multiple
projects, define a role and assign that role to a user-project pair.</p><p>Create the <code class="literal">new-role</code> role:</p><div class="verbatim-wrap"><pre class="screen">$ openstack role create new-role
+-----------+----------------------------------+
| Field     | Value                            |
+-----------+----------------------------------+
| domain_id | None                             |
| id        | a34425c884c74c8881496dc2c2e84ffc |
| name      | new-role                         |
+-----------+----------------------------------+</pre></div></div><div class="sect3 " id="id-1.4.16.7.11.4"><div class="titlepage"><div><div><h4 class="title"><span class="number">14.5.3.3 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Assign a role</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.7.11.4">#</a></h4><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>To assign a user to a project, you must assign the role to a
user-project pair. To do this, you need the user, role, and project
IDs.</p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>List users and note the user ID you want to assign to the role:</p><div class="verbatim-wrap"><pre class="screen">$ openstack user list
+----------------------------------+----------+
| ID                               | Name     |
+----------------------------------+----------+
| 6ab5800949644c3e8fb86aaeab8275c8 | admin    |
| dfc484b9094f4390b9c51aba49a6df34 | demo     |
| 55389ff02f5e40cf85a053cc1cacb20c | alt_demo |
| bc52bcfd882f4d388485451c4a29f8e0 | nova     |
| 255388ffa6e54ec991f584cb03085e77 | glance   |
| 48b6e6dec364428da89ba67b654fac03 | cinder   |
| c094dd5a8e1d4010832c249d39541316 | neutron  |
| 6322872d9c7e445dbbb49c1f9ca28adc | new-user |
+----------------------------------+----------+</pre></div></li><li class="step "><p>List role IDs and note the role ID you want to assign:</p><div class="verbatim-wrap"><pre class="screen">$ openstack role list
+----------------------------------+---------------+
| ID                               | Name          |
+----------------------------------+---------------+
| 71ccc37d41c8491c975ae72676db687f | Member        |
| 149f50a1fe684bfa88dae76a48d26ef7 | ResellerAdmin |
| 9fe2ff9ee4384b1894a90878d3e92bab | _member_      |
| 6ecf391421604da985db2f141e46a7c8 | admin         |
| deb4fffd123c4d02a907c2c74559dccf | anotherrole   |
| bef1f95537914b1295da6aa038ef4de6 | new-role      |
+----------------------------------+---------------+</pre></div></li><li class="step "><p>List projects and note the project ID you want to assign to the role:</p><div class="verbatim-wrap"><pre class="screen">$ openstack project list
+----------------------------------+--------------------+
| ID                               | Name               |
+----------------------------------+--------------------+
| 0b0b995694234521bf93c792ed44247f | new-project        |
| 29c09e68e6f741afa952a837e29c700b | admin              |
| 3a7ab11d3be74d3c9df3ede538840966 | invisible_to_admin |
| 71a2c23bab884c609774c2db6fcee3d0 | service            |
| 87e48a8394e34d13afc2646bc85a0d8c | alt_demo           |
| fef7ae86615f4bf5a37c1196d09bcb95 | demo               |
+----------------------------------+--------------------+</pre></div></li><li class="step "><p>Assign a role to a user-project pair:</p><div class="verbatim-wrap"><pre class="screen">$ openstack role add --user USER_NAME --project TENANT_ID ROLE_NAME</pre></div><p>For example, assign the <code class="literal">new-role</code> role to the <code class="literal">demo</code> and
<code class="literal">test-project</code> pair:</p><div class="verbatim-wrap"><pre class="screen">$ openstack role add --user demo --project test-project new-role</pre></div></li><li class="step "><p>Verify the role assignment:</p><div class="verbatim-wrap"><pre class="screen">$ openstack role list --user USER_NAME --project TENANT_ID
Listing assignments using role list is deprecated as of the Newton release. Use role assignment list --user &lt;user-name&gt; --project &lt;project-name&gt; --names instead.
+----------------------------------+-------------+---------+------+
| ID                               | Name        | Project | User |
+----------------------------------+-------------+---------+------+
| a34425c884c74c8881496dc2c2e84ffc | new-role    | demo    | demo |
| 04a7e3192c0745a2b1e3d2baf5a3ee0f | Member      | demo    | demo |
| 62bcf3e27eef4f648eb72d1f9920f6e5 | anotherrole | demo    | demo |
+----------------------------------+-------------+---------+------+</pre></div></li></ol></div></div></div><div class="sect3 " id="id-1.4.16.7.11.5"><div class="titlepage"><div><div><h4 class="title"><span class="number">14.5.3.4 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">View role details</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.7.11.5">#</a></h4><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>View details for a specified role:</p><div class="verbatim-wrap"><pre class="screen">$ openstack role show ROLE_NAME
+-----------+----------------------------------+
| Field     | Value                            |
+-----------+----------------------------------+
| domain_id | None                             |
| id        | a34425c884c74c8881496dc2c2e84ffc |
| name      | new-role                         |
+-----------+----------------------------------+</pre></div></div><div class="sect3 " id="id-1.4.16.7.11.6"><div class="titlepage"><div><div><h4 class="title"><span class="number">14.5.3.5 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Remove a role</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.7.11.6">#</a></h4><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>Remove a role from a user-project pair:</p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>Run the <code class="command">openstack role remove</code> command:</p><div class="verbatim-wrap"><pre class="screen">$ openstack role remove --user USER_NAME --project TENANT_ID ROLE_NAME</pre></div></li><li class="step "><p>Verify the role removal:</p><div class="verbatim-wrap"><pre class="screen">$ openstack role list --user USER_NAME --project TENANT_ID</pre></div><p>If the role was removed, the command output omits the removed role.</p></li></ol></div></div></div></div></div><div class="sect1 " id="osadm-security-group"><div class="titlepage"><div><div><h2 class="title"><span class="number">14.6 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Manage project security</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#osadm-security-group">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span>osadm-security-group</li></ul></div></div></div></div><p>Security groups are sets of IP filter rules that are applied to all
project instances, which define networking access to the instance. Group
rules are project specific; project members can edit the default rules
for their group and add new rule sets.</p><p>All projects have a <code class="literal">default</code> security group which is applied to any
instance that has no other defined security group. Unless you change the
default, this security group denies all incoming traffic and allows only
outgoing traffic to your instance.</p><p>You can use the <code class="literal">allow_same_net_traffic</code> option in the
<code class="literal">/etc/nova/nova.conf</code> file to globally control whether the rules apply
to hosts which share a network.</p><p>If set to:</p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p><code class="literal">True</code> (default), hosts on the same subnet are not filtered and are
allowed to pass all types of traffic between them. On a flat network,
this allows all instances from all projects unfiltered communication.
With VLAN networking, this allows access between instances within the
same project. You can also simulate this setting by configuring the
default security group to allow all traffic from the subnet.</p></li><li class="listitem "><p><code class="literal">False</code>, security groups are enforced for all connections.</p></li></ul></div><p>Additionally, the number of maximum rules per security group is
controlled by the <code class="literal">security_group_rules</code> and the number of allowed
security groups per project is controlled by the <code class="literal">security_groups</code>
quota (see <a class="xref" href="osadm-os-cli.html#manage-quotas" title="14.13. Manage quotas">Section 14.13, “Manage quotas”</a>).</p><div class="sect2 " id="id-1.4.16.8.8"><div class="titlepage"><div><div><h3 class="title"><span class="number">14.6.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">List and view current security groups</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.8.8">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>From the command-line you can get a list of security groups for the
project, using the <code class="command">openstack</code> and <code class="command">nova</code> commands:</p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>Ensure your system variables are set for the user and project for
which you are checking security group rules. For example:</p><div class="verbatim-wrap"><pre class="screen">export OS_USERNAME=demo00
export OS_TENANT_NAME=tenant01</pre></div></li><li class="step "><p>Output security groups, as follows:</p><div class="verbatim-wrap"><pre class="screen">$ openstack security group list
+--------------------------------------+---------+-------------+
| Id                                   | Name    | Description |
+--------------------------------------+---------+-------------+
| 73580272-d8fa-4927-bd55-c85e43bc4877 | default | default     |
| 6777138a-deb7-4f10-8236-6400e7aff5b0 | open    | all ports   |
+--------------------------------------+---------+-------------+</pre></div></li><li class="step "><p>View the details of a group, as follows:</p><div class="verbatim-wrap"><pre class="screen">$ openstack security group rule list GROUPNAME</pre></div><p>For example:</p><div class="verbatim-wrap"><pre class="screen">$ openstack security group rule list open
+--------------------------------------+-------------+-----------+-----------------+-----------------------+
| ID                                   | IP Protocol | IP Range  | Port Range      | Remote Security Group |
+--------------------------------------+-------------+-----------+-----------------+-----------------------+
| 353d0611-3f67-4848-8222-a92adbdb5d3a | udp         | 0.0.0.0/0 | 1:65535         | None                  |
| 63536865-e5b6-4df1-bac5-ca6d97d8f54d | tcp         | 0.0.0.0/0 | 1:65535         | None                  |
+--------------------------------------+-------------+-----------+-----------------+-----------------------+</pre></div><p>These rules are allow type rules as the default is deny. The first
column is the IP protocol (one of icmp, tcp, or udp). The second and
third columns specify the affected port range. The third column
specifies the IP range in CIDR format. This example shows the full
port range for all protocols allowed from all IPs.</p></li></ol></div></div></div><div class="sect2 " id="id-1.4.16.8.9"><div class="titlepage"><div><div><h3 class="title"><span class="number">14.6.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Create a security group</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.8.9">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>When adding a new security group, you should pick a descriptive but
brief name. This name shows up in brief descriptions of the instances
that use it where the longer description field often does not. For
example, seeing that an instance is using security group "http" is much
easier to understand than "bobs_group" or "secgrp1".</p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>Ensure your system variables are set for the user and project for
which you are creating security group rules.</p></li><li class="step "><p>Add the new security group, as follows:</p><div class="verbatim-wrap"><pre class="screen">$ openstack security group create GroupName --description Description</pre></div><p>For example:</p><div class="verbatim-wrap"><pre class="screen">$ openstack security group create global_http --description "Allows Web traffic anywhere on the Internet."
+-----------------+--------------------------------------------------------------------------------------------------------------------------+
| Field           | Value                                                                                                                    |
+-----------------+--------------------------------------------------------------------------------------------------------------------------+
| created_at      | 2016-11-03T13:50:53Z                                                                                                     |
| description     | Allows Web traffic anywhere on the Internet.                                                                             |
| headers         |                                                                                                                          |
| id              | c0b92b20-4575-432a-b4a9-eaf2ad53f696                                                                                     |
| name            | global_http                                                                                                              |
| project_id      | 5669caad86a04256994cdf755df4d3c1                                                                                         |
| project_id      | 5669caad86a04256994cdf755df4d3c1                                                                                         |
| revision_number | 1                                                                                                                        |
| rules           | created_at='2016-11-03T13:50:53Z', direction='egress', ethertype='IPv4', id="4d8cec94-e0ee-4c20-9f56-8fb67c21e4df",      |
|                 | project_id='5669caad86a04256994cdf755df4d3c1', revision_number='1', updated_at='2016-11-03T13:50:53Z'                    |
|                 | created_at='2016-11-03T13:50:53Z', direction='egress', ethertype='IPv6', id="31be2ad1-be14-4aef-9492-ecebede2cf12",      |
|                 | project_id='5669caad86a04256994cdf755df4d3c1', revision_number='1', updated_at='2016-11-03T13:50:53Z'                    |
| updated_at      | 2016-11-03T13:50:53Z                                                                                                     |
+-----------------+--------------------------------------------------------------------------------------------------------------------------+</pre></div></li><li class="step "><p>Add a new group rule, as follows:</p><div class="verbatim-wrap"><pre class="screen">$ openstack security group rule create SEC_GROUP_NAME --protocol PROTOCOL --dst-port FROM_PORT:TO_PORT --remote-ip CIDR</pre></div><p>The arguments are positional, and the <code class="literal">from-port</code> and <code class="literal">to-port</code>
arguments specify the local port range connections are allowed to
access, not the source and destination ports of the connection. For
example:</p><div class="verbatim-wrap"><pre class="screen">$ openstack security group rule create global_http --protocol tcp --dst-port 80:80 --remote-ip 0.0.0.0/0
+-------------------+--------------------------------------+
| Field             | Value                                |
+-------------------+--------------------------------------+
| created_at        | 2016-11-06T14:02:00Z                 |
| description       |                                      |
| direction         | ingress                              |
| ethertype         | IPv4                                 |
| headers           |                                      |
| id                | 2ba06233-d5c8-43eb-93a9-8eaa94bc9eb5 |
| port_range_max    | 80                                   |
| port_range_min    | 80                                   |
| project_id        | 5669caad86a04256994cdf755df4d3c1     |
| project_id        | 5669caad86a04256994cdf755df4d3c1     |
| protocol          | tcp                                  |
| remote_group_id   | None                                 |
| remote_ip_prefix  | 0.0.0.0/0                            |
| revision_number   | 1                                    |
| security_group_id | c0b92b20-4575-432a-b4a9-eaf2ad53f696 |
| updated_at        | 2016-11-06T14:02:00Z                 |
+-------------------+--------------------------------------+</pre></div><p>You can create complex rule sets by creating additional rules. For
example, if you want to pass both HTTP and HTTPS traffic, run:</p><div class="verbatim-wrap"><pre class="screen">$ openstack security group rule create global_http --protocol tcp --dst-port 443:443 --remote-ip 0.0.0.0/0
+-------------------+--------------------------------------+
| Field             | Value                                |
+-------------------+--------------------------------------+
| created_at        | 2016-11-06T14:09:20Z                 |
| description       |                                      |
| direction         | ingress                              |
| ethertype         | IPv4                                 |
| headers           |                                      |
| id                | 821c3ef6-9b21-426b-be5b-c8a94c2a839c |
| port_range_max    | 443                                  |
| port_range_min    | 443                                  |
| project_id        | 5669caad86a04256994cdf755df4d3c1     |
| project_id        | 5669caad86a04256994cdf755df4d3c1     |
| protocol          | tcp                                  |
| remote_group_id   | None                                 |
| remote_ip_prefix  | 0.0.0.0/0                            |
| revision_number   | 1                                    |
| security_group_id | c0b92b20-4575-432a-b4a9-eaf2ad53f696 |
| updated_at        | 2016-11-06T14:09:20Z                 |
+-------------------+--------------------------------------+</pre></div><p>Despite only outputting the newly added rule, this operation is
additive (both rules are created and enforced).</p></li><li class="step "><p>View all rules for the new security group, as follows:</p><div class="verbatim-wrap"><pre class="screen">$ openstack security group rule list global_http
+--------------------------------------+-------------+-----------+-----------------+-----------------------+
| ID                                   | IP Protocol | IP Range  | Port Range      | Remote Security Group |
+--------------------------------------+-------------+-----------+-----------------+-----------------------+
| 353d0611-3f67-4848-8222-a92adbdb5d3a | tcp         | 0.0.0.0/0 | 80:80           | None                  |
| 63536865-e5b6-4df1-bac5-ca6d97d8f54d | tcp         | 0.0.0.0/0 | 443:443         | None                  |
+--------------------------------------+-------------+-----------+-----------------+-----------------------+</pre></div></li></ol></div></div></div><div class="sect2 " id="id-1.4.16.8.10"><div class="titlepage"><div><div><h3 class="title"><span class="number">14.6.3 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Delete a security group</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.8.10">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>Ensure your system variables are set for the user and project for
which you are deleting a security group.</p></li><li class="step "><p>Delete the new security group, as follows:</p><div class="verbatim-wrap"><pre class="screen">$ openstack security group delete GROUPNAME</pre></div><p>For example:</p><div class="verbatim-wrap"><pre class="screen">$ openstack security group delete global_http</pre></div></li></ol></div></div></div><div class="sect2 " id="id-1.4.16.8.11"><div class="titlepage"><div><div><h3 class="title"><span class="number">14.6.4 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Create security group rules for a cluster of instances</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.8.11">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>Source Groups are a special, dynamic way of defining the CIDR of allowed
sources. The user specifies a Source Group (Security Group name), and
all the user's other Instances using the specified Source Group are
selected dynamically. This alleviates the need for individual rules to
allow each new member of the cluster.</p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>Make sure to set the system variables for the user and project for
which you are creating a security group rule.</p></li><li class="step "><p>Add a source group, as follows:</p><div class="verbatim-wrap"><pre class="screen">$ openstack security group rule create secGroupName --remote-group source-group \
    --protocol ip-protocol --dst-port from-port:to-port</pre></div><p>For example:</p><div class="verbatim-wrap"><pre class="screen">$ openstack security group rule create cluster --remote-group global_http \
    --protocol tcp --dst-port 22:22</pre></div><p>The <code class="literal">cluster</code> rule allows SSH access from any other instance that
uses the <code class="literal">global_http</code> group.</p></li></ol></div></div></div></div><div class="sect1 " id="id-1.4.16.9"><div class="titlepage"><div><div><h2 class="title"><span class="number">14.7 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Manage services</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.9">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><div class="sect2 " id="id-1.4.16.9.2"><div class="titlepage"><div><div><h3 class="title"><span class="number">14.7.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Create and manage services and service users</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.9.2">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>The Identity service enables you to define services, as
follows:</p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>Service catalog template. The Identity service acts
as a service catalog of endpoints for other OpenStack
services. The <code class="literal">/etc/keystone/default_catalog.templates</code>
template file defines the endpoints for services. When
the Identity service uses a template file back end,
any changes that are made to the endpoints are cached.
These changes do not persist when you restart the
service or reboot the machine.</p></li><li class="listitem "><p>An SQL back end for the catalog service. When the
Identity service is online, you must add the services
to the catalog. When you deploy a system for
production, use the SQL back end.</p></li></ul></div><p>The <code class="literal">auth_token</code> middleware supports the
use of either a shared secret or users for each
service.</p><p>To authenticate users against the Identity service, you must
create a service user for each OpenStack service. For example,
create a service user for the Compute, Block Storage, and
Networking services.</p><p>To configure the OpenStack services with service users,
create a project for all services and create users for each
service. Assign the admin role to each service user and
project pair. This role enables users to validate tokens and
authenticate and authorize other user requests.</p><div class="sect3 " id="id-1.4.16.9.2.7"><div class="titlepage"><div><div><h4 class="title"><span class="number">14.7.1.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Create a service</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.9.2.7">#</a></h4><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>List the available services:</p><div class="verbatim-wrap"><pre class="screen">$ openstack service list
+----------------------------------+----------+------------+
| ID                               | Name     | Type       |
+----------------------------------+----------+------------+
| 9816f1faaa7c4842b90fb4821cd09223 | cinder   | volume     |
| 1250f64f31e34dcd9a93d35a075ddbe1 | cinderv2 | volumev2   |
| da8cf9f8546b4a428c43d5e032fe4afc | ec2      | ec2        |
| 5f105eeb55924b7290c8675ad7e294ae | glance   | image      |
| dcaa566e912e4c0e900dc86804e3dde0 | keystone | identity   |
| 4a715cfbc3664e9ebf388534ff2be76a | nova     | compute    |
| 1aed4a6cf7274297ba4026cf5d5e96c5 | novav21  | computev21 |
| bed063c790634c979778551f66c8ede9 | neutron  | network    |
| 6feb2e0b98874d88bee221974770e372 |    s3    |    s3      |
+----------------------------------+----------+------------+</pre></div></li><li class="step "><p>To create a service, run this command:</p><div class="verbatim-wrap"><pre class="screen">$ openstack service create --name SERVICE_NAME --description SERVICE_DESCRIPTION SERVICE_TYPE</pre></div><div class="variablelist "><dl class="variablelist"><dt id="id-1.4.16.9.2.7.2.2.3.1"><span class="term ">The arguments are:</span></dt><dd><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p><code class="literal">service_name</code>: the unique name of the new service.</p></li><li class="listitem "><p><code class="literal">service_type</code>: the service type, such as <code class="literal">identity</code>,
<code class="literal">compute</code>, <code class="literal">network</code>, <code class="literal">image</code>, <code class="literal">object-store</code>
or any other service identifier string.</p></li><li class="listitem "><p><code class="literal">service_description</code>: the description of the service.</p></li></ul></div></dd></dl></div><p>For example, to create a <code class="literal">swift</code> service of type
<code class="literal">object-store</code>, run this command:</p><div class="verbatim-wrap"><pre class="screen">$ openstack service create --name swift --description "object store service" object-store
+-------------+----------------------------------+
| Field       | Value                            |
+-------------+----------------------------------+
| description | object store service             |
| enabled     | True                             |
| id          | 84c23f4b942c44c38b9c42c5e517cd9a |
| name        | swift                            |
| type        | object-store                     |
+-------------+----------------------------------+</pre></div></li><li class="step "><p>To get details for a service, run this command:</p><div class="verbatim-wrap"><pre class="screen">$ openstack service show SERVICE_TYPE|SERVICE_NAME|SERVICE_ID</pre></div><p>For example:</p><div class="verbatim-wrap"><pre class="screen">$ openstack service show object-store
+-------------+----------------------------------+
| Field       | Value                            |
+-------------+----------------------------------+
| description | object store service             |
| enabled     | True                             |
| id          | 84c23f4b942c44c38b9c42c5e517cd9a |
| name        | swift                            |
| type        | object-store                     |
+-------------+----------------------------------+</pre></div></li></ol></div></div></div><div class="sect3 " id="id-1.4.16.9.2.8"><div class="titlepage"><div><div><h4 class="title"><span class="number">14.7.1.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Create service users</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.9.2.8">#</a></h4><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>Create a project for the service users.
Typically, this project is named <code class="literal">service</code>,
but choose any name you like:</p><div class="verbatim-wrap"><pre class="screen">$ openstack project create service --domain default
+-------------+----------------------------------+
| Field       | Value                            |
+-------------+----------------------------------+
| description | None                             |
| domain_id   | e601210181f54843b51b3edff41d4980 |
| enabled     | True                             |
| id          | 3e9f3f5399624b2db548d7f871bd5322 |
| is_domain   | False                            |
| name        | service                          |
| parent_id   | e601210181f54843b51b3edff41d4980 |
+-------------+----------------------------------+</pre></div></li><li class="step "><p>Create service users for the relevant services for your
deployment.</p></li><li class="step "><p>Assign the admin role to the user-project pair.</p><div class="verbatim-wrap"><pre class="screen">$ openstack role add --project service --user SERVICE_USER_NAME admin
+-------+----------------------------------+
| Field | Value                            |
+-------+----------------------------------+
| id    | 233109e756c1465292f31e7662b429b1 |
| name  | admin                            |
+-------+----------------------------------+</pre></div></li></ol></div></div></div><div class="sect3 " id="id-1.4.16.9.2.9"><div class="titlepage"><div><div><h4 class="title"><span class="number">14.7.1.3 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Delete a service</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.9.2.9">#</a></h4><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>To delete a specified service, specify its ID.</p><div class="verbatim-wrap"><pre class="screen">$ openstack service delete SERVICE_TYPE|SERVICE_NAME|SERVICE_ID</pre></div><p>For example:</p><div class="verbatim-wrap"><pre class="screen">$ openstack service delete object-store</pre></div></div></div><div class="sect2 " id="id-1.4.16.9.3"><div class="titlepage"><div><div><h3 class="title"><span class="number">14.7.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Manage Compute services</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.9.3">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>You can enable and disable Compute services. The following
examples disable and enable the <code class="literal">nova-compute</code> service.</p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>List the Compute services:</p><div class="verbatim-wrap"><pre class="screen">$ openstack compute service list
+----+--------------+------------+----------+---------+-------+--------------+
| ID | Binary       | Host       | Zone     | Status  | State | Updated At   |
+----+--------------+------------+----------+---------+-------+--------------+
|  4 | nova-        | controller | internal | enabled | up    | 2016-12-20T0 |
|    | consoleauth  |            |          |         |       | 0:44:48.0000 |
|    |              |            |          |         |       | 00           |
|  5 | nova-        | controller | internal | enabled | up    | 2016-12-20T0 |
|    | scheduler    |            |          |         |       | 0:44:48.0000 |
|    |              |            |          |         |       | 00           |
|  6 | nova-        | controller | internal | enabled | up    | 2016-12-20T0 |
|    | conductor    |            |          |         |       | 0:44:54.0000 |
|    |              |            |          |         |       | 00           |
|  9 | nova-compute | compute    | nova     | enabled | up    | 2016-10-21T0 |
|    |              |            |          |         |       | 2:35:03.0000 |
|    |              |            |          |         |       | 00           |
+----+--------------+------------+----------+---------+-------+--------------+</pre></div></li><li class="step "><p>Disable a nova service:</p><div class="verbatim-wrap"><pre class="screen">$ openstack compute service set --disable --disable-reason trial log nova nova-compute
+----------+--------------+----------+-------------------+
| Host     | Binary       | Status   | Disabled Reason   |
+----------+--------------+----------+-------------------+
| compute  | nova-compute | disabled | trial log         |
+----------+--------------+----------+-------------------+</pre></div></li><li class="step "><p>Check the service list:</p><div class="verbatim-wrap"><pre class="screen">$ openstack compute service list
+----+--------------+------------+----------+---------+-------+--------------+
| ID | Binary       | Host       | Zone     | Status  | State | Updated At   |
+----+--------------+------------+----------+---------+-------+--------------+
|  4 | nova-        | controller | internal | enabled | up    | 2016-12-20T0 |
|    | consoleauth  |            |          |         |       | 0:44:48.0000 |
|    |              |            |          |         |       | 00           |
|  5 | nova-        | controller | internal | enabled | up    | 2016-12-20T0 |
|    | scheduler    |            |          |         |       | 0:44:48.0000 |
|    |              |            |          |         |       | 00           |
|  6 | nova-        | controller | internal | enabled | up    | 2016-12-20T0 |
|    | conductor    |            |          |         |       | 0:44:54.0000 |
|    |              |            |          |         |       | 00           |
|  9 | nova-compute | compute    | nova     | disabled| up    | 2016-10-21T0 |
|    |              |            |          |         |       | 2:35:03.0000 |
|    |              |            |          |         |       | 00           |
+----+--------------+------------+----------+---------+-------+--------------+</pre></div></li><li class="step "><p>Enable the service:</p><div class="verbatim-wrap"><pre class="screen">$ openstack compute service set --enable nova nova-compute
+----------+--------------+---------+
| Host     | Binary       | Status  |
+----------+--------------+---------+
| compute  | nova-compute | enabled |
+----------+--------------+---------+</pre></div></li></ol></div></div></div></div><div class="sect1 " id="id-1.4.16.10"><div class="titlepage"><div><div><h2 class="title"><span class="number">14.8 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Manage images</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.10">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>The cloud operator assigns roles to users. Roles determine who can
upload and manage images. The operator might restrict image upload and
management to only cloud administrators or operators.</p><p>You can upload images through the <code class="literal">glance</code> client or the Image service
API. You can use the <code class="literal">nova</code> client for the image management.
The latter provides mechanisms to list and delete images, set and delete
image metadata, and create images of a running instance or snapshot and
backup types.</p><p>After you upload an image, you cannot change it.</p><p>For details about image creation, see the <a class="link" href="http://docs.openstack.org/image-guide/" target="_blank">Virtual Machine Image
Guide</a>.</p><div class="sect2 " id="id-1.4.16.10.6"><div class="titlepage"><div><div><h3 class="title"><span class="number">14.8.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">List or get details for images (glance)</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.10.6">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>To get a list of images and to get further details about a single
image, use <code class="command">openstack image list</code> and <code class="command">openstack image show</code>
commands.</p><div class="verbatim-wrap"><pre class="screen">$ openstack image list
+--------------------------------------+---------------------------------+--------+
| ID                                   | Name                            | Status |
+--------------------------------------+---------------------------------+--------+
| dfc1dfb0-d7bf-4fff-8994-319dd6f703d7 | cirros-0.3.2-x86_64-uec         | active |
| a3867e29-c7a1-44b0-9e7f-10db587cad20 | cirros-0.3.2-x86_64-uec-kernel  | active |
| 4b916fba-6775-4092-92df-f41df7246a6b | cirros-0.3.2-x86_64-uec-ramdisk | active |
| d07831df-edc3-4817-9881-89141f9134c3 | myCirrosImage                   | active |
+--------------------------------------+---------------------------------+--------+</pre></div><div class="verbatim-wrap"><pre class="screen">$ openstack image show myCirrosImage
+------------------+------------------------------------------------------+
| Field            | Value                                                |
+------------------+------------------------------------------------------+
| checksum         | ee1eca47dc88f4879d8a229cc70a07c6                     |
| container_format | ami                                                  |
| created_at       | 2016-08-11T15:07:26Z                                 |
| disk_format      | ami                                                  |
| file             | /v2/images/d07831df-edc3-4817-9881-89141f9134c3/file |
| id               | d07831df-edc3-4817-9881-89141f9134c3                 |
| min_disk         | 0                                                    |
| min_ram          | 0                                                    |
| name             | myCirrosImage                                        |
| owner            | d88310717a8e4ebcae84ed075f82c51e                     |
| protected        | False                                                |
| schema           | /v2/schemas/image                                    |
| size             | 13287936                                             |
| status           | active                                               |
| tags             |                                                      |
| updated_at       | 2016-08-11T15:20:02Z                                 |
| virtual_size     | None                                                 |
| visibility       | private                                              |
+------------------+------------------------------------------------------+</pre></div><p>When viewing a list of images, you can also use <code class="literal">grep</code> to filter the
list, as follows:</p><div class="verbatim-wrap"><pre class="screen">$ openstack image list | grep 'cirros'
| dfc1dfb0-d7bf-4fff-8994-319dd6f703d7 | cirros-0.3.2-x86_64-uec         | active |
| a3867e29-c7a1-44b0-9e7f-10db587cad20 | cirros-0.3.2-x86_64-uec-kernel  | active |
| 4b916fba-6775-4092-92df-f41df7246a6b | cirros-0.3.2-x86_64-uec-ramdisk | active |</pre></div><div id="id-1.4.16.10.6.7" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note</h6><p>To store location metadata for images, which enables direct file access for a client,
update the <code class="literal">/etc/glance/glance-api.conf</code> file with the following statements:</p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
                <code class="literal">show_multiple_locations = True</code>
              </p></li><li class="listitem "><p>
                <code class="literal">filesystem_store_metadata_file = filePath</code>
              </p><p>where filePath points to a JSON file that defines the mount point for OpenStack
images on your system and a unique ID. For example:</p></li></ul></div><div class="verbatim-wrap highlight json"><pre class="screen">[{
    "id": "2d9bb53f-70ea-4066-a68b-67960eaae673",
    "mountpoint": "/var/lib/glance/images/"
}]</pre></div><p>After you restart the Image service, you can use the following syntax to view
the image's location information:</p><div class="verbatim-wrap"><pre class="screen">$ openstack --os-image-api-version 2 image show imageID</pre></div><p>For example, using the image ID shown above, you would issue the command as follows:</p><div class="verbatim-wrap"><pre class="screen">$ openstack --os-image-api-version 2 image show 2d9bb53f-70ea-4066-a68b-67960eaae673</pre></div></div></div><div class="sect2 " id="id-1.4.16.10.7"><div class="titlepage"><div><div><h3 class="title"><span class="number">14.8.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Create or update an image (glance)</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.10.7">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>To create an image, use <code class="command">openstack image create</code>:</p><div class="verbatim-wrap"><pre class="screen">$ openstack image create imageName</pre></div><p>To update an image by name or ID, use <code class="command">openstack image set</code>:</p><div class="verbatim-wrap"><pre class="screen">$ openstack image set imageName</pre></div><p>The following list explains the optional arguments that you can use with
the <code class="literal">create</code> and <code class="literal">set</code> commands to modify image properties. For
more information, refer to the <a class="link" href="http://docs.openstack.org/developer/python-openstackclient/command-objects/image.html" target="_blank">OpenStack Image command reference</a>.</p><p>The following example shows the command that you would use to upload a
CentOS 6.3 image in qcow2 format and configure it for public access:</p><div class="verbatim-wrap"><pre class="screen">$ openstack image create --disk-format qcow2 --container-format bare \
  --public --file ./centos63.qcow2 centos63-image</pre></div><p>The following example shows how to update an existing image with a
properties that describe the disk bus, the CD-ROM bus, and the VIF
model:</p><div id="id-1.4.16.10.7.10" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note</h6><p>When you use OpenStack with VMware vCenter Server, you need to specify
the <code class="literal">vmware_disktype</code> and <code class="literal">vmware_adaptertype</code> properties with
<code class="command">openstack image create</code>.
Also, we recommend that you set the <code class="literal">hypervisor_type="vmware"</code> property.
For more information, see <a class="link" href="http://docs.openstack.org/newton/config-reference/compute/hypervisor-vmware.html#images-with-vmware-vsphere" target="_blank">Images with VMware vSphere</a>
in the OpenStack Configuration Reference.</p></div><div class="verbatim-wrap"><pre class="screen">$ openstack image set \
    --property hw_disk_bus=scsi \
    --property hw_cdrom_bus=ide \
    --property hw_vif_model=e1000 \
    f16-x86_64-openstack-sda</pre></div><p>Currently the libvirt virtualization tool determines the disk, CD-ROM,
and VIF device models based on the configured hypervisor type
(<code class="literal">libvirt_type</code> in <code class="literal">/etc/nova/nova.conf</code> file). For the sake of optimal
performance, libvirt defaults to using virtio for both disk and VIF
(NIC) models. The disadvantage of this approach is that it is not
possible to run operating systems that lack virtio drivers, for example,
BSD, Solaris, and older versions of Linux and Windows.</p><p>The valid model values depend on the <code class="literal">libvirt_type</code> setting, as shown
in the following tables.</p><div class="table" id="disk-and-cd-rom-bus-model-values-table"><div class="table-title-wrap"><h6 class="table-title"><span class="number">Table 14.3: </span><span class="name">Disk and CD-ROM bus model values </span><a title="Permalink" class="permalink" href="osadm-os-cli.html#disk-and-cd-rom-bus-model-values-table">#</a></h6></div><div class="table-contents"><table class="table" summary="Disk and CD-ROM bus model values" border="1"><colgroup><col class="c1" /><col class="c2" /></colgroup><thead><tr><th>
                  <p>libvirt_type setting</p>
                </th><th>
                  <p>Supported model values</p>
                </th></tr></thead><tbody><tr><td>
                  <p>qemu or kvm</p>
                </td><td>
                  <div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>ide</p></li><li class="listitem "><p>scsi</p></li><li class="listitem "><p>virtio</p></li></ul></div>
                </td></tr><tr><td>
                  <p>xen</p>
                </td><td>
                  <div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>ide</p></li><li class="listitem "><p>xen</p></li></ul></div>
                </td></tr></tbody></table></div></div><div class="table" id="vif-model-values-table"><div class="table-title-wrap"><h6 class="table-title"><span class="number">Table 14.4: </span><span class="name">VIF model values </span><a title="Permalink" class="permalink" href="osadm-os-cli.html#vif-model-values-table">#</a></h6></div><div class="table-contents"><table class="table" summary="VIF model values" border="1"><colgroup><col class="c1" /><col class="c2" /></colgroup><thead><tr><th>
                  <p>libvirt_type setting</p>
                </th><th>
                  <p>Supported model values</p>
                </th></tr></thead><tbody><tr><td>
                  <p>qemu or kvm</p>
                </td><td>
                  <div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>e1000</p></li><li class="listitem "><p>ne2k_pci</p></li><li class="listitem "><p>pcnet</p></li><li class="listitem "><p>rtl8139</p></li><li class="listitem "><p>virtio</p></li></ul></div>
                </td></tr><tr><td>
                  <p>xen</p>
                </td><td>
                  <div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>e1000</p></li><li class="listitem "><p>netfront</p></li><li class="listitem "><p>ne2k_pci</p></li><li class="listitem "><p>pcnet</p></li><li class="listitem "><p>rtl8139</p></li></ul></div>
                </td></tr><tr><td>
                  <p>vmware</p>
                </td><td>
                  <div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>VirtualE1000</p></li><li class="listitem "><p>VirtualPCNet32</p></li><li class="listitem "><p>VirtualVmxnet</p></li></ul></div>
                </td></tr></tbody></table></div></div><div id="id-1.4.16.10.7.16" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note</h6><p>By default, hardware properties are retrieved from the image
properties. However, if this information is not available, the
<code class="literal">libosinfo</code> database provides an alternative source for these
values.</p><p>If the guest operating system is not in the database, or if the use
of <code class="literal">libosinfo</code> is disabled, the default system values are used.</p><p>Users can set the operating system ID or a <code class="literal">short-id</code> in image
properties. For example:</p><div class="verbatim-wrap"><pre class="screen">$ openstack image set --property short-id=fedora23 \
  name-of-my-fedora-image</pre></div><p>Alternatively, users can set <code class="literal">id</code> to a URL:</p><div class="verbatim-wrap"><pre class="screen">$ openstack image set \
  --property id=http://fedoraproject.org/fedora/23 \
  ID-of-my-fedora-image</pre></div></div><div class="sect3 " id="id-1.4.16.10.7.17"><div class="titlepage"><div><div><h4 class="title"><span class="number">14.8.2.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Create an image from ISO image</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.10.7.17">#</a></h4><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>You can upload ISO images to the Image service (glance).
You can subsequently boot an ISO image using Compute.</p><p>In the Image service, run the following command:</p><div class="verbatim-wrap"><pre class="screen">$ openstack image create ISO_IMAGE --file IMAGE.iso \
  --disk-format iso --container-format bare</pre></div><p>Optionally, to confirm the upload in Image service, run:</p><div class="verbatim-wrap"><pre class="screen">$ openstack image list</pre></div></div></div><div class="sect2 " id="id-1.4.16.10.8"><div class="titlepage"><div><div><h3 class="title"><span class="number">14.8.3 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Troubleshoot image creation</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.10.8">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>If you encounter problems in creating an image in the Image service or
Compute, the following information may help you troubleshoot the
creation process.</p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>Ensure that the version of qemu you are using is version 0.14 or
later. Earlier versions of qemu result in an <code class="literal">unknown option -s</code>
error message in the <code class="literal">/var/log/nova/nova-compute.log</code> file.</p></li><li class="listitem "><p>Examine the <code class="literal">/var/log/nova/nova-api.log</code> and
<code class="literal">/var/log/nova/nova-compute.log</code> log files for error messages.</p></li></ul></div></div></div><div class="sect1 " id="id-1.4.16.11"><div class="titlepage"><div><div><h2 class="title"><span class="number">14.9 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Manage volumes</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.11">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>A volume is a detachable block storage device, similar to a USB hard
drive. You can attach a volume to only one instance. Use  the <code class="literal">openstack</code>
client commands to create and manage volumes.</p><div class="sect2 " id="id-1.4.16.11.3"><div class="titlepage"><div><div><h3 class="title"><span class="number">14.9.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Migrate a volume</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.11.3">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>As an administrator, you can migrate a volume with its data from one
location to another in a manner that is transparent to users and
workloads. You can migrate only detached volumes with no snapshots.</p><p>Possible use cases for data migration include:</p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>Bring down a physical storage device for maintenance without
disrupting workloads.</p></li><li class="listitem "><p>Modify the properties of a volume.</p></li><li class="listitem "><p>Free up space in a thinly-provisioned back end.</p></li></ul></div><p>Migrate a volume with the <code class="command">cinder migrate</code> command, as shown in the
following example:</p><div class="verbatim-wrap"><pre class="screen">$ cinder migrate --force-host-copy &lt;True|False&gt;
                 --lock-volume &lt;True|False&gt;
                 &lt;volume&gt; &lt;host&gt;</pre></div><p>In this example, <code class="literal">--force-host-copy True</code> forces the generic
host-based migration mechanism and bypasses any driver optimizations.
<code class="literal">--lock-volume</code> applies to the available volume.
To determine whether the termination of volume migration caused by other
commands. <code class="literal">True</code>  locks the volume state and does not allow the
migration to be aborted.</p><div id="id-1.4.16.11.3.8" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note</h6><p>If the volume has snapshots, the specified host destination cannot accept
the volume. If the user is not an administrator, the migration fails.</p></div></div><div class="sect2 " id="id-1.4.16.11.4"><div class="titlepage"><div><div><h3 class="title"><span class="number">14.9.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Create a volume</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.11.4">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>This example creates a <code class="literal">my-new-volume</code> volume based on an image.</p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>List images, and note the ID of the image that you want to use for your
volume:</p><div class="verbatim-wrap"><pre class="screen">$ openstack image list
+--------------------------------------+---------------------------------+
| ID                                   | Name                            |
+--------------------------------------+---------------------------------+
| 8bf4dc2a-bf78-4dd1-aefa-f3347cf638c8 | cirros-0.3.4-x86_64-uec         |
| 9ff9bb2e-3a1d-4d98-acb5-b1d3225aca6c | cirros-0.3.4-x86_64-uec-kernel  |
| 4b227119-68a1-4b28-8505-f94c6ea4c6dc | cirros-0.3.4-x86_64-uec-ramdisk |
+--------------------------------------+---------------------------------+</pre></div></li><li class="step "><p>List the availability zones, and note the ID of the availability zone in
which you want to create your volume:</p><div class="verbatim-wrap"><pre class="screen">$ openstack availability zone list
+------+-----------+
| Name |   Status  |
+------+-----------+
| nova | available |
+------+-----------+</pre></div></li><li class="step "><p>Create a volume with 8 gibibytes (GiB) of space, and specify the
availability zone and image:</p><div class="verbatim-wrap"><pre class="screen">$ openstack volume create --image 8bf4dc2a-bf78-4dd1-aefa-f3347cf638c8 \
  --size 8 --availability-zone nova my-new-volume

+------------------------------+--------------------------------------+
| Property                     | Value                                |
+------------------------------+--------------------------------------+
| attachments                  | []                                   |
| availability_zone            | nova                                 |
| bootable                     | false                                |
| consistencygroup_id          | None                                 |
| created_at                   | 2016-09-23T07:52:42.000000           |
| description                  | None                                 |
| encrypted                    | False                                |
| id                           | bab4b0e0-ce3d-4d57-bf57-3c51319f5202 |
| metadata                     | {}                                   |
| multiattach                  | False                                |
| name                         | my-new-volume                        |
| os-vol-tenant-attr:tenant_id | 3f670abbe9b34ca5b81db6e7b540b8d8     |
| replication_status           | disabled                             |
| size                         | 8                                    |
| snapshot_id                  | None                                 |
| source_volid                 | None                                 |
| status                       | creating                             |
| updated_at                   | None                                 |
| user_id                      | fe19e3a9f63f4a14bd4697789247bbc5     |
| volume_type                  | lvmdriver-1                          |
+------------------------------+--------------------------------------+</pre></div></li><li class="step "><p>To verify that your volume was created successfully, list the available
volumes:</p><div class="verbatim-wrap"><pre class="screen">$ openstack volume list
+--------------------------------------+---------------+-----------+------+-------------+
| ID                                   | DisplayName   |  Status   | Size | Attached to |
+--------------------------------------+---------------+-----------+------+-------------+
| bab4b0e0-ce3d-4d57-bf57-3c51319f5202 | my-new-volume | available | 8    |             |
+--------------------------------------+---------------+-----------+------+-------------+</pre></div><p>If your volume was created successfully, its status is <code class="literal">available</code>. If
its status is <code class="literal">error</code>, you might have exceeded your quota.</p></li></ol></div></div></div><div class="sect2 " id="id-1.4.16.11.5"><div class="titlepage"><div><div><h3 class="title"><span class="number">14.9.3 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Create a volume from specified volume type</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.11.5">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>Cinder supports these three ways to specify <code class="literal">volume type</code> during
volume creation.</p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>volume_type</p></li><li class="step "><p>cinder_img_volume_type (via glance image metadata)</p></li><li class="step "><p>default_volume_type (via cinder.conf)</p></li></ol></div></div><div class="sect3 " id="id-1.4.16.11.5.4"><div class="titlepage"><div><div><h4 class="title"><span class="number">14.9.3.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">volume_type</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.11.5.4">#</a></h4><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>User can specify <code class="literal">volume type</code> when creating a volume.</p><div class="verbatim-wrap"><pre class="screen">$ openstack volume create -h -f {json,shell,table,value,yaml}
                         -c COLUMN --max-width &lt;integer&gt;
                         --noindent --prefix PREFIX --size &lt;size&gt;
                         --type &lt;volume-type&gt; --image &lt;image&gt;
                         --snapshot &lt;snapshot&gt; --source &lt;volume&gt;
                         --description &lt;description&gt; --user &lt;user&gt;
                         --project &lt;project&gt;
                         --availability-zone &lt;availability-zone&gt;
                         --property &lt;key=value&gt;
                         &lt;name&gt;</pre></div></div><div class="sect3 " id="id-1.4.16.11.5.5"><div class="titlepage"><div><div><h4 class="title"><span class="number">14.9.3.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">cinder_img_volume_type</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.11.5.5">#</a></h4><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>If glance image has <code class="literal">cinder_img_volume_type</code> property, Cinder uses this
parameter to specify <code class="literal">volume type</code> when creating a volume.</p><p>Choose glance image which has <code class="literal">cinder_img_volume_type</code> property and create
a volume from the image.</p><div class="verbatim-wrap"><pre class="screen">$ openstack image list
+----------------------------------+---------------------------------+--------+
| ID                               | Name                            | Status |
+----------------------------------+---------------------------------+--------+
| 376bd633-c9c9-4c5d-a588-342f4f66 | cirros-0.3.4-x86_64-uec         | active |
| d086                             |                                 |        |
| 2c20fce7-2e68-45ee-ba8d-         | cirros-0.3.4-x86_64-uec-ramdisk | active |
| beba27a91ab5                     |                                 |        |
| a5752de4-9faf-4c47-acbc-         | cirros-0.3.4-x86_64-uec-kernel  | active |
| 78a5efa7cc6e                     |                                 |        |
+----------------------------------+---------------------------------+--------+


$ openstack image show 376bd633-c9c9-4c5d-a588-342f4f66d086
+------------------+-----------------------------------------------------------+
| Field            | Value                                                     |
+------------------+-----------------------------------------------------------+
| checksum         | eb9139e4942121f22bbc2afc0400b2a4                          |
| container_format | ami                                                       |
| created_at       | 2016-10-13T03:28:55Z                                      |
| disk_format      | ami                                                       |
| file             | /v2/images/376bd633-c9c9-4c5d-a588-342f4f66d086/file      |
| id               | 376bd633-c9c9-4c5d-a588-342f4f66d086                      |
| min_disk         | 0                                                         |
| min_ram          | 0                                                         |
| name             | cirros-0.3.4-x86_64-uec                                   |
| owner            | 88ba456e3a884c318394737765e0ef4d                          |
| properties       | kernel_id='a5752de4-9faf-4c47-acbc-78a5efa7cc6e',         |
|                  | ramdisk_id='2c20fce7-2e68-45ee-ba8d-beba27a91ab5'         |
| protected        | False                                                     |
| schema           | /v2/schemas/image                                         |
| size             | 25165824                                                  |
| status           | active                                                    |
| tags             |                                                           |
| updated_at       | 2016-10-13T03:28:55Z                                      |
| virtual_size     | None                                                      |
| visibility       | public                                                    |
+------------------+-----------------------------------------------------------+

$ openstack volume create --image 376bd633-c9c9-4c5d-a588-342f4f66d086 \
  --size 1 --availability-zone nova test
+---------------------+--------------------------------------+
| Field               | Value                                |
+---------------------+--------------------------------------+
| attachments         | []                                   |
| availability_zone   | nova                                 |
| bootable            | false                                |
| consistencygroup_id | None                                 |
| created_at          | 2016-10-13T06:29:53.688599           |
| description         | None                                 |
| encrypted           | False                                |
| id                  | e6e6a72d-cda7-442c-830f-f306ea6a03d5 |
| multiattach         | False                                |
| name                | test                                 |
| properties          |                                      |
| replication_status  | disabled                             |
| size                | 1                                    |
| snapshot_id         | None                                 |
| source_volid        | None                                 |
| status              | creating                             |
| type                | lvmdriver-1                          |
| updated_at          | None                                 |
| user_id             | 33fdc37314914796883706b33e587d51     |
+---------------------+--------------------------------------+</pre></div></div><div class="sect3 " id="id-1.4.16.11.5.6"><div class="titlepage"><div><div><h4 class="title"><span class="number">14.9.3.3 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">default_volume_type</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.11.5.6">#</a></h4><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>If above parameters are not set, Cinder uses default_volume_type which is
defined in cinder.conf during volume creation.</p><p>Example cinder.conf file configuration.</p><div class="verbatim-wrap"><pre class="screen">[default]
default_volume_type = lvmdriver-1</pre></div></div></div><div class="sect2 " id="id-1.4.16.11.6"><div class="titlepage"><div><div><h3 class="title"><span class="number">14.9.4 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Attach a volume to an instance</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.11.6">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>Attach your volume to a server, specifying the server ID and the volume
ID:</p><div class="verbatim-wrap"><pre class="screen">$ openstack server add volume 84c6e57d-a6b1-44b6-81eb-fcb36afd31b5 \
  573e024d-5235-49ce-8332-be1576d323f8 --device /dev/vdb</pre></div></li><li class="step "><p>Show information for your volume:</p><div class="verbatim-wrap"><pre class="screen">$ openstack volume show 573e024d-5235-49ce-8332-be1576d323f8</pre></div><p>The output shows that the volume is attached to the server with ID
<code class="literal">84c6e57d-a6b1-44b6-81eb-fcb36afd31b5</code>, is in the nova availability
zone, and is bootable.</p><div class="verbatim-wrap"><pre class="screen">+------------------------------+-----------------------------------------------+
| Field                        | Value                                         |
+------------------------------+-----------------------------------------------+
| attachments                  | [{u'device': u'/dev/vdb',                     |
|                              |        u'server_id': u'84c6e57d-a             |
|                              |           u'id': u'573e024d-...               |
|                              |        u'volume_id': u'573e024d...            |
| availability_zone            | nova                                          |
| bootable                     | true                                          |
| consistencygroup_id          | None                                          |
| created_at                   | 2016-10-13T06:08:07.000000                    |
| description                  | None                                          |
| encrypted                    | False                                         |
| id                           | 573e024d-5235-49ce-8332-be1576d323f8          |
| multiattach                  | False                                         |
| name                         | my-new-volume                                 |
| os-vol-tenant-attr:tenant_id | 7ef070d3fee24bdfae054c17ad742e28              |
| properties                   |                                               |
| replication_status           | disabled                                      |
| size                         | 8                                             |
| snapshot_id                  | None                                          |
| source_volid                 | None                                          |
| status                       | in-use                                        |
| type                         | lvmdriver-1                                   |
| updated_at                   | 2016-10-13T06:08:11.000000                    |
| user_id                      | 33fdc37314914796883706b33e587d51              |
| volume_image_metadata        |{u'kernel_id': u'df430cc2...,                  |
|                              |        u'image_id': u'397e713c...,            |
|                              |        u'ramdisk_id': u'3cf852bd...,          |
|                              |u'image_name': u'cirros-0.3.2-x86_64-uec'}     |
+------------------------------+-----------------------------------------------+</pre></div></li></ol></div></div></div><div class="sect2 " id="resize-a-volume"><div class="titlepage"><div><div><h3 class="title"><span class="number">14.9.5 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Resize a volume</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#resize-a-volume">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span>resize-a-volume</li></ul></div></div></div></div><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>To resize your volume, you must first detach it from the server.
To detach the volume from your server, pass the server ID and volume ID
to the following command:</p><div class="verbatim-wrap"><pre class="screen">$ openstack server remove volume 84c6e57d-a6b1-44b6-81eb-fcb36afd31b5 573e024d-5235-49ce-8332-be1576d323f8</pre></div><p>This command does not provide any output.</p></li><li class="step "><p>List volumes:</p><div class="verbatim-wrap"><pre class="screen">$ openstack volume list
+----------------+-----------------+-----------+------+-------------+
|       ID       |   Display Name  |  Status   | Size | Attached to |
+----------------+-----------------+-----------+------+-------------+
| 573e024d-52... |  my-new-volume  | available |  8   |             |
| bd7cf584-45... | my-bootable-vol | available |  8   |             |
+----------------+-----------------+-----------+------+-------------+</pre></div><p>Note that the volume is now available.</p></li><li class="step "><p>Resize the volume by passing the volume ID and the new size (a value
greater than the old one) as parameters:</p><div class="verbatim-wrap"><pre class="screen">$ openstack volume set 573e024d-5235-49ce-8332-be1576d323f8 --size 10</pre></div><p>This command does not provide any output.</p><div id="id-1.4.16.11.7.2.3.4" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note</h6><p>When extending an LVM volume with a snapshot, the volume will be
deactivated. The reactivation is automatic unless
<code class="literal">auto_activation_volume_list</code> is defined in <code class="literal">lvm.conf</code>. See
<code class="literal">lvm.conf</code> for more information.</p></div></li></ol></div></div></div><div class="sect2 " id="id-1.4.16.11.8"><div class="titlepage"><div><div><h3 class="title"><span class="number">14.9.6 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Delete a volume</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.11.8">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>To delete your volume, you must first detach it from the server.
To detach the volume from your server and check for the list of existing
volumes, see steps 1 and 2 in <a class="xref" href="osadm-os-cli.html#resize-a-volume" title="14.9.5. Resize a volume">Section 14.9.5, “Resize a volume”</a>.</p><p>Delete the volume using either the volume name or ID:</p><div class="verbatim-wrap"><pre class="screen">$ openstack volume delete my-new-volume</pre></div><p>This command does not provide any output.</p></li><li class="step "><p>List the volumes again, and note that the status of your volume is
<code class="literal">deleting</code>:</p><div class="verbatim-wrap"><pre class="screen">$ openstack volume list
+----------------+-----------------+-----------+------+-------------+
|       ID       |   Display Name  |  Status   | Size | Attached to |
+----------------+-----------------+-----------+------+-------------+
| 573e024d-52... |  my-new-volume  |  deleting |  8   |             |
| bd7cf584-45... | my-bootable-vol | available |  8   |             |
+----------------+-----------------+-----------+------+-------------+</pre></div><p>When the volume is fully deleted, it disappears from the list of
volumes:</p><div class="verbatim-wrap"><pre class="screen">$ openstack volume list
+----------------+-----------------+-----------+------+-------------+
|       ID       |   Display Name  |  Status   | Size | Attached to |
+----------------+-----------------+-----------+------+-------------+
| bd7cf584-45... | my-bootable-vol | available |  8   |             |
+----------------+-----------------+-----------+------+-------------+</pre></div></li></ol></div></div></div><div class="sect2 " id="id-1.4.16.11.9"><div class="titlepage"><div><div><h3 class="title"><span class="number">14.9.7 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Transfer a volume</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.11.9">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>You can transfer a volume from one owner to another by using the
<code class="command">openstack volume transfer request create</code> command. The volume
donor, or original owner, creates a transfer request and sends the created
transfer ID and authorization key to the volume recipient. The volume
recipient, or new owner, accepts the transfer by using the ID and key.</p><div id="id-1.4.16.11.9.3" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note</h6><p>The procedure for volume transfer is intended for tenants (both the
volume donor and recipient) within the same cloud.</p></div><p>Use cases include:</p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>Create a custom bootable volume or a volume with a large data set and
transfer it to a customer.</p></li><li class="listitem "><p>For bulk import of data to the cloud, the data ingress system creates
a new Block Storage volume, copies data from the physical device, and
transfers device ownership to the end user.</p></li></ul></div><div class="sect3 " id="id-1.4.16.11.9.6"><div class="titlepage"><div><div><h4 class="title"><span class="number">14.9.7.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Create a volume transfer request</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.11.9.6">#</a></h4><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>While logged in as the volume donor, list the available volumes:</p><div class="verbatim-wrap"><pre class="screen">$ openstack volume list
+-----------------+-----------------+-----------+------+-------------+
|       ID        |   Display Name  |  Status   | Size | Attached to |
+-----------------+-----------------+-----------+------+-------------+
| 72bfce9f-cac... |       None      |   error   |  1   |             |
| a1cdace0-08e... |       None      | available |  1   |             |
+-----------------+-----------------+-----------+------+-------------+</pre></div></li><li class="step "><p>As the volume donor, request a volume transfer authorization code for a
specific volume:</p><div class="verbatim-wrap"><pre class="screen">  $ openstack volume transfer request create &lt;volume&gt;

&lt;volume&gt;
   Name or ID of volume to transfer.</pre></div><p>The volume must be in an <code class="literal">available</code> state or the request will be
denied. If the transfer request is valid in the database (that is, it
has not expired or been deleted), the volume is placed in an
<code class="literal">awaiting-transfer</code> state. For example:</p><div class="verbatim-wrap"><pre class="screen">$ openstack volume transfer request create a1cdace0-08e4-4dc7-b9dc-457e9bcfe25f</pre></div><p>The output shows the volume transfer ID in the <code class="literal">id</code> row and the
authorization key.</p><div class="verbatim-wrap"><pre class="screen">+------------+--------------------------------------+
| Field      | Value                                |
+------------+--------------------------------------+
| auth_key   | 0a59e53630f051e2                     |
| created_at | 2016-11-03T11:49:40.346181           |
| id         | 34e29364-142b-4c7b-8d98-88f765bf176f |
| name       | None                                 |
| volume_id  | a1cdace0-08e4-4dc7-b9dc-457e9bcfe25f |
+------------+--------------------------------------+</pre></div><div id="id-1.4.16.11.9.6.2.2.7" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note</h6><p>Optionally, you can specify a name for the transfer by using the
<code class="literal">--name transferName</code> parameter.</p></div><div id="id-1.4.16.11.9.6.2.2.8" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note</h6><p>While the <code class="literal">auth_key</code> property is visible in the output of
<code class="literal">openstack volume transfer request create VOLUME_ID</code>, it will not be
available in subsequent <code class="literal">openstack volume transfer request show TRANSFER_ID</code>
command.</p></div></li><li class="step "><p>Send the volume transfer ID and authorization key to the new owner (for
example, by email).</p></li><li class="step "><p>View pending transfers:</p><div class="verbatim-wrap"><pre class="screen">$ openstack volume transfer request list
+--------------------------------------+--------------------------------------+------+
|               ID                     |             Volume                   | Name |
+--------------------------------------+--------------------------------------+------+
| 6e4e9aa4-bed5-4f94-8f76-df43232f44dc | a1cdace0-08e4-4dc7-b9dc-457e9bcfe25f | None |
+--------------------------------------+--------------------------------------+------+</pre></div></li><li class="step "><p>After the volume recipient, or new owner, accepts the transfer, you can
see that the transfer is no longer available:</p><div class="verbatim-wrap"><pre class="screen">$ openstack volume transfer request list
+----+-----------+------+
| ID | Volume ID | Name |
+----+-----------+------+
+----+-----------+------+</pre></div></li></ol></div></div></div><div class="sect3 " id="id-1.4.16.11.9.7"><div class="titlepage"><div><div><h4 class="title"><span class="number">14.9.7.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Accept a volume transfer request</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.11.9.7">#</a></h4><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>As the volume recipient, you must first obtain the transfer ID and
authorization key from the original owner.</p></li><li class="step "><p>Accept the request:</p><div class="verbatim-wrap"><pre class="screen">$ openstack volume transfer request accept transferID authKey</pre></div><p>For example:</p><div class="verbatim-wrap"><pre class="screen">$ openstack volume transfer request accept 6e4e9aa4-bed5-4f94-8f76-df43232f44dc b2c8e585cbc68a80
+-----------+--------------------------------------+
|  Property |                Value                 |
+-----------+--------------------------------------+
|     id    | 6e4e9aa4-bed5-4f94-8f76-df43232f44dc |
|    name   |                 None                 |
| volume_id | a1cdace0-08e4-4dc7-b9dc-457e9bcfe25f |
+-----------+--------------------------------------+</pre></div><div id="id-1.4.16.11.9.7.2.2.5" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note</h6><p>If you do not have a sufficient quota for the transfer, the transfer
is refused.</p></div></li></ol></div></div></div><div class="sect3 " id="id-1.4.16.11.9.8"><div class="titlepage"><div><div><h4 class="title"><span class="number">14.9.7.3 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Delete a volume transfer</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.11.9.8">#</a></h4><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>List available volumes and their statuses:</p><div class="verbatim-wrap"><pre class="screen">$ openstack volume list
+-----------------+-----------------+-----------------+------+-------------+
|       ID        |   Display Name  |      Status     | Size | Attached to |
+-----------------+-----------------+-----------------+------+-------------+
| 72bfce9f-cac... |       None      |      error      |  1   |             |
| a1cdace0-08e... |       None      |awaiting-transfer|  1   |             |
+-----------------+-----------------+-----------------+------+-------------+</pre></div></li><li class="step "><p>Find the matching transfer ID:</p><div class="verbatim-wrap"><pre class="screen">$ openstack volume transfer request list
+--------------------------------------+--------------------------------------+------+
|               ID                     |             VolumeID                 | Name |
+--------------------------------------+--------------------------------------+------+
| a6da6888-7cdf-4291-9c08-8c1f22426b8a | a1cdace0-08e4-4dc7-b9dc-457e9bcfe25f | None |
+--------------------------------------+--------------------------------------+------+</pre></div></li><li class="step "><p>Delete the volume:</p><div class="verbatim-wrap"><pre class="screen">$ openstack volume transfer request delete &lt;transfer&gt;</pre></div><div class="variablelist "><dl class="variablelist"><dt id="id-1.4.16.11.9.8.2.3.3.1"><span class="term ">&lt;transfer&gt;</span></dt><dd><p>Name or ID of transfer to delete.</p></dd></dl></div><p>For example:</p><div class="verbatim-wrap"><pre class="screen">$ openstack volume transfer request delete a6da6888-7cdf-4291-9c08-8c1f22426b8a</pre></div></li><li class="step "><p>Verify that transfer list is now empty and that the volume is again
available for transfer:</p><div class="verbatim-wrap"><pre class="screen">$ openstack volume transfer request list
+----+-----------+------+
| ID | Volume ID | Name |
+----+-----------+------+
+----+-----------+------+</pre></div><div class="verbatim-wrap"><pre class="screen">$ openstack volume list
+-----------------+-----------+--------------+------+-------------+----------+-------------+
|       ID        |   Status  | Display Name | Size | Volume Type | Bootable | Attached to |
+-----------------+-----------+--------------+------+-------------+----------+-------------+
| 72bfce9f-ca...  |   error   |     None     |  1   |     None    |  false   |             |
| a1cdace0-08...  | available |     None     |  1   |     None    |  false   |             |
+-----------------+-----------+--------------+------+-------------+----------+-------------+</pre></div></li></ol></div></div></div></div><div class="sect2 " id="id-1.4.16.11.10"><div class="titlepage"><div><div><h3 class="title"><span class="number">14.9.8 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Manage and unmanage a snapshot</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.11.10">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>A snapshot is a point in time version of a volume. As an administrator,
you can manage and unmanage snapshots.</p><div class="sect3 " id="id-1.4.16.11.10.3"><div class="titlepage"><div><div><h4 class="title"><span class="number">14.9.8.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Manage a snapshot</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.11.10.3">#</a></h4><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>Manage a snapshot with the <code class="command">openstack snapshot set</code> command:</p><div class="verbatim-wrap"><pre class="screen">$ openstack snapshot set \
  [--name &lt;name&gt;] \
  [--description &lt;description&gt;] \
  [--property &lt;key=value&gt; [...] ] \
  [--state &lt;state&gt;] \
  &lt;snapshot&gt;</pre></div><p>The arguments to be passed are:</p><div class="variablelist "><dl class="variablelist"><dt id="id-1.4.16.11.10.3.5.1"><span class="term ">
                <code class="literal">--name</code>
              </span></dt><dd><p>New snapshot name</p></dd><dt id="id-1.4.16.11.10.3.5.2"><span class="term ">
                <code class="literal">--description</code>
              </span></dt><dd><p>New snapshot description</p></dd><dt id="id-1.4.16.11.10.3.5.3"><span class="term ">
                <code class="literal">--property</code>
              </span></dt><dd><p>Property to add or modify for this snapshot (repeat option to set
multiple properties)</p></dd><dt id="id-1.4.16.11.10.3.5.4"><span class="term ">
                <code class="literal">--state</code>
              </span></dt><dd><p>New snapshot state. (“available”, “error”, “creating”, “deleting”,
or “error_deleting”)
(admin only) (This option simply changes the state of the snapshot in the
database with no regard to actual status, exercise caution when using)</p></dd><dt id="id-1.4.16.11.10.3.5.5"><span class="term ">
                <code class="literal">&lt;snapshot&gt;</code>
              </span></dt><dd><p>Snapshot to modify (name or ID)</p></dd></dl></div><div class="verbatim-wrap"><pre class="screen">$ openstack snapshot set my-snapshot-id</pre></div></div><div class="sect3 " id="id-1.4.16.11.10.4"><div class="titlepage"><div><div><h4 class="title"><span class="number">14.9.8.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Unmanage a snapshot</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.11.10.4">#</a></h4><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>Unmanage a snapshot with the <code class="command">cinder snapshot-unmanage</code> command:</p><div class="verbatim-wrap"><pre class="screen">$ cinder snapshot-unmanage SNAPSHOT</pre></div><p>The arguments to be passed are:</p><div class="variablelist "><dl class="variablelist"><dt id="id-1.4.16.11.10.4.5.1"><span class="term ">SNAPSHOT</span></dt><dd><p>Name or ID of the snapshot to unmanage.</p></dd></dl></div><p>The following example unmanages the <code class="literal">my-snapshot-id</code> image:</p><div class="verbatim-wrap"><pre class="screen">$ cinder snapshot-unmanage my-snapshot-id</pre></div></div></div></div><div class="sect1 " id="id-1.4.16.12"><div class="titlepage"><div><div><h2 class="title"><span class="number">14.10 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Manage shares</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.12">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>A share is provided by file storage. You can give access to a share to
instances. To create and manage shares, use <code class="literal">manila</code> client commands.</p><div class="sect2 " id="id-1.4.16.12.3"><div class="titlepage"><div><div><h3 class="title"><span class="number">14.10.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Migrate a share</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.12.3">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>As an administrator, you can migrate a share with its data from one
location to another in a manner that is transparent to users and
workloads.</p><p>Possible use cases for data migration include:</p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>Bring down a physical storage device for maintenance without
disrupting workloads.</p></li><li class="listitem "><p>Modify the properties of a share.</p></li><li class="listitem "><p>Free up space in a thinly-provisioned back end.</p></li></ul></div><p>Migrate a share with the <code class="command">manila migrate</code> command, as shown in the
following example:</p><div class="verbatim-wrap"><pre class="screen">$ manila migrate shareID destinationHost --force-host-copy True|False</pre></div><p>In this example, <code class="literal">--force-host-copy True</code> forces the generic
host-based migration mechanism and bypasses any driver optimizations.
<code class="literal">destinationHost</code> is in this format <code class="literal">host#pool</code> which includes
destination host and pool.</p><div id="id-1.4.16.12.3.8" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note</h6><p>If the user is not an administrator, the migration fails.</p></div></div></div><div class="sect1 " id="osadm-manage-flavors-cmd"><div class="titlepage"><div><div><h2 class="title"><span class="number">14.11 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Manage flavors</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#osadm-manage-flavors-cmd">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span>osadm-manage-flavors-cmd</li></ul></div></div></div></div><p>In OpenStack, flavors define the compute, memory, and
storage capacity of nova computing instances. To put it
simply, a flavor is an available hardware configuration for a
server. It defines the <code class="literal">size</code> of a virtual server
that can be launched.</p><div id="id-1.4.16.13.3" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note</h6><p>Flavors can also determine on which compute host a flavor
can be used to launch an instance. For information
about customizing flavors, refer to <a class="xref" href="bk02ch05.html#compute-flavors" title="5.4.3. Flavors">Section 5.4.3, “Flavors”</a>.</p></div><p>A flavor consists of the following parameters:</p><div class="variablelist "><dl class="variablelist"><dt id="id-1.4.16.13.5.1"><span class="term ">Flavor ID</span></dt><dd><p>Unique ID (integer or UUID) for the new flavor. If
specifying 'auto', a UUID will be automatically generated.</p></dd><dt id="id-1.4.16.13.5.2"><span class="term ">Name</span></dt><dd><p>Name for the new flavor.</p></dd><dt id="id-1.4.16.13.5.3"><span class="term ">VCPUs</span></dt><dd><p>Number of virtual CPUs to use.</p></dd><dt id="id-1.4.16.13.5.4"><span class="term ">Memory MB</span></dt><dd><p>Amount of RAM to use (in megabytes).</p></dd><dt id="id-1.4.16.13.5.5"><span class="term ">Root Disk GB</span></dt><dd><p>Amount of disk space (in gigabytes) to use for
the root (/) partition.</p></dd><dt id="id-1.4.16.13.5.6"><span class="term ">Ephemeral Disk GB</span></dt><dd><p>Amount of disk space (in gigabytes) to use for
the ephemeral partition. If unspecified, the value
is <code class="literal">0</code> by default.
Ephemeral disks offer machine local disk storage
linked to the lifecycle of a VM instance. When a
VM is terminated, all data on the ephemeral disk
is lost. Ephemeral disks are not included in any
snapshots.</p></dd><dt id="id-1.4.16.13.5.7"><span class="term ">Swap</span></dt><dd><p>Amount of swap space (in megabytes) to use. If
unspecified, the value is <code class="literal">0</code> by default.</p></dd><dt id="id-1.4.16.13.5.8"><span class="term ">RXTX Factor</span></dt><dd><p>Optional property that allows servers with a different bandwidth be
created with the RXTX Factor. The default value is <code class="literal">1.0</code>. That is,
the new bandwidth is the same as that of the attached network. The
RXTX Factor is available only for Xen or NSX based systems.</p></dd><dt id="id-1.4.16.13.5.9"><span class="term ">Is Public</span></dt><dd><p>Boolean value defines whether the flavor is available to all users.
Defaults to <code class="literal">True</code>.</p></dd><dt id="id-1.4.16.13.5.10"><span class="term ">Extra Specs</span></dt><dd><p>Key and value pairs that define on which compute nodes a
flavor can run. These pairs must match corresponding pairs on
the compute nodes. It can be used to implement special resources, such
as flavors that run on only compute nodes with GPU hardware.</p></dd></dl></div><p>As of Newton, there are no default flavors.  The following table
lists the default flavors for Mitaka and earlier.</p><div class="informaltable"><table class="informaltable" border="1"><colgroup><col class="c1" /><col class="c2" /><col class="c3" /><col class="c4" /></colgroup><thead><tr><th>
                <p>Flavor</p>
              </th><th>
                <p>VCPUs</p>
              </th><th>
                <p>Disk (in GB)</p>
              </th><th>
                <p>RAM (in MB)</p>
              </th></tr></thead><tbody><tr><td>
                <p>m1.tiny</p>
              </td><td>
                <p>1</p>
              </td><td>
                <p>1</p>
              </td><td>
                <p>512</p>
              </td></tr><tr><td>
                <p>m1.small</p>
              </td><td>
                <p>1</p>
              </td><td>
                <p>20</p>
              </td><td>
                <p>2048</p>
              </td></tr><tr><td>
                <p>m1.medium</p>
              </td><td>
                <p>2</p>
              </td><td>
                <p>40</p>
              </td><td>
                <p>4096</p>
              </td></tr><tr><td>
                <p>m1.large</p>
              </td><td>
                <p>4</p>
              </td><td>
                <p>80</p>
              </td><td>
                <p>8192</p>
              </td></tr><tr><td>
                <p>m1.xlarge</p>
              </td><td>
                <p>8</p>
              </td><td>
                <p>160</p>
              </td><td>
                <p>16384</p>
              </td></tr></tbody></table></div><p>You can create and manage flavors with the
<code class="command">openstack flavor</code> commands provided by the <code class="literal">python-openstackclient</code>
package.</p><div class="sect2 " id="id-1.4.16.13.9"><div class="titlepage"><div><div><h3 class="title"><span class="number">14.11.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Create a flavor</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.13.9">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>List flavors to show the ID and name, the amount
of memory, the amount of disk space for the root
partition and for the ephemeral partition, the
swap, and the number of virtual CPUs for each
flavor:</p><div class="verbatim-wrap"><pre class="screen">$ openstack flavor list</pre></div></li><li class="step "><p>To create a flavor, specify a name, ID, RAM
size, disk size, and the number of VCPUs for the
flavor, as follows:</p><div class="verbatim-wrap"><pre class="screen">$ openstack flavor create FLAVOR_NAME --id FLAVOR_ID --ram RAM_IN_MB --disk ROOT_DISK_IN_GB --vcpus NUMBER_OF_VCPUS</pre></div><div id="id-1.4.16.13.9.2.2.3" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note</h6><p>Unique ID (integer or UUID) for the new flavor. If
specifying 'auto', a UUID will be automatically generated.</p></div><p>Here is an example with additional optional
parameters filled in that creates a public <code class="literal">extra
tiny</code> flavor that automatically gets an ID
assigned, with 256 MB memory, no disk space, and
one VCPU. The rxtx-factor indicates the slice of
bandwidth that the instances with this flavor can
use (through the Virtual Interface (vif) creation
in the hypervisor):</p><div class="verbatim-wrap"><pre class="screen">$ openstack flavor create --public m1.extra_tiny --id auto --ram 256 --disk 0 --vcpus 1 --rxtx-factor 1</pre></div></li><li class="step "><p>If an individual user or group of users needs a custom
flavor that you do not want other projects to have access to,
you can change the flavor's access to make it a private flavor.
See
<a class="link" href="http://docs.openstack.org/ops-guide/ops-user-facing-operations.html#private-flavors" target="_blank">Private Flavors in the OpenStack Operations Guide</a>.</p><p>For a list of optional parameters, run this command:</p><div class="verbatim-wrap"><pre class="screen">$ openstack help flavor create</pre></div></li><li class="step "><p>After you create a flavor, assign it to a
project by specifying the flavor name or ID and
the project ID:</p><div class="verbatim-wrap"><pre class="screen">$ nova flavor-access-add FLAVOR TENANT_ID</pre></div></li><li class="step "><p>In addition, you can set or unset <code class="literal">extra_spec</code> for the existing flavor.
The <code class="literal">extra_spec</code> metadata keys can influence the instance directly when
it is launched. If a flavor sets the
<code class="literal">extra_spec key/value quota:vif_outbound_peak=65536</code>, the instance's
outbound peak bandwidth I/O should be LTE 512 Mbps. There are several
aspects that can work for an instance including <code class="literal">CPU limits</code>,
<code class="literal">Disk tuning</code>, <code class="literal">Bandwidth I/O</code>, <code class="literal">Watchdog behavior</code>, and
<code class="literal">Random-number generator</code>.
For information about supporting metadata keys, see
<a class="xref" href="bk02ch05.html#compute-flavors" title="5.4.3. Flavors">Section 5.4.3, “Flavors”</a>.</p><p>For a list of optional parameters, run this command:</p><div class="verbatim-wrap"><pre class="screen">$ nova help flavor-key</pre></div></li></ol></div></div></div><div class="sect2 " id="id-1.4.16.13.10"><div class="titlepage"><div><div><h3 class="title"><span class="number">14.11.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Delete a flavor</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.13.10">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>Delete a specified flavor, as follows:</p><div class="verbatim-wrap"><pre class="screen">$ openstack flavor delete FLAVOR_ID</pre></div></div></div><div class="sect1 " id="id-1.4.16.14"><div class="titlepage"><div><div><h2 class="title"><span class="number">14.12 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Manage the OpenStack environment</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.14">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>This section includes tasks specific to the OpenStack environment.</p><div class="sect2 " id="id-1.4.16.14.3"><div class="titlepage"><div><div><h3 class="title"><span class="number">14.12.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Select hosts where instances are launched</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.14.3">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>With the appropriate permissions, you can select which
host instances are launched on and which roles can boot instances
on this host.</p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>To select the host where instances are launched, use
the <code class="literal">--availability-zone ZONE:HOST:NODE</code> parameter on the
<code class="command">openstack server create</code> command.</p><p>For example:</p><div class="verbatim-wrap"><pre class="screen">$ openstack server create --image IMAGE --flavor m1.tiny \
  --key-name KEY --availability-zone ZONE:HOST:NODE \
  --nic net-id=UUID SERVER</pre></div><div id="id-1.4.16.14.3.3.1.4" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note</h6><p>HOST is an optional parameter. In such cases,
use the <code class="literal">--availability-zone ZONE::NODE</code>.</p></div></li><li class="step "><p>To specify which roles can launch an instance on a
specified host, enable the <code class="literal">create:forced_host</code> option in
the <code class="literal">policy.json</code> file. By default, this option is
enabled for only the admin role. If you see <code class="literal">Forbidden (HTTP 403)</code>
in return, then you are not using admin credentials.</p></li><li class="step "><p>To view the list of valid zones, use the
<code class="command">openstack availability zone list</code> command.</p><div class="verbatim-wrap"><pre class="screen">$ openstack availability zone list
+-----------+-------------+
| Zone Name | Zone Status |
+-----------+-------------+
| zone1     | available   |
| zone2     | available   |
+-----------+-------------+</pre></div></li><li class="step "><p>To view the list of valid compute hosts, use the
<code class="command">openstack host list</code> command.</p><div class="verbatim-wrap"><pre class="screen">$ openstack host list
+----------------+-------------+----------+
| Host Name      | Service     | Zone     |
+----------------+-------------+----------+
| compute01      | compute     | nova     |
| compute02      | compute     | nova     |
+----------------+-------------+----------+</pre></div></li><li class="step "><p>To view the list of valid compute nodes, use the
<code class="command">openstack hypervisor list</code> command.</p><div class="verbatim-wrap"><pre class="screen">$ openstack hypervisor list
+----+---------------------+
| ID | Hypervisor Hostname |
+----+---------------------+
|  1 | server2             |
|  2 | server3             |
|  3 | server4             |
+----+---------------------+</pre></div></li></ol></div></div></div><div class="sect2 " id="id-1.4.16.14.4"><div class="titlepage"><div><div><h3 class="title"><span class="number">14.12.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Consider NUMA topology when booting instances</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.14.4">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>NUMA topology can exist on both the physical hardware of the host, and the
virtual hardware of the instance. OpenStack Compute uses libvirt to tune
instances to take advantage of NUMA topologies. The libvirt driver boot
process looks at the NUMA topology field of both the instance and the host it
is being booted on, and uses that information to generate an appropriate
configuration.</p><p>If the host is NUMA capable, but the instance has not requested a NUMA
topology, Compute attempts to pack the instance into a single cell.
If this fails, though, Compute will not continue to try.</p><p>If the host is NUMA capable, and the instance has requested a specific NUMA
topology, Compute will try to pin the vCPUs of different NUMA cells
on the instance to the corresponding NUMA cells on the host. It will also
expose the NUMA topology of the instance to the guest OS.</p><p>If you want Compute to pin a particular vCPU as part of this process,
set the <code class="literal">vcpu_pin_set</code> parameter in the <code class="literal">nova.conf</code> configuration
file. For more information about the <code class="literal">vcpu_pin_set</code> parameter, see the
Configuration Reference Guide.</p></div><div class="sect2 " id="id-1.4.16.14.5"><div class="titlepage"><div><div><h3 class="title"><span class="number">14.12.3 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Evacuate instances</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.14.5">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>If a hardware malfunction or other error causes a cloud compute node to fail,
you can evacuate instances to make them available again. You can optionally
include the target host on the <code class="command">nova evacuate</code> command. If you omit
the host, the scheduler chooses the target host.</p><p>To preserve user data on the server disk, configure shared storage on the
target host. When you evacuate the instance, Compute detects whether shared
storage is available on the target host. Also, you must validate that the
current VM host is not operational. Otherwise, the evacuation fails.</p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>To find a host for the evacuated instance, list all hosts:</p><div class="verbatim-wrap"><pre class="screen">$ openstack host list</pre></div></li><li class="step "><p>Evacuate the instance. You can use the <code class="literal">--password PWD</code> option
to pass the instance password to the command. If you do not specify a
password, the command generates and prints one after it finishes
successfully. The following command evacuates a server from a failed host
to HOST_B.</p><div class="verbatim-wrap"><pre class="screen">$ nova evacuate EVACUATED_SERVER_NAME HOST_B</pre></div><p>The command rebuilds the instance from the original image or volume and
returns a password. The command preserves the original configuration, which
includes the instance ID, name, uid, IP address, and so on.</p><div class="verbatim-wrap"><pre class="screen">+-----------+--------------+
| Property  |    Value     |
+-----------+--------------+
| adminPass | kRAJpErnT4xZ |
+-----------+--------------+</pre></div></li><li class="step "><p>To preserve the user disk data on the evacuated server, deploy Compute
with a shared file system. To configure your system, see
<a class="xref" href="bk02ch05.html#section-configuring-compute-migrations" title="5.4.9. Configure migrations">Section 5.4.9, “Configure migrations”</a>.
The following example does not change the password.</p><div class="verbatim-wrap"><pre class="screen">$ nova evacuate EVACUATED_SERVER_NAME HOST_B --on-shared-storage</pre></div></li></ol></div></div></div><div class="sect2 " id="id-1.4.16.14.6"><div class="titlepage"><div><div><h3 class="title"><span class="number">14.12.4 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Migrate a single instance to another compute host</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.14.6">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>When you want to move an instance from one compute host to another,
you can use the <code class="command">openstack server migrate</code> command. The scheduler
chooses the destination compute host based on its settings. This process does
not assume that the instance has shared storage available on the
target host. If you are using SSH tunneling, you must ensure that
each node is configured with SSH key authentication so that the
Compute service can use SSH to move disks to other nodes.
For more information, see <a class="xref" href="osadm-os-cli.html#clinovamigratecfgssh" title="14.12.5. Configure SSH between compute nodes">Section 14.12.5, “Configure SSH between compute nodes”</a>.</p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>To list the VMs you want to migrate, run:</p><div class="verbatim-wrap"><pre class="screen">$ openstack server list</pre></div></li><li class="step "><p>Use the <code class="command">openstack server migrate</code> command.</p><div class="verbatim-wrap"><pre class="screen">$ openstack server migrate --live TARGET_HOST VM_INSTANCE</pre></div></li><li class="step "><p>To migrate an instance and watch the status, use this example script:</p><div class="verbatim-wrap highlight bash"><pre class="screen">#!/bin/bash

# Provide usage
usage() {
echo "Usage: $0 VM_ID"
exit 1
}

[[ $# -eq 0 ]] &amp;&amp; usage

# Migrate the VM to an alternate hypervisor
echo -n "Migrating instance to alternate host"
VM_ID=$1
nova migrate $VM_ID
VM_OUTPUT=`nova show $VM_ID`
VM_STATUS=`echo "$VM_OUTPUT" | grep status | awk '{print $4}'`
while [[ "$VM_STATUS" != "VERIFY_RESIZE" ]]; do
echo -n "."
sleep 2
VM_OUTPUT=`nova show $VM_ID`
VM_STATUS=`echo "$VM_OUTPUT" | grep status | awk '{print $4}'`
done
nova resize-confirm $VM_ID
echo " instance migrated and resized."
echo;

# Show the details for the VM
echo "Updated instance details:"
nova show $VM_ID

# Pause to allow users to examine VM details
read -p "Pausing, press &lt;enter&gt; to exit."</pre></div></li></ol></div></div><div id="id-1.4.16.14.6.4" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note</h6><p>If you see this error, it means you are either
trying the command with the wrong credentials,
such as a non-admin user, or the <code class="literal">policy.json</code>
file prevents migration for your user:</p><p>
            <code class="literal">ERROR (Forbidden): Policy doesn't allow compute_extension:admin_actions:migrate
to be performed. (HTTP 403)</code>
          </p></div><div id="id-1.4.16.14.6.5" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note</h6><p>If you see an error similar to this message, SSH tunneling
was not set up between the compute nodes:</p><p>
            <code class="literal">ProcessExecutionError: Unexpected error while running command.</code>
          </p><p>
            <code class="literal">Stderr: u Host key verification failed.\r\n</code>
          </p></div><p>The instance is booted from a new host, but preserves its configuration
including its ID, name, any metadata, IP address, and other properties.</p></div><div class="sect2 " id="clinovamigratecfgssh"><div class="titlepage"><div><div><h3 class="title"><span class="number">14.12.5 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Configure SSH between compute nodes</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#clinovamigratecfgssh">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span>clinovamigratecfgssh</li></ul></div></div></div></div><p>If you are resizing or migrating an instance
between hypervisors, you might encounter an
SSH (Permission denied) error. Ensure that
each node is configured with SSH key authentication
so that the Compute service can use SSH
to move disks to other nodes.</p><p>To share a key pair between compute nodes,
complete the following steps:</p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>On the first node, obtain a key pair
(public key and private key). Use the root key
that is in the <code class="literal">/root/.ssh/id_rsa</code> and
<code class="literal">/root/.ssh/id_ras.pub</code> directories or
generate a new key pair.</p></li><li class="step "><p>Run <code class="command">setenforce 0</code> to put SELinux into
permissive mode.</p></li><li class="step "><p>Enable login abilities for the nova user:</p><div class="verbatim-wrap"><pre class="screen"># usermod -s /bin/bash nova</pre></div><p>Switch to the nova account.</p><div class="verbatim-wrap"><pre class="screen"># su nova</pre></div></li><li class="step "><p>As root, create the folder that is needed by SSH and place
the private key that you obtained in step 1 into this
folder:</p><div class="verbatim-wrap"><pre class="screen">mkdir -p /var/lib/nova/.ssh
cp &lt;private key&gt;  /var/lib/nova/.ssh/id_rsa
echo 'StrictHostKeyChecking no' &gt;&gt; /var/lib/nova/.ssh/config
chmod 600 /var/lib/nova/.ssh/id_rsa /var/lib/nova/.ssh/authorized_keys</pre></div></li><li class="step "><p>Repeat steps 2-4 on each node.</p><div id="id-1.4.16.14.7.4.5.2" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note</h6><p>The nodes must share the same key pair, so do not generate
a new key pair for any subsequent nodes.</p></div></li><li class="step "><p>From the first node, where you created the SSH key, run:</p><div class="verbatim-wrap"><pre class="screen">ssh-copy-id -i &lt;pub key&gt; nova@remote-host</pre></div><p>This command installs your public key in a remote machine's <code class="literal">authorized_keys</code> folder.</p></li><li class="step "><p>Ensure that the nova user can now log in to each node without
using a password:</p><div class="verbatim-wrap"><pre class="screen"># su nova
$ ssh *computeNodeAddress*
$ exit</pre></div></li><li class="step "><p>As root on each node, restart both libvirt and the Compute services:</p><div class="verbatim-wrap"><pre class="screen"># systemctl restart libvirtd.service
# systemctl restart openstack-nova-compute.service</pre></div></li></ol></div></div></div><div class="sect2 " id="id-1.4.16.14.8"><div class="titlepage"><div><div><h3 class="title"><span class="number">14.12.6 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Manage IP addresses</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.14.8">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>Each instance has a private, fixed IP address that is assigned when
the instance is launched. In addition, an instance can have a public
or floating IP address. Private IP addresses are used for
communication between instances, and public IP addresses are used
for communication with networks outside the cloud, including the
Internet.</p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>By default, both administrative and end users can associate floating IP
addresses with projects and instances. You can change user permissions for
managing IP addresses by updating the <code class="literal">/etc/nova/policy.json</code>
file. For basic floating-IP procedures, refer to the <a class="link" href="http://docs.openstack.org/user-guide/configure-access-and-security-for-instances.html#allocate-a-floating-ip-address-to-an-instance" target="_blank">Allocate a
floating address to an instance</a>
section in the OpenStack End User Guide.</p></li><li class="listitem "><p>For details on creating public networks using OpenStack Networking
(<code class="literal">neutron</code>), refer to <a class="xref" href="networking.html#networking-adv-features" title="9.9. Advanced features through API extensions">Section 9.9, “Advanced features through API extensions”</a>.
No floating IP addresses are created by default in OpenStack Networking.</p></li></ul></div><p>As an administrator using legacy networking (<code class="literal">nova-network</code>), you
can use the following bulk commands to list, create, and delete ranges
of floating IP addresses. These addresses can then be associated with
instances by end users.</p><div class="sect3 " id="id-1.4.16.14.8.5"><div class="titlepage"><div><div><h4 class="title"><span class="number">14.12.6.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">List addresses for all projects</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.14.8.5">#</a></h4><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>To list all floating IP addresses for all projects, run:</p><div class="verbatim-wrap"><pre class="screen">$ openstack floating ip list
+------------+---------------+---------------+--------+-----------+
| project_id | address       | instance_uuid | pool   | interface |
+------------+---------------+---------------+--------+-----------+
| None       | 172.24.4.225  | None          | public | eth0      |
| None       | 172.24.4.226  | None          | public | eth0      |
| None       | 172.24.4.227  | None          | public | eth0      |
| None       | 172.24.4.228  | None          | public | eth0      |
| None       | 172.24.4.229  | None          | public | eth0      |
| None       | 172.24.4.230  | None          | public | eth0      |
| None       | 172.24.4.231  | None          | public | eth0      |
| None       | 172.24.4.232  | None          | public | eth0      |
| None       | 172.24.4.233  | None          | public | eth0      |
| None       | 172.24.4.234  | None          | public | eth0      |
| None       | 172.24.4.235  | None          | public | eth0      |
| None       | 172.24.4.236  | None          | public | eth0      |
| None       | 172.24.4.237  | None          | public | eth0      |
| None       | 172.24.4.238  | None          | public | eth0      |
| None       | 192.168.253.1 | None          | test   | eth0      |
| None       | 192.168.253.2 | None          | test   | eth0      |
| None       | 192.168.253.3 | None          | test   | eth0      |
| None       | 192.168.253.4 | None          | test   | eth0      |
| None       | 192.168.253.5 | None          | test   | eth0      |
| None       | 192.168.253.6 | None          | test   | eth0      |
+------------+---------------+---------------+--------+-----------+</pre></div></div><div class="sect3 " id="id-1.4.16.14.8.6"><div class="titlepage"><div><div><h4 class="title"><span class="number">14.12.6.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Bulk create floating IP addresses</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.14.8.6">#</a></h4><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>To create a range of floating IP addresses, run:</p><div class="verbatim-wrap"><pre class="screen">$ nova floating-ip-bulk-create [--pool POOL_NAME] [--interface INTERFACE] RANGE_TO_CREATE</pre></div><p>For example:</p><div class="verbatim-wrap"><pre class="screen">$ nova floating-ip-bulk-create --pool test 192.168.1.56/29</pre></div><p>By default, <code class="literal">floating-ip-bulk-create</code> uses the
<code class="literal">public</code> pool and <code class="literal">eth0</code> interface values.</p><div id="id-1.4.16.14.8.6.7" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note</h6><p>You should use a range of free IP addresses that is valid for your
network. If you are not sure, at least try to avoid the DHCP address
range:</p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>Pick a small range (/29 gives an 8 address range, 6 of
which will be usable).</p></li><li class="listitem "><p>Use <code class="command">nmap</code> to check a range's availability. For example,
192.168.1.56/29 represents a small range of addresses
(192.168.1.56-63, with 57-62 usable), and you could run the
command <code class="command">nmap -sn 192.168.1.56/29</code> to check whether the entire
range is currently unused.</p></li></ul></div></div></div><div class="sect3 " id="id-1.4.16.14.8.7"><div class="titlepage"><div><div><h4 class="title"><span class="number">14.12.6.3 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Bulk delete floating IP addresses</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.14.8.7">#</a></h4><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>To delete a range of floating IP addresses, run:</p><div class="verbatim-wrap"><pre class="screen">$ openstack floating ip delete RANGE_TO_DELETE</pre></div><p>For example:</p><div class="verbatim-wrap"><pre class="screen">$ openstack floating ip delete 192.168.1.56/29</pre></div></div></div><div class="sect2 " id="id-1.4.16.14.9"><div class="titlepage"><div><div><h3 class="title"><span class="number">14.12.7 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Launch and manage stacks using the CLI</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.14.9">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>The Orchestration service provides a template-based
orchestration engine. Administrators can use the orchestration engine
to create and manage OpenStack cloud infrastructure resources. For
example, an administrator can define storage, networking, instances,
and applications to use as a repeatable running environment.</p><p>Templates are used to create stacks, which are collections
of resources. For example, a stack might include instances,
floating IPs, volumes, security groups, or users.
The Orchestration service offers access to all OpenStack
core services through a single modular template, with additional
orchestration capabilities such as auto-scaling and basic
high availability.</p><p>For information about:</p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>basic creation and deletion of Orchestration stacks, refer
to the <a class="link" href="http://docs.openstack.org/user-guide/dashboard-stacks.html" target="_blank">OpenStack End User Guide</a></p></li><li class="listitem "><p><span class="bold"><strong>openstack</strong></span> CLI, see the <a class="link" href="http://docs.openstack.org/cli-reference/openstack.html" target="_blank">OpenStack Command-Line Interface
Reference</a></p></li></ul></div><div id="id-1.4.16.14.9.6" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note</h6><p>The <code class="literal">heat</code> CLI is deprecated in favor of <code class="literal">python-openstackclient</code>.
For a Python library, continue using <code class="literal">python-heatclient</code>.</p></div><p>As an administrator, you can also carry out stack functions
on behalf of your users. For example, to resume, suspend,
or delete a stack, run:</p><div class="verbatim-wrap"><pre class="screen">$ openstack stack resume STACK
$ openstack stack suspend STACK
$ openstack stack delete STACK</pre></div></div></div><div class="sect1 " id="manage-quotas"><div class="titlepage"><div><div><h2 class="title"><span class="number">14.13 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Manage quotas</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#manage-quotas">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span>manage-quotas</li></ul></div></div></div></div><p>To prevent system capacities from being exhausted without
notification, you can set up quotas. Quotas are operational
limits. For example, the number of gigabytes allowed for each
project can be controlled so that cloud resources are optimized.
Quotas can be enforced at both the project
and the project-user level.</p><p>Using the command-line interface, you can manage quotas for
the OpenStack Compute service, the OpenStack Block Storage service,
and the OpenStack Networking service.</p><p>The cloud operator typically changes default values because a
project requires more than ten volumes or 1 TB on a compute
node.</p><div id="id-1.4.16.15.5" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note</h6><p>To view all projects, run:</p><div class="verbatim-wrap"><pre class="screen">$ openstack project list
+----------------------------------+----------+
| ID                               | Name     |
+----------------------------------+----------+
| e66d97ac1b704897853412fc8450f7b9 | admin    |
| bf4a37b885fe46bd86e999e50adad1d3 | services |
| 21bd1c7c95234fd28f589b60903606fa | tenant01 |
| f599c5cd1cba4125ae3d7caed08e288c | tenant02 |
+----------------------------------+----------+</pre></div><p>To display all current users for a project, run:</p><div class="verbatim-wrap"><pre class="screen">$ openstack user list --project PROJECT_NAME
+----------------------------------+--------+
| ID                               | Name   |
+----------------------------------+--------+
| ea30aa434ab24a139b0e85125ec8a217 | demo00 |
| 4f8113c1d838467cad0c2f337b3dfded | demo01 |
+----------------------------------+--------+</pre></div></div><p>Use <code class="literal">openstack quota show <em class="replaceable ">PROJECT_NAME</em></code> to list all quotas for a
project.</p><p>Use <code class="literal">openstack quota set <em class="replaceable ">PROJECT_NAME</em><em class="replaceable ">--parameters</em></code> to set quota
values.</p><div class="sect2 " id="id-1.4.16.15.8"><div class="titlepage"><div><div><h3 class="title"><span class="number">14.13.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Manage Compute service quotas</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.15.8">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>As an administrative user, you can use the <code class="command">nova quota-*</code>
commands, which are provided by the <code class="literal">python-novaclient</code>
package, to update the Compute service quotas for a specific project or
project user, as well as update the quota defaults for a new project.</p><p>
          <span class="bold"><strong>Compute quota descriptions</strong></span>
        </p><div class="informaltable"><table class="informaltable" border="1"><colgroup><col class="c1" /><col class="c2" /></colgroup><thead><tr><th>
                  <p>Quota name</p>
                </th><th>
                  <p>Description</p>
                </th></tr></thead><tbody><tr><td>
                  <p>cores</p>
                </td><td>
                  <p>Number of instance cores (VCPUs) allowed per project.</p>
                </td></tr><tr><td>
                  <p>fixed-ips</p>
                </td><td>
                  <p>Number of fixed IP addresses allowed per project. This number
must be equal to or greater than the number of allowed
instances.</p>
                </td></tr><tr><td>
                  <p>floating-ips</p>
                </td><td>
                  <p>Number of floating IP addresses allowed per project.</p>
                </td></tr><tr><td>
                  <p>injected-file-content-bytes</p>
                </td><td>
                  <p>Number of content bytes allowed per injected file.</p>
                </td></tr><tr><td>
                  <p>injected-file-path-bytes</p>
                </td><td>
                  <p>Length of injected file path.</p>
                </td></tr><tr><td>
                  <p>injected-files</p>
                </td><td>
                  <p>Number of injected files allowed per project.</p>
                </td></tr><tr><td>
                  <p>instances</p>
                </td><td>
                  <p>Number of instances allowed per project.</p>
                </td></tr><tr><td>
                  <p>key-pairs</p>
                </td><td>
                  <p>Number of key pairs allowed per user.</p>
                </td></tr><tr><td>
                  <p>metadata-items</p>
                </td><td>
                  <p>Number of metadata items allowed per instance.</p>
                </td></tr><tr><td>
                  <p>ram</p>
                </td><td>
                  <p>Megabytes of instance ram allowed per project.</p>
                </td></tr><tr><td>
                  <p>security-groups</p>
                </td><td>
                  <p>Number of security groups per project.</p>
                </td></tr><tr><td>
                  <p>security-group-rules</p>
                </td><td>
                  <p>Number of rules per security group.</p>
                </td></tr><tr><td>
                  <p>server-groups</p>
                </td><td>
                  <p>Number of server groups per project.</p>
                </td></tr><tr><td>
                  <p>server-group-members</p>
                </td><td>
                  <p>Number of servers per server group.</p>
                </td></tr></tbody></table></div><div class="sect3 " id="id-1.4.16.15.8.5"><div class="titlepage"><div><div><h4 class="title"><span class="number">14.13.1.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">View and update Compute quotas for a project</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.15.8.5">#</a></h4><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><div class="sect4 " id="id-1.4.16.15.8.5.2"><div class="titlepage"><div><div><h5 class="title"><span class="number">14.13.1.1.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">To view and update default quota values</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.15.8.5.2">#</a></h5><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>List all default quotas for all projects:</p><div class="verbatim-wrap"><pre class="screen">$ openstack quota show --default

+-----------------------------+-------+
| Quota                       | Limit |
+-----------------------------+-------+
| instances                   | 10    |
| cores                       | 20    |
| ram                         | 51200 |
| floating_ips                | 10    |
| fixed_ips                   | -1    |
| metadata_items              | 128   |
| injected_files              | 5     |
| injected_file_content_bytes | 10240 |
| injected_file_path_bytes    | 255   |
| key_pairs                   | 100   |
| security_groups             | 10    |
| security_group_rules        | 20    |
| server_groups               | 10    |
| server_group_members        | 10    |
+-----------------------------+-------+</pre></div></li><li class="step "><p>Update a default value for a new project, for example:</p><div class="verbatim-wrap"><pre class="screen">$ nova quota-class-update --instances 15 default</pre></div></li></ol></div></div></div><div class="sect4 " id="id-1.4.16.15.8.5.3"><div class="titlepage"><div><div><h5 class="title"><span class="number">14.13.1.1.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">To view quota values for an existing project</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.15.8.5.3">#</a></h5><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><div class="procedure "><div class="procedure-contents"><ul class="procedure"><li class="step "><p>List the currently set quota values for a project:</p><div class="verbatim-wrap"><pre class="screen">$ openstack quota show TENANT_NAME

+-----------------------------+-------+
| Quota                       | Limit |
+-----------------------------+-------+
| instances                   | 10    |
| cores                       | 20    |
| ram                         | 51200 |
| floating_ips                | 10    |
| fixed_ips                   | -1    |
| metadata_items              | 128   |
| injected_files              | 5     |
| injected_file_content_bytes | 10240 |
| injected_file_path_bytes    | 255   |
| key_pairs                   | 100   |
| security_groups             | 10    |
| security_group_rules        | 20    |
| server_groups               | 10    |
| server_group_members        | 10    |
+-----------------------------+-------+</pre></div></li></ul></div></div></div><div class="sect4 " id="id-1.4.16.15.8.5.4"><div class="titlepage"><div><div><h5 class="title"><span class="number">14.13.1.1.3 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">To update quota values for an existing project</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.15.8.5.4">#</a></h5><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>Obtain the project ID.</p><div class="verbatim-wrap"><pre class="screen">$ tenant=$(openstack project show -f value -c id TENANT_NAME)</pre></div></li><li class="step "><p>Update a particular quota value.</p><div class="verbatim-wrap"><pre class="screen">$ nova quota-update --QUOTA_NAME QUOTA_VALUE TENANT_ID</pre></div><p>For example:</p><div class="verbatim-wrap"><pre class="screen">$ nova quota-update --floating-ips 20 TENANT_NAME
$ openstack quota show TENANT_NAME
+-----------------------------+-------+
| Quota                       | Limit |
+-----------------------------+-------+
| instances                   | 10    |
| cores                       | 20    |
| ram                         | 51200 |
| floating_ips                | 20    |
| fixed_ips                   | -1    |
| metadata_items              | 128   |
| injected_files              | 5     |
| injected_file_content_bytes | 10240 |
| injected_file_path_bytes    | 255   |
| key_pairs                   | 100   |
| security_groups             | 10    |
| security_group_rules        | 20    |
| server_groups               | 10    |
| server_group_members        | 10    |
+-----------------------------+-------+</pre></div><div id="id-1.4.16.15.8.5.4.2.2.5" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note</h6><p>To view a list of options for the <code class="command">nova quota-update</code> command,
run:</p><div class="verbatim-wrap"><pre class="screen">$ nova help quota-update</pre></div></div></li></ol></div></div></div></div><div class="sect3 " id="id-1.4.16.15.8.6"><div class="titlepage"><div><div><h4 class="title"><span class="number">14.13.1.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">View and update Compute quotas for a project user</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.15.8.6">#</a></h4><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><div class="sect4 " id="id-1.4.16.15.8.6.2"><div class="titlepage"><div><div><h5 class="title"><span class="number">14.13.1.2.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">To view quota values for a project user</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.15.8.6.2">#</a></h5><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>Place the user ID in a usable variable.</p><div class="verbatim-wrap"><pre class="screen">$ tenantUser=$(openstack user show -f value -c id USER_NAME)</pre></div></li><li class="step "><p>Place the user's project ID in a usable variable, as follows:</p><div class="verbatim-wrap"><pre class="screen">$ tenant=$(openstack project show -f value -c id TENANT_NAME)</pre></div></li><li class="step "><p>List the currently set quota values for a project user.</p><div class="verbatim-wrap"><pre class="screen">$ nova quota-show --user $tenantUser --tenant $tenant</pre></div><p>For example:</p><div class="verbatim-wrap"><pre class="screen">$ nova quota-show --user $tenantUser --tenant $tenant
+-----------------------------+-------+
| Quota                       | Limit |
+-----------------------------+-------+
| instances                   | 10    |
| cores                       | 20    |
| ram                         | 51200 |
| floating_ips                | 20    |
| fixed_ips                   | -1    |
| metadata_items              | 128   |
| injected_files              | 5     |
| injected_file_content_bytes | 10240 |
| injected_file_path_bytes    | 255   |
| key_pairs                   | 100   |
| security_groups             | 10    |
| security_group_rules        | 20    |
| server_groups               | 10    |
| server_group_members        | 10    |
+-----------------------------+-------+</pre></div></li></ol></div></div></div><div class="sect4 " id="id-1.4.16.15.8.6.3"><div class="titlepage"><div><div><h5 class="title"><span class="number">14.13.1.2.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">To update quota values for a project user</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.15.8.6.3">#</a></h5><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>Place the user ID in a usable variable.</p><div class="verbatim-wrap"><pre class="screen">$ tenantUser=$(openstack user show -f value -c id USER_NAME)</pre></div></li><li class="step "><p>Place the user's project ID in a usable variable, as follows:</p><div class="verbatim-wrap"><pre class="screen">$ tenant=$(openstack project show -f value -c id TENANT_NAME)</pre></div></li><li class="step "><p>Update a particular quota value, as follows:</p><div class="verbatim-wrap"><pre class="screen">$ nova quota-update  --user $tenantUser --QUOTA_NAME QUOTA_VALUE $tenant</pre></div><p>For example:</p><div class="verbatim-wrap"><pre class="screen">$ nova quota-update --user $tenantUser --floating-ips 12 $tenant
$ nova quota-show --user $tenantUser --tenant $tenant
+-----------------------------+-------+
| Quota                       | Limit |
+-----------------------------+-------+
| instances                   | 10    |
| cores                       | 20    |
| ram                         | 51200 |
| floating_ips                | 12    |
| fixed_ips                   | -1    |
| metadata_items              | 128   |
| injected_files              | 5     |
| injected_file_content_bytes | 10240 |
| injected_file_path_bytes    | 255   |
| key_pairs                   | 100   |
| security_groups             | 10    |
| security_group_rules        | 20    |
| server_groups               | 10    |
| server_group_members        | 10    |
+-----------------------------+-------+</pre></div><div id="id-1.4.16.15.8.6.3.2.3.5" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note</h6><p>To view a list of options for the <code class="command">nova quota-update</code> command,
run:</p><div class="verbatim-wrap"><pre class="screen">$ nova help quota-update</pre></div></div></li></ol></div></div></div><div class="sect4 " id="id-1.4.16.15.8.6.4"><div class="titlepage"><div><div><h5 class="title"><span class="number">14.13.1.2.3 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">To display the current quota usage for a project user</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.15.8.6.4">#</a></h5><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>Use <code class="command">nova absolute-limits</code> to get a list of the
current quota values and the current quota usage:</p><div class="verbatim-wrap"><pre class="screen">$ nova absolute-limits --tenant TENANT_NAME
+--------------------+------+-------+
| Name               | Used | Max   |
+--------------------+------+-------+
| Cores              | 0    | 20    |
| FloatingIps        | 0    | 10    |
| ImageMeta          | -    | 128   |
| Instances          | 0    | 10    |
| Keypairs           | -    | 100   |
| Personality        | -    | 5     |
| Personality Size   | -    | 10240 |
| RAM                | 0    | 51200 |
| SecurityGroupRules | -    | 20    |
| SecurityGroups     | 0    | 10    |
| Server Meta        | -    | 128   |
| ServerGroupMembers | -    | 10    |
| ServerGroups       | 0    | 10    |
+--------------------+------+-------+</pre></div></div></div></div><div class="sect2 " id="id-1.4.16.15.9"><div class="titlepage"><div><div><h3 class="title"><span class="number">14.13.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Manage Block Storage service quotas</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.15.9">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>As an administrative user, you can update the OpenStack Block
Storage service quotas for a project. You can also update the quota
defaults for a new project.</p><p>
          <span class="bold"><strong>Block Storage quotas</strong></span>
        </p><div class="informaltable"><table class="informaltable" border="1"><colgroup><col class="c1" /><col class="c2" /></colgroup><thead><tr><th>
                  <p>Property name</p>
                </th><th>
                  <p>Defines the number of</p>
                </th></tr></thead><tbody><tr><td>
                  <p>gigabytes</p>
                </td><td>
                  <p>Volume gigabytes allowed for each project.</p>
                </td></tr><tr><td>
                  <p>snapshots</p>
                </td><td>
                  <p>Volume snapshots allowed for each project.</p>
                </td></tr><tr><td>
                  <p>volumes</p>
                </td><td>
                  <p>Volumes allowed for each project.</p>
                </td></tr></tbody></table></div><div class="sect3 " id="id-1.4.16.15.9.5"><div class="titlepage"><div><div><h4 class="title"><span class="number">14.13.2.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">View Block Storage quotas</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.15.9.5">#</a></h4><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>Administrative users can view Block Storage service quotas.</p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>Obtain the project ID.</p><p>For example:</p><div class="verbatim-wrap"><pre class="screen">$ project_id=$(openstack project show -f value -c id PROJECT_NAME)</pre></div></li><li class="step "><p>List the default quotas for a project:</p><div class="verbatim-wrap"><pre class="screen">$ cinder quota-defaults PROJECT_ID</pre></div><p>For example:</p><div class="verbatim-wrap"><pre class="screen">$ cinder quota-defaults $project_id
+-----------+-------+
|  Property | Value |
+-----------+-------+
| gigabytes |  1000 |
| snapshots |   10  |
|  volumes  |   10  |
+-----------+-------+</pre></div></li><li class="step "><p>View Block Storage service quotas for a project:</p><div class="verbatim-wrap"><pre class="screen">$ cinder quota-show PROJECT_ID</pre></div><p>For example:</p><div class="verbatim-wrap"><pre class="screen">$ cinder quota-show $project_id
+-----------+-------+
|  Property | Value |
+-----------+-------+
| gigabytes |  1000 |
| snapshots |   10  |
|  volumes  |   10  |
+-----------+-------+</pre></div></li><li class="step "><p>Show the current usage of a per-project quota:</p><div class="verbatim-wrap"><pre class="screen">$ cinder quota-usage PROJECT_ID</pre></div><p>For example:</p><div class="verbatim-wrap"><pre class="screen">$ cinder quota-usage $project_id
+-----------+--------+----------+-------+
|    Type   | In_use | Reserved | Limit |
+-----------+--------+----------+-------+
| gigabytes |   0    |    0     |  1000 |
| snapshots |   0    |    0     |   10  |
|  volumes  |   0    |    0     |   15  |
+-----------+--------+----------+-------+</pre></div></li></ol></div></div></div><div class="sect3 " id="id-1.4.16.15.9.6"><div class="titlepage"><div><div><h4 class="title"><span class="number">14.13.2.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Edit and update Block Storage service quotas</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.15.9.6">#</a></h4><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>Administrative users can edit and update Block Storage
service quotas.</p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>To update a default value for a new project,
update the property in the <span class="guimenu ">cinder.quota</span>
section of the <code class="literal">/etc/cinder/cinder.conf</code> file.
For more information, see the <a class="link" href="http://docs.openstack.org/newton/config-reference/block-storage.html" target="_blank">Block Storage service</a>
in OpenStack Configuration Reference.</p></li><li class="step "><p>To update Block Storage service quotas for an existing project</p><div class="verbatim-wrap"><pre class="screen">$ cinder quota-update --QUOTA_NAME QUOTA_VALUE PROJECT_ID</pre></div><p>Replace <code class="literal">QUOTA_NAME</code> with the quota that is to be updated,
<code class="literal">QUOTA_VALUE</code> with the required new value, and <code class="literal">PROJECT_ID</code>
with the required project ID.</p><p>For example:</p><div class="verbatim-wrap"><pre class="screen">$ cinder quota-update --volumes 15 $project_id
$ cinder quota-show $project_id
+-----------+-------+
|  Property | Value |
+-----------+-------+
| gigabytes |  1000 |
| snapshots |   10  |
|  volumes  |   15  |
+-----------+-------+</pre></div></li><li class="step "><p>To clear per-project quota limits:</p><div class="verbatim-wrap"><pre class="screen">$ cinder quota-delete PROJECT_ID</pre></div></li></ol></div></div></div></div><div class="sect2 " id="id-1.4.16.15.10"><div class="titlepage"><div><div><h3 class="title"><span class="number">14.13.3 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Manage Networking service quotas</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.15.10">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>A quota limits the number of available resources. A default
quota might be enforced for all projects. When you try to create
more resources than the quota allows, an error occurs:</p><div class="verbatim-wrap highlight ini"><pre class="screen">$ openstack network create test_net
 Quota exceeded for resources: ['network']</pre></div><p>Per-project quota configuration is also supported by the quota
extension API. See <a class="xref" href="osadm-os-cli.html#cfg-quotas-per-tenant" title="14.13.3.2. Configure per-project quotas">Section 14.13.3.2, “Configure per-project quotas”</a> for details.</p><div class="sect3 " id="id-1.4.16.15.10.5"><div class="titlepage"><div><div><h4 class="title"><span class="number">14.13.3.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Basic quota configuration</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.15.10.5">#</a></h4><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>In the Networking default quota mechanism, all projects have
the same quota values, such as the number of resources that a
project can create.</p><p>The quota value is defined in the OpenStack Networking
<code class="literal">/etc/neutron/neutron.conf</code> configuration file. This example shows the
default quota values:</p><div class="verbatim-wrap highlight ini"><pre class="screen">[quotas]
# number of networks allowed per tenant, and minus means unlimited
quota_network = 10

# number of subnets allowed per tenant, and minus means unlimited
quota_subnet = 10

# number of ports allowed per tenant, and minus means unlimited
quota_port = 50

# default driver to use for quota checks
quota_driver = neutron.quota.ConfDriver</pre></div><p>OpenStack Networking also supports quotas for L3 resources:
router and floating IP. Add these lines to the
<code class="literal">quotas</code> section in the <code class="literal">/etc/neutron/neutron.conf</code> file:</p><div class="verbatim-wrap highlight ini"><pre class="screen">[quotas]
# number of routers allowed per tenant, and minus means unlimited
quota_router = 10

# number of floating IPs allowed per tenant, and minus means unlimited
quota_floatingip = 50</pre></div><p>OpenStack Networking also supports quotas for security group
resources: number of security groups and the number of rules for
each security group. Add these lines to the
<code class="literal">quotas</code> section in the <code class="literal">/etc/neutron/neutron.conf</code> file:</p><div class="verbatim-wrap highlight ini"><pre class="screen">[quotas]
# number of security groups per tenant, and minus means unlimited
quota_security_group = 10

# number of security rules allowed per tenant, and minus means unlimited
quota_security_group_rule = 100</pre></div></div><div class="sect3 " id="cfg-quotas-per-tenant"><div class="titlepage"><div><div><h4 class="title"><span class="number">14.13.3.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Configure per-project quotas</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#cfg-quotas-per-tenant">#</a></h4><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span>cfg-quotas-per-tenant</li></ul></div></div></div></div><p>OpenStack Networking also supports per-project quota limit by
quota extension API.</p><p>Use these commands to manage per-project quotas:</p><div class="variablelist "><dl class="variablelist"><dt id="id-1.4.16.15.10.6.4.1"><span class="term ">neutron quota-delete</span></dt><dd><p>Delete defined quotas for a specified project</p></dd><dt id="id-1.4.16.15.10.6.4.2"><span class="term ">neutron quota-list</span></dt><dd><p>Lists defined quotas for all projects</p></dd><dt id="id-1.4.16.15.10.6.4.3"><span class="term ">neutron quota-show</span></dt><dd><p>Shows quotas for a specified project</p></dd><dt id="id-1.4.16.15.10.6.4.4"><span class="term ">neutron quota-default-show</span></dt><dd><p>Show default quotas for a specified tenant</p></dd><dt id="id-1.4.16.15.10.6.4.5"><span class="term ">neutron quota-update</span></dt><dd><p>Updates quotas for a specified project</p></dd></dl></div><p>Only users with the <code class="literal">admin</code> role can change a quota value. By default,
the default set of quotas are enforced for all projects, so no
<code class="command">quota-create</code> command exists.</p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>Configure Networking to show per-project quotas</p><p>Set the <code class="literal">quota_driver</code> option in the <code class="literal">/etc/neutron/neutron.conf</code> file.</p><div class="verbatim-wrap highlight ini"><pre class="screen">quota_driver = neutron.db.quota_db.DbQuotaDriver</pre></div><p>When you set this option, the output for Networking commands shows <code class="literal">quotas</code>.</p></li><li class="step "><p>List Networking extensions.</p><p>To list the Networking extensions, run this command:</p><div class="verbatim-wrap"><pre class="screen">$ openstack extension list --network</pre></div><p>The command shows the <code class="literal">quotas</code> extension, which provides
per-project quota management support.</p><div id="id-1.4.16.15.10.6.6.2.5" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note</h6><p>Many of the extensions shown below are supported in the Mitaka release and later.</p></div><div class="verbatim-wrap"><pre class="screen">+------------------------+------------------------+--------------------------+
| Name                   | Alias                  | Description              |
+------------------------+------------------------+--------------------------+
| ...                    | ...                    | ...                      |
| Quota management       | quotas                 | Expose functions for     |
| support                |                        | quotas management per    |
|                        |                        | tenant                   |
| ...                    | ...                    | ...                      |
+------------------------+------------------------+--------------------------+</pre></div></li><li class="step "><p>Show information for the quotas extension.</p><p>To show information for the <code class="literal">quotas</code> extension, run this command:</p><div class="verbatim-wrap"><pre class="screen">$ neutron ext-show quotas
+-------------+------------------------------------------------------------+
| Field       | Value                                                      |
+-------------+------------------------------------------------------------+
| alias       | quotas                                                     |
| description | Expose functions for quotas management per tenant          |
| links       |                                                            |
| name        | Quota management support                                   |
| namespace   | http://docs.openstack.org/network/ext/quotas-sets/api/v2.0 |
| updated     | 2012-07-29T10:00:00-00:00                                  |
+-------------+------------------------------------------------------------+</pre></div><div id="id-1.4.16.15.10.6.6.3.4" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note</h6><p>Only some plug-ins support per-project quotas.
Specifically, Open vSwitch, Linux Bridge, and VMware NSX
support them, but new versions of other plug-ins might
bring additional functionality. See the documentation for
each plug-in.</p></div></li><li class="step "><p>List projects who have per-project quota support.</p><p>The <code class="command">neutron quota-list</code> command lists projects for which the
per-project quota is enabled. The command does not list projects with
default quota support. You must be an administrative user to run this
command:</p><div class="verbatim-wrap"><pre class="screen">$ neutron quota-list
+------------+---------+------+--------+--------+----------------------------------+
| floatingip | network | port | router | subnet | tenant_id                        |
+------------+---------+------+--------+--------+----------------------------------+
|         20 |       5 |   20 |     10 |      5 | 6f88036c45344d9999a1f971e4882723 |
|         25 |      10 |   30 |     10 |     10 | bff5c9455ee24231b5bc713c1b96d422 |
+------------+---------+------+--------+--------+----------------------------------+</pre></div></li><li class="step "><p>Show per-project quota values.</p><p>The <code class="command">neutron quota-show</code> command reports the current
set of quota limits for the specified project.
Non-administrative users can run this command without the
<code class="literal">--tenant_id</code> parameter. If per-project quota limits are
not enabled for the project, the command shows the default
set of quotas.</p><div id="id-1.4.16.15.10.6.6.5.3" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note</h6><p>Additional quotas added in the Mitaka release include <code class="literal">security_group</code>,
<code class="literal">security_group_rule</code>, <code class="literal">subnet</code>, and <code class="literal">subnetpool</code>.</p></div><div class="verbatim-wrap"><pre class="screen">$ neutron quota-show --tenant_id 6f88036c45344d9999a1f971e4882723
+---------------------+-------+
| Field               | Value |
+---------------------+-------+
| floatingip          | 50    |
| network             | 10    |
| port                | 50    |
| rbac_policy         | 10    |
| router              | 10    |
| security_group      | 10    |
| security_group_rule | 100   |
| subnet              | 10    |
| subnetpool          | -1    |
+---------------------+-------+</pre></div><p>The following command shows the command output for a
non-administrative user.</p><div class="verbatim-wrap"><pre class="screen">$ neutron quota-show
+---------------------+-------+
| Field               | Value |
+---------------------+-------+
| floatingip          | 50    |
| network             | 10    |
| port                | 50    |
| rbac_policy         | 10    |
| router              | 10    |
| security_group      | 10    |
| security_group_rule | 100   |
| subnet              | 10    |
| subnetpool          | -1    |
+---------------------+-------+</pre></div></li><li class="step "><p>Update quota values for a specified project.</p><p>Use the <code class="command">neutron quota-update</code> command to
update a quota for a specified project.</p><div class="verbatim-wrap"><pre class="screen">$ neutron quota-update --tenant_id 6f88036c45344d9999a1f971e4882723 --network 5
+---------------------+-------+
| Field               | Value |
+---------------------+-------+
| floatingip          | 50    |
| network             | 5     |
| port                | 50    |
| rbac_policy         | 10    |
| router              | 10    |
| security_group      | 10    |
| security_group_rule | 100   |
| subnet              | 10    |
| subnetpool          | -1    |
+---------------------+-------+</pre></div><p>You can update quotas for multiple resources through one
command.</p><div class="verbatim-wrap"><pre class="screen">$ neutron quota-update --tenant_id 6f88036c45344d9999a1f971e4882723 --subnet 5 --port 20
+---------------------+-------+
| Field               | Value |
+---------------------+-------+
| floatingip          | 50    |
| network             | 5     |
| port                | 20    |
| rbac_policy         | 10    |
| router              | 10    |
| security_group      | 10    |
| security_group_rule | 100   |
| subnet              | 5     |
| subnetpool          | -1    |
+---------------------+-------+</pre></div><p>To update the limits for an L3 resource such as, router
or floating IP, you must define new values for the quotas
after the <code class="literal">--</code> directive.</p><p>This example updates the limit of the number of floating
IPs for the specified project.</p><div class="verbatim-wrap"><pre class="screen">$ neutron quota-update --tenant_id 6f88036c45344d9999a1f971e4882723 --floatingip 20
+---------------------+-------+
| Field               | Value |
+---------------------+-------+
| floatingip          | 20    |
| network             | 5     |
| port                | 20    |
| rbac_policy         | 10    |
| router              | 10    |
| security_group      | 10    |
| security_group_rule | 100   |
| subnet              | 5     |
| subnetpool          | -1    |
+---------------------+-------+</pre></div><p>You can update the limits of multiple resources by
including L2 resources and L3 resource through one
command:</p><div class="verbatim-wrap"><pre class="screen">$ neutron quota-update --tenant_id 6f88036c45344d9999a1f971e4882723 \
  --network 3 --subnet 3 --port 3 --floatingip 3 --router 3
+---------------------+-------+
| Field               | Value |
+---------------------+-------+
| floatingip          | 3     |
| network             | 3     |
| port                | 3     |
| rbac_policy         | 10    |
| router              | 3     |
| security_group      | 10    |
| security_group_rule | 100   |
| subnet              | 3     |
| subnetpool          | -1    |
+---------------------+-------+</pre></div></li><li class="step "><p>Delete per-project quota values.</p><p>To clear per-project quota limits, use the
<code class="command">neutron quota-delete</code> command.</p><div class="verbatim-wrap"><pre class="screen">$ neutron quota-delete --tenant_id 6f88036c45344d9999a1f971e4882723
 Deleted quota: 6f88036c45344d9999a1f971e4882723</pre></div><p>After you run this command, you can see that quota
values for the project are reset to the default values.</p><div class="verbatim-wrap"><pre class="screen">$ neutron quota-show --tenant_id 6f88036c45344d9999a1f971e4882723
+---------------------+-------+
| Field               | Value |
+---------------------+-------+
| floatingip          | 50    |
| network             | 10    |
| port                | 50    |
| rbac_policy         | 10    |
| router              | 10    |
| security_group      | 10    |
| security_group_rule | 100   |
| subnet              | 10     |
| subnetpool          | -1    |
+---------------------+-------+</pre></div></li></ol></div></div></div></div></div><div class="sect1 " id="id-1.4.16.16"><div class="titlepage"><div><div><h2 class="title"><span class="number">14.14 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Analyze log files</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.16">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>Use the swift command-line client for Object Storage to analyze log files.</p><p>The swift client is simple to use, scalable, and flexible.</p><p>Use the swift client <code class="literal">-o</code> or <code class="literal">-output</code> option to get
short answers to questions about logs.</p><p>You can use the <code class="literal">-o</code> or <code class="literal">--output</code> option with a single object
download to redirect the command output to a specific file or to STDOUT
(<code class="literal">-</code>). The ability to redirect the output to STDOUT enables you to
pipe (<code class="literal">|</code>) data without saving it to disk first.</p><div class="sect2 " id="id-1.4.16.16.6"><div class="titlepage"><div><div><h3 class="title"><span class="number">14.14.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Upload and analyze log files</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.16.6">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>This example assumes that <code class="literal">logtest</code> directory contains the
following log files.</p><div class="verbatim-wrap"><pre class="screen">2010-11-16-21_access.log
2010-11-16-22_access.log
2010-11-15-21_access.log
2010-11-15-22_access.log</pre></div><p>Each file uses the following line format.</p><div class="verbatim-wrap"><pre class="screen">Nov 15 21:53:52 lucid64 proxy-server - 127.0.0.1 15/Nov/2010/22/53/52 DELETE /v1/AUTH_cd4f57824deb4248a533f2c28bf156d3/2eefc05599d44df38a7f18b0b42ffedd HTTP/1.0 204 - \
 - test%3Atester%2CAUTH_tkcdab3c6296e249d7b7e2454ee57266ff - - - txaba5984c-aac7-460e-b04b-afc43f0c6571 - 0.0432</pre></div></li><li class="step "><p>Change into the <code class="literal">logtest</code> directory:</p><div class="verbatim-wrap"><pre class="screen">$ cd logtest</pre></div></li><li class="step "><p>Upload the log files into the <code class="literal">logtest</code> container:</p><div class="verbatim-wrap"><pre class="screen">$ swift -A http://swift-auth.com:11000/v1.0 -U test:tester -K testing upload logtest *.log</pre></div><div class="verbatim-wrap"><pre class="screen">2010-11-16-21_access.log
2010-11-16-22_access.log
2010-11-15-21_access.log
2010-11-15-22_access.log</pre></div></li><li class="step "><p>Get statistics for the account:</p><div class="verbatim-wrap"><pre class="screen">$ swift -A http://swift-auth.com:11000/v1.0 -U test:tester -K testing \
-q stat</pre></div><div class="verbatim-wrap"><pre class="screen">Account: AUTH_cd4f57824deb4248a533f2c28bf156d3
Containers: 1
Objects: 4
Bytes: 5888268</pre></div></li><li class="step "><p>Get statistics for the <code class="literal">logtest</code> container:</p><div class="verbatim-wrap"><pre class="screen">$ swift -A http://swift-auth.com:11000/v1.0 -U test:tester -K testing \
stat logtest</pre></div><div class="verbatim-wrap"><pre class="screen">Account: AUTH_cd4f57824deb4248a533f2c28bf156d3
Container: logtest
Objects: 4
Bytes: 5864468
Read ACL:
Write ACL:</pre></div></li><li class="step "><p>List all objects in the logtest container:</p><div class="verbatim-wrap"><pre class="screen">$ swift -A http:///swift-auth.com:11000/v1.0 -U test:tester -K testing \
list logtest</pre></div><div class="verbatim-wrap"><pre class="screen">2010-11-15-21_access.log
2010-11-15-22_access.log
2010-11-16-21_access.log
2010-11-16-22_access.log</pre></div></li></ol></div></div></div><div class="sect2 " id="id-1.4.16.16.7"><div class="titlepage"><div><div><h3 class="title"><span class="number">14.14.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Download and analyze an object</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.16.7">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>This example uses the <code class="literal">-o</code> option and a hyphen (<code class="literal">-</code>) to get
information about an object.</p><p>Use the <code class="command">swift download</code> command to download the object. On this
command, stream the output to <code class="literal">awk</code> to break down requests by return
code and the date <code class="literal">2200 on November 16th, 2010</code>.</p><p>Using the log line format, find the request type in column 9 and the
return code in column 12.</p><p>After <code class="literal">awk</code> processes the output, it pipes it to <code class="literal">sort</code> and <code class="literal">uniq
-c</code> to sum up the number of occurrences for each request type and
return code combination.</p><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>Download an object:</p><div class="verbatim-wrap"><pre class="screen">$ swift -A http://swift-auth.com:11000/v1.0 -U test:tester -K testing \
     download -o - logtest 2010-11-16-22_access.log | awk '{ print \
     $9""$12}' | sort | uniq -c</pre></div><div class="verbatim-wrap"><pre class="screen">805 DELETE-204
12 DELETE-404
2 DELETE-409
723 GET-200
142 GET-204
74 GET-206
80 GET-304
34 GET-401
5 GET-403
18 GET-404
166 GET-412
2 GET-416
50 HEAD-200
17 HEAD-204
20 HEAD-401
8 HEAD-404
30 POST-202
25 POST-204
22 POST-400
6 POST-404
842 PUT-201
2 PUT-202
32 PUT-400
4 PUT-403
4 PUT-404
2 PUT-411
6 PUT-412
6 PUT-413
2 PUT-422
8 PUT-499</pre></div></li><li class="step "><p>Discover how many PUT requests are in each log file.</p><p>Use a bash for loop with awk and swift with the <code class="literal">-o</code> or
<code class="literal">--output</code> option and a hyphen (<code class="literal">-</code>) to discover how many
PUT requests are in each log file.</p><p>Run the <code class="command">swift list</code> command to list objects in the logtest
container. Then, for each item in the list, run the
<code class="command">swift download -o -</code> command. Pipe the output into grep to
filter the PUT requests. Finally, pipe into <code class="literal">wc -l</code> to count the lines.</p><div class="verbatim-wrap"><pre class="screen">$ for f in `swift -A http://swift-auth.com:11000/v1.0 -U test:tester \
 -K testing list logtest` ; \
        do  echo -ne "PUTS - " ; swift -A \
        http://swift-auth.com:11000/v1.0 -U test:tester \
        -K testing download -o -  logtest $f | grep PUT | wc -l ; \
    done</pre></div><div class="verbatim-wrap"><pre class="screen">2010-11-15-21_access.log - PUTS - 402
2010-11-15-22_access.log - PUTS - 1091
2010-11-16-21_access.log - PUTS - 892
2010-11-16-22_access.log - PUTS - 910</pre></div></li><li class="step "><p>List the object names that begin with a specified string.</p></li><li class="step "><p>Run the <code class="command">swift list -p 2010-11-15</code> command to list objects
in the logtest container that begin with the <code class="literal">2010-11-15</code> string.</p></li><li class="step "><p>For each item in the list, run the <code class="command">swift download -o -</code> command.</p></li><li class="step "><p>Pipe the output to <code class="command">grep</code> and <code class="command">wc</code>.
Use the <code class="command">echo</code> command to display the object name.</p><div class="verbatim-wrap"><pre class="screen">$ for f in `swift -A http://swift-auth.com:11000/v1.0 -U test:tester \
 -K testing list -p 2010-11-15 logtest` ; \
        do  echo -ne "$f - PUTS - " ; swift -A \
        http://127.0.0.1:11000/v1.0 -U test:tester \
        -K testing download -o - logtest $f | grep PUT | wc -l ; \
      done</pre></div><div class="verbatim-wrap"><pre class="screen">2010-11-15-21_access.log - PUTS - 402
2010-11-15-22_access.log - PUTS - 910</pre></div></li></ol></div></div></div></div><div class="sect1 " id="id-1.4.16.17"><div class="titlepage"><div><div><h2 class="title"><span class="number">14.15 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Manage Block Storage scheduling</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.17">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>As an administrative user, you have some control over which volume
back end your volumes reside on. You can specify affinity or
anti-affinity between two volumes. Affinity between volumes means
that they are stored on the same back end, whereas anti-affinity
means that they are stored on different back ends.</p><p>For information on how to set up multiple back ends for Cinder,
refer to <a class="xref" href="bk02ch07.html#multi-backend" title="7.2.4. Configure multiple-storage back ends">Section 7.2.4, “Configure multiple-storage back ends”</a>.</p><div class="sect2 " id="id-1.4.16.17.4"><div class="titlepage"><div><div><h3 class="title"><span class="number">14.15.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Example Usages</span> <a title="Permalink" class="permalink" href="osadm-os-cli.html#id-1.4.16.17.4">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>Create a new volume on the same back end as Volume_A:</p><div class="verbatim-wrap"><pre class="screen">$ openstack volume create --hint same_host=Volume_A-UUID \
  --size SIZE VOLUME_NAME</pre></div></li><li class="step "><p>Create a new volume on a different back end than Volume_A:</p><div class="verbatim-wrap"><pre class="screen">$ openstack volume create --hint different_host=Volume_A-UUID \
  --size SIZE VOLUME_NAME</pre></div></li><li class="step "><p>Create a new volume on the same back end as Volume_A and Volume_B:</p><div class="verbatim-wrap"><pre class="screen">$ openstack volume create --hint same_host=Volume_A-UUID \
  --hint same_host=Volume_B-UUID --size SIZE VOLUME_NAME</pre></div><p>Or:</p><div class="verbatim-wrap"><pre class="screen">$ openstack volume create --hint same_host="[Volume_A-UUID, \
  Volume_B-UUID]" --size SIZE VOLUME_NAME</pre></div></li><li class="step "><p>Create a new volume on a different back end than both Volume_A and
Volume_B:</p><div class="verbatim-wrap"><pre class="screen">$ openstack volume create --hint different_host=Volume_A-UUID \
  --hint different_host=Volume_B-UUID --size SIZE VOLUME_NAME</pre></div><p>Or:</p><div class="verbatim-wrap"><pre class="screen">$ openstack volume create --hint different_host="[Volume_A-UUID, \
  Volume_B-UUID]" --size SIZE VOLUME_NAME</pre></div></li></ol></div></div></div></div></div></div><div class="page-bottom"><div id="_bottom-navigation"><a class="nav-link" href="bk02ch15.html"><span class="next-icon">→</span><span class="nav-label"><span class="number">Chapter 15 </span>Cross-project features</span></a><a class="nav-link" href="bk02ch13.html"><span class="prev-icon">←</span><span class="nav-label"><span class="number">Chapter 13 </span>Orchestration</span></a></div><div class="_share-print"><div class="online-contents share"><strong>Share this page: </strong><span class="share-buttons"><span class="_share-fb bottom-button">Facebook</span><span class="spacer"> • </span><span class="_share-in bottom-button">LinkedIn</span><span class="spacer"> • </span><span class="_share-tw bottom-button">Twitter</span><span class="spacer"> • </span><span class="_share-mail bottom-button">E-Mail</span></span></div><div class="print"><span class="_print-button bottom-button">Print this page</span></div><div class="clearme"></div></div></div></div><div id="_inward"></div></div><div id="_footer-wrap"><div id="_footer"><p>©
        2021 
        SUSE</p><ul><li><a href="https://jobs.suse.com/" target="_top">Careers</a></li><li><a href="https://www.suse.com/company/legal/" target="_top">Legal</a></li><li><a href="https://www.suse.com/company/about/" target="_top">About</a></li><li><a href="https://www.suse.com/contact/" target="_top">Contact Us</a></li></ul></div></div></body></html>