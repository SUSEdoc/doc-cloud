<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Telemetry | OpenStack Administrator Guide | SUSE OpenStack Cloud 8</title><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" /><link rel="stylesheet" type="text/css" href="static/css/style.css" /><link rel="stylesheet" type="text/css" href="static/css/highlight.css" />
<meta name="title" content="Telemetry | SUSE OpenStack Cloud 8" />
<meta name="description" content="Even in the cloud industry, providers must use a multi-step process for billing. The required steps to bill for usage in a cloud environment are metering, rati…" />
<meta name="product-name" content="SUSE OpenStack Cloud" />
<meta name="product-number" content="8" />
<meta name="book-title" content="OpenStack Administrator Guide" />
<meta name="chapter-title" content="Chapter 10. Telemetry" />
<meta name="tracker-url" content="https://bugzilla.suse.com/enter_bug.cgi" />
<meta name="tracker-type" content="bsc" />
<meta name="tracker-bsc-component" content="Documentation" />
<meta name="tracker-bsc-product" content="SUSE OpenStack Cloud 8" />
<meta property="og:title" content="Telemetry | SUSE OpenStack Cloud 8" />
<meta property="og:description" content="Even in the cloud industry, providers must use a multi-step process for billing. The required steps to bill for usage in a cloud environment are metering, rati…" />
<meta property="og:type" content="article" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="Telemetry | SUSE OpenStack Cloud 8" />
<meta name="twitter:description" content="Even in the cloud industry, providers must use a multi-step process for billing. The required steps to bill for usage in a cloud environment are metering, rati…" />
<link rel="home" href="index.html" title="SUSE OpenStack Cloud Crowbar 8 Documentation" /><link rel="up" href="book-upstream-admin.html" title="OpenStack Administrator Guide" /><link rel="prev" href="networking.html" title="Chapter 9. Networking" /><link rel="next" href="bk02ch11.html" title="Chapter 11. Database" />
<script type="text/javascript">

if ( window.location.protocol.toLowerCase() != 'file:' ) {
  document.write('<link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"></link>');
};

</script><noscript><link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css" /></noscript><script src="static/js/jquery-1.10.2.min.js" type="text/javascript"></script><script src="static/js/script.js" type="text/javascript"></script><script src="static/js/highlight.min.js" type="text/javascript"></script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script></head><body class="draft offline js-off" onload="$('#betawarn-button-wrap').toggle();if (document.cookie.length > 0) {if (document.cookie.indexOf('betawarn=closed') != -1){$('#betawarn').toggle()}};"><div id="betawarn" style="position:fixed;bottom:0;z-index:9025;background-color:#FDE8E8;padding:1em;margin-left:10%;margin-right:10%;display:block;border-top:.75em solid #E11;width:80%"><p style="color:#333;margin:1em 0;padding:0;">This is a draft document that was built and uploaded automatically. It may document beta software and be incomplete or even incorrect. <strong>Use this document at your own risk.</strong></p> <div id="betawarn-button-wrap" style="display:none;margin:0;padding:0;"><a href="#" onclick="$('#betawarn').toggle();var d=new Date();d.setTime(d.getTime()+(0.5*24*60*60*1000));document.cookie='betawarn=closed; expires='+d.toUTCString()+'; path=/'; return false;" style="color:#333;text-decoration:underline;float:left;margin-top:.5em;padding:1em;display:block;background-color:#FABEBE;">I understand this is a draft</a></div></div><div class="bypass-block"><a href="#_content">Jump to content</a><a href="#_bottom-navigation">Jump to page navigation: previous page [access key p]/next page [access key n]</a></div><div id="_outer-wrap"><div id="_white-bg" style="background-color: #E11;"><div id="_header"><div id="_logo"><img src="static/images/logo.svg" alt="Logo" /></div><div class="crumbs"><a class="book-link" href="index.html" title="OpenStack Administrator Guide"><span class="book-icon">OpenStack Administrator Guide</span></a><span> › </span><a class="crumb" href="bk02ch10.html">Telemetry</a></div><div class="clearme"></div></div></div><div id="_toolbar-wrap"><div id="_toolbar"><div id="_toc-area" class="inactive"><a id="_toc-area-button" class="tool" title="Contents" accesskey="c" href="index.html"><span class="tool-spacer"><span class="toc-icon">Contents</span><span class="clearme"></span></span><span class="tool-label">Contents</span></a><div class="active-contents bubble-corner"></div><div class="active-contents bubble"><div class="bubble-container"><h6>OpenStack Administrator Guide</h6><div id="_bubble-toc"><ol><li class="inactive"><a href="bk02ch01.html"><span class="number">1 </span><span class="name">Documentation Conventions</span></a></li><li class="inactive"><a href="bk02ch02.html"><span class="number">2 </span><span class="name">Get started with OpenStack</span></a></li><li class="inactive"><a href="cha-identity.html"><span class="number">3 </span><span class="name">Identity management</span></a></li><li class="inactive"><a href="bk02ch04.html"><span class="number">4 </span><span class="name">Dashboard</span></a></li><li class="inactive"><a href="bk02ch05.html"><span class="number">5 </span><span class="name">Compute</span></a></li><li class="inactive"><a href="bk02ch06.html"><span class="number">6 </span><span class="name">Object Storage</span></a></li><li class="inactive"><a href="bk02ch07.html"><span class="number">7 </span><span class="name">Block Storage</span></a></li><li class="inactive"><a href="bk02ch08.html"><span class="number">8 </span><span class="name">Shared File Systems</span></a></li><li class="inactive"><a href="networking.html"><span class="number">9 </span><span class="name">Networking</span></a></li><li class="inactive"><a href="bk02ch10.html"><span class="number">10 </span><span class="name">Telemetry</span></a></li><li class="inactive"><a href="bk02ch11.html"><span class="number">11 </span><span class="name">Database</span></a></li><li class="inactive"><a href="bk02ch12.html"><span class="number">12 </span><span class="name">Bare Metal</span></a></li><li class="inactive"><a href="bk02ch13.html"><span class="number">13 </span><span class="name">Orchestration</span></a></li><li class="inactive"><a href="osadm-os-cli.html"><span class="number">14 </span><span class="name">OpenStack command-line clients</span></a></li><li class="inactive"><a href="bk02ch15.html"><span class="number">15 </span><span class="name">Cross-project features</span></a></li><li class="inactive"><a href="bk02ch16.html"><span class="number">16 </span><span class="name">Appendix</span></a></li><li class="inactive"><a href="bk02go01.html"><span class="number"> </span><span class="name">Glossary</span></a></li></ol></div><div class="clearme"></div></div></div></div><div id="_nav-area" class="inactive"><div class="tool"><span class="nav-inner"><span class="tool-label">Navigation</span><a accesskey="p" class="tool-spacer" title="Chapter 9. Networking" href="networking.html"><span class="prev-icon">←</span></a><a accesskey="n" class="tool-spacer" title="Chapter 11. Database" href="bk02ch11.html"><span class="next-icon">→</span></a></span></div></div></div></div><div id="_fixed-header-wrap" style="background-color: #E11;" class="inactive"><div id="_fixed-header"><div class="crumbs"><a class="book-link" href="index.html" title="OpenStack Administrator Guide"><span class="book-icon">OpenStack Administrator Guide</span></a><span> › </span><a class="crumb" href="bk02ch10.html">Telemetry</a></div><div class="buttons"><a class="top-button button" href="#">Top</a><div class="button"><a accesskey="p" class="tool-spacer" title="Chapter 9. Networking" href="networking.html"><span class="prev-icon">←</span></a><a accesskey="n" class="tool-spacer" title="Chapter 11. Database" href="bk02ch11.html"><span class="next-icon">→</span></a></div><div class="clearme"></div></div><div class="clearme"></div></div></div><div id="_content" class="draft "><div class="documentation"><div class="chapter " id="id-1.4.12"><div class="titlepage"><div><div class="version-info">Applies to  <span class="productname ">SUSE OpenStack Cloud</span> <span class="productnumber ">8</span></div><div><h1 class="title"><span class="number">10 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Telemetry</span> <a title="Permalink" class="permalink" href="bk02ch10.html#">#</a></h1><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="bk02ch10.html#telemetry-system-architecture"><span class="number">10.1 </span><span class="name">System architecture</span></a></span></dt><dt><span class="sect1"><a href="bk02ch10.html#telemetry-data-collection"><span class="number">10.2 </span><span class="name">Data collection</span></a></span></dt><dt><span class="sect1"><a href="bk02ch10.html#data-collection-and-processing"><span class="number">10.3 </span><span class="name">Data collection, processing, and pipelines</span></a></span></dt><dt><span class="sect1"><a href="bk02ch10.html#id-1.4.12.12"><span class="number">10.4 </span><span class="name">Data retrieval</span></a></span></dt><dt><span class="sect1"><a href="bk02ch10.html#telemetry-alarms"><span class="number">10.5 </span><span class="name">Alarms</span></a></span></dt><dt><span class="sect1"><a href="bk02ch10.html#telemetry-measurements"><span class="number">10.6 </span><span class="name">Measurements</span></a></span></dt><dt><span class="sect1"><a href="bk02ch10.html#id-1.4.12.15"><span class="number">10.7 </span><span class="name">Events</span></a></span></dt><dt><span class="sect1"><a href="bk02ch10.html#id-1.4.12.16"><span class="number">10.8 </span><span class="name">Troubleshoot Telemetry</span></a></span></dt><dt><span class="sect1"><a href="bk02ch10.html#id-1.4.12.17"><span class="number">10.9 </span><span class="name">Telemetry best practices</span></a></span></dt></dl></div></div><p>Even in the cloud industry, providers must use a multi-step process
for billing. The required steps to bill for usage in a cloud
environment are metering, rating, and billing. Because the provider's
requirements may be far too specific for a shared solution, rating
and billing solutions cannot be designed in a common module that
satisfies all. Providing users with measurements on cloud services is
required to meet the <code class="literal">measured service</code> definition of cloud computing.</p><p>The Telemetry service was originally designed to support billing
systems for OpenStack cloud resources. This project only covers the
metering portion of the required processing for billing. This service
collects information about the system and stores it in the form of
samples in order to provide data about anything that can be billed.</p><p>In addition to system measurements, the Telemetry service also
captures event notifications triggered when various actions are
executed in the OpenStack system. This data is captured as Events and
stored alongside metering data.</p><p>The list of meters is continuously growing, which makes it possible
to use the data collected by Telemetry for different purposes, other
than billing. For example, the autoscaling feature in the
Orchestration service can be triggered by alarms this module sets and
then gets notified within Telemetry.</p><p>The sections in this document contain information about the
architecture and usage of Telemetry. The first section contains a
brief summary about the system architecture used in a typical
OpenStack deployment. The second section describes the data
collection mechanisms. You can also read about alarming to understand
how alarm definitions can be posted to Telemetry and what actions can
happen if an alarm is raised. The last section contains a
troubleshooting guide, which mentions error situations and possible
solutions to the problems.</p><p>You can retrieve the collected samples in three different ways: with
the REST API, with the command-line interface, or with the Metering
tab on an OpenStack dashboard.</p><div class="sect1 " id="telemetry-system-architecture"><div class="titlepage"><div><div><h2 class="title"><span class="number">10.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">System architecture</span> <a title="Permalink" class="permalink" href="bk02ch10.html#telemetry-system-architecture">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span>telemetry-system-architecture</li></ul></div></div></div></div><p>The Telemetry service uses an agent-based architecture. Several modules
combine their responsibilities to collect data, store samples in a
database, or provide an API service for handling incoming requests.</p><p>The Telemetry service is built from the following agents and services:</p><div class="variablelist "><dl class="variablelist"><dt id="id-1.4.12.9.4.1"><span class="term ">ceilometer-api</span></dt><dd><p>Presents aggregated metering data to consumers (such as billing
engines and analytics tools).</p></dd><dt id="id-1.4.12.9.4.2"><span class="term ">ceilometer-polling</span></dt><dd><p>Polls for different kinds of meter data by using the polling
plug-ins (pollsters) registered in different namespaces. It provides a
single polling interface across different namespaces.</p></dd><dt id="id-1.4.12.9.4.3"><span class="term ">ceilometer-agent-central</span></dt><dd><p>Polls the public RESTful APIs of other OpenStack services such as
Compute service and Image service, in order to keep tabs on resource
existence, by using the polling plug-ins (pollsters) registered in
the central polling namespace.</p></dd><dt id="id-1.4.12.9.4.4"><span class="term ">ceilometer-agent-compute</span></dt><dd><p>Polls the local hypervisor or libvirt daemon to acquire performance
data for the local instances, messages and emits the data as AMQP
messages, by using the polling plug-ins (pollsters) registered in
the compute polling namespace.</p></dd><dt id="id-1.4.12.9.4.5"><span class="term ">ceilometer-agent-ipmi</span></dt><dd><p>Polls the local node with IPMI support, in order to acquire IPMI
sensor data and Intel Node Manager data, by using the polling
plug-ins (pollsters) registered in the IPMI polling namespace.</p></dd><dt id="id-1.4.12.9.4.6"><span class="term ">ceilometer-agent-notification</span></dt><dd><p>Consumes AMQP messages from other OpenStack services.</p></dd><dt id="id-1.4.12.9.4.7"><span class="term ">ceilometer-collector</span></dt><dd><p>Consumes AMQP notifications from the agents, then dispatches these
data to the appropriate data store.</p></dd><dt id="id-1.4.12.9.4.8"><span class="term ">ceilometer-alarm-evaluator</span></dt><dd><p>Determines when alarms fire due to the associated statistic trend
crossing a threshold over a sliding time window.</p></dd><dt id="id-1.4.12.9.4.9"><span class="term ">ceilometer-alarm-notifier</span></dt><dd><p>Initiates alarm actions, for example calling out to a webhook with a
description of the alarm state transition.</p><div id="id-1.4.12.9.4.9.2.2" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note</h6><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>The <code class="literal">ceilometer-polling</code> service is available since the Kilo release.
It is intended to replace <code class="literal">ceilometer-agent-central</code>,
<code class="literal">ceilometer-agent-compute</code>, and <code class="literal">ceilometer-agent-ipmi</code>.</p></li><li class="step "><p>The <code class="literal">ceilometer-alarm-evaluator</code> and <code class="literal">ceilometer-alarm-notifier</code>
services are removed in Mitaka release.</p></li></ol></div></div></div></dd></dl></div><p>Except for the <code class="literal">ceilometer-agent-compute</code> and the <code class="literal">ceilometer-agent-ipmi</code>
services, all the other services are placed on one or more controller
nodes.</p><p>The Telemetry architecture highly depends on the AMQP service both for
consuming notifications coming from OpenStack services and internal
communication.</p><div class="sect2 " id="telemetry-supported-databases"><div class="titlepage"><div><div><h3 class="title"><span class="number">10.1.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Supported databases</span> <a title="Permalink" class="permalink" href="bk02ch10.html#telemetry-supported-databases">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span>telemetry-supported-databases</li></ul></div></div></div></div><p>The other key external component of Telemetry is the database, where
events, samples, alarm definitions, and alarms are stored.</p><div id="id-1.4.12.9.7.3" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note</h6><p>Multiple database back ends can be configured in order to store
events, samples, and alarms separately. We recommend Gnocchi for
time-series storage.</p></div><p>The list of supported database back ends:</p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
              <a class="link" href="http://gnocchi.xyz/" target="_blank">Gnocchi</a>
            </p></li><li class="listitem "><p>
              <a class="link" href="https://www.elastic.co/" target="_blank">ElasticSearch (events only)</a>
            </p></li><li class="listitem "><p>
              <a class="link" href="https://www.mongodb.org/" target="_blank">MongoDB</a>
            </p></li><li class="listitem "><p>
              <a class="link" href="http://www.mysql.com/" target="_blank">MySQL</a>
            </p></li><li class="listitem "><p>
              <a class="link" href="http://www.postgresql.org/" target="_blank">PostgreSQL</a>
            </p></li><li class="listitem "><p>
              <a class="link" href="http://hbase.apache.org/" target="_blank">HBase</a>
            </p></li></ul></div></div><div class="sect2 " id="telemetry-supported-hypervisors"><div class="titlepage"><div><div><h3 class="title"><span class="number">10.1.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Supported hypervisors</span> <a title="Permalink" class="permalink" href="bk02ch10.html#telemetry-supported-hypervisors">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span>telemetry-supported-hypervisors</li></ul></div></div></div></div><p>The Telemetry service collects information about the virtual machines,
which requires close connection to the hypervisor that runs on the
compute hosts.</p><p>The following is a list of supported hypervisors.</p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>The following hypervisors are supported via <a class="link" href="http://libvirt.org/" target="_blank">libvirt</a></p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
                  <a class="link" href="http://www.linux-kvm.org/page/Main_Page" target="_blank">Kernel-based Virtual Machine (KVM)</a>
                </p></li><li class="listitem "><p>
                  <a class="link" href="http://wiki.qemu.org/Main_Page" target="_blank">Quick Emulator (QEMU)</a>
                </p></li><li class="listitem "><p>
                  <a class="link" href="https://linuxcontainers.org/" target="_blank">Linux Containers (LXC)</a>
                </p></li><li class="listitem "><p>
                  <a class="link" href="http://user-mode-linux.sourceforge.net/" target="_blank">User-mode Linux (UML)</a>
                </p></li></ul></div><div id="id-1.4.12.9.8.4.1.3" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note</h6><p>For details about hypervisor support in libvirt please check the
<a class="link" href="http://libvirt.org/hvsupport.html" target="_blank">Libvirt API support matrix</a>.</p></div></li><li class="listitem "><p>
              <a class="link" href="http://www.xenproject.org/help/documentation.html" target="_blank">XEN</a>
            </p></li><li class="listitem "><p>
              <a class="link" href="http://www.vmware.com/products/vsphere-hypervisor/support.html" target="_blank">VMware vSphere</a>
            </p></li></ul></div></div><div class="sect2 " id="id-1.4.12.9.9"><div class="titlepage"><div><div><h3 class="title"><span class="number">10.1.3 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Supported networking services</span> <a title="Permalink" class="permalink" href="bk02ch10.html#id-1.4.12.9.9">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>Telemetry is able to retrieve information from OpenStack Networking and
external networking services:</p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>OpenStack Networking:</p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>Basic network meters</p></li><li class="listitem "><p>Firewall-as-a-Service (FWaaS) meters</p></li><li class="listitem "><p>Load-Balancer-as-a-Service (LBaaS) meters</p></li><li class="listitem "><p>VPN-as-a-Service (VPNaaS) meters</p></li></ul></div></li><li class="listitem "><p>SDN controller meters:</p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
                  <a class="link" href="https://www.opendaylight.org/" target="_blank">OpenDaylight</a>
                </p></li><li class="listitem "><p>
                  <a class="link" href="http://www.opencontrail.org/" target="_blank">OpenContrail</a>
                </p></li></ul></div></li></ul></div></div><div class="sect2 " id="telemetry-users-roles-projects"><div class="titlepage"><div><div><h3 class="title"><span class="number">10.1.4 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Users, roles, and projects</span> <a title="Permalink" class="permalink" href="bk02ch10.html#telemetry-users-roles-projects">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span>telemetry-users-roles-projects</li></ul></div></div></div></div><p>This service of OpenStack uses OpenStack Identity for authenticating and
authorizing users. The required configuration options are listed in the
<a class="link" href="http://docs.openstack.org/newton/config-reference/telemetry.html" target="_blank">Telemetry
section</a>
in the OpenStack Configuration Reference.</p><p>The system uses two roles:<code class="literal">admin</code> and <code class="literal">non-admin</code>. The authorization
happens before processing each API request. The amount of returned data
depends on the role the requestor owns.</p><p>The creation of alarm definitions also highly depends on the role of the
user, who initiated the action. Further details about <a class="xref" href="bk02ch10.html#telemetry-alarms" title="10.5. Alarms">Section 10.5, “Alarms”</a>
handling can be found in this guide.</p></div></div><div class="sect1 " id="telemetry-data-collection"><div class="titlepage"><div><div><h2 class="title"><span class="number">10.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Data collection</span> <a title="Permalink" class="permalink" href="bk02ch10.html#telemetry-data-collection">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span>telemetry-data-collection</li></ul></div></div></div></div><p>The main responsibility of Telemetry in OpenStack is to collect
information about the system that can be used by billing systems or
interpreted by analytic tooling. Telemetry in OpenStack originally focused
on the counters used for billing, and the recorded range is
continuously growing wider.</p><p>Collected data can be stored in the form of samples or events in the
supported databases, which are listed
in <a class="xref" href="bk02ch10.html#telemetry-supported-databases" title="10.1.1. Supported databases">Section 10.1.1, “Supported databases”</a>.</p><p>Samples can have various sources. Sample sources depend on, and adapt to,
the needs and configuration of Telemetry. The Telemetry service requires
multiple methods to collect data samples.</p><p>The available data collection mechanisms are:</p><div class="variablelist "><dl class="variablelist"><dt id="id-1.4.12.10.6.1"><span class="term ">Notifications</span></dt><dd><p>Processing notifications from other OpenStack services, by consuming
messages from the configured message queue system.</p></dd><dt id="id-1.4.12.10.6.2"><span class="term ">Polling</span></dt><dd><p>Retrieve information directly from the hypervisor or from the host
machine using SNMP, or by using the APIs of other OpenStack
services.</p></dd><dt id="id-1.4.12.10.6.3"><span class="term ">RESTful API</span></dt><dd><p>Pushing samples via the RESTful API of Telemetry.</p></dd></dl></div><div class="sect2 " id="id-1.4.12.10.7"><div class="titlepage"><div><div><h3 class="title"><span class="number">10.2.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Notifications</span> <a title="Permalink" class="permalink" href="bk02ch10.html#id-1.4.12.10.7">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>All OpenStack services send notifications about the executed operations
or system state. Several notifications carry information that can be
metered. For example, CPU time of a VM instance created by OpenStack
Compute service.</p><p>The notification agent works alongside, but separately, from the
Telemetry service. The agent is responsible for consuming notifications.
This component is responsible for consuming from the message bus and
transforming notifications into events and measurement samples.</p><p>Since the Liberty release, the notification agent is responsible
for all data processing such as transformations and publishing. After
processing, the data is sent via AMQP to the collector service or any
external service. These external services persist the data in
configured databases.</p><p>The different OpenStack services emit several notifications about the
various types of events that happen in the system during normal
operation. Not all these notifications are consumed by the Telemetry
service, as the intention is only to capture the billable events and
notifications that can be used for monitoring or profiling purposes. The
notification agent filters by the event type. Each notification
message contains the event type. The following table contains the event
types by each OpenStack service that Telemetry transforms into samples.</p><div class="informaltable"><table class="informaltable" border="1"><colgroup><col class="c1" /><col class="c2" /><col class="c3" /></colgroup><thead><tr><th>
                  <p>OpenStack service</p>
                </th><th>
                  <p>Event types</p>
                </th><th>
                  <p>Note</p>
                </th></tr></thead><tbody><tr><td>
                  <p>OpenStack Compute</p>
                </td><td>
                  <p>scheduler.run_instance.scheduled</p>
                  <p>scheduler.select_destinations</p>
                  <p>compute.instance.*</p>
                </td><td>
                  <p>For a more detailed list of Compute notifications please
check the <a class="link" href="https://wiki.openstack.org/wiki/SystemUsageData" target="_blank">System Usage Data wiki page</a>.</p>
                </td></tr><tr><td>
                  <p>Bare metal service</p>
                </td><td>
                  <p>hardware.ipmi.*</p>
                </td><td> </td></tr><tr><td>
                  <p>OpenStack Image</p>
                </td><td>
                  <p>image.update</p>
                  <p>image.upload</p>
                  <p>image.delete</p>
                  <p>image.send</p>
                </td><td>
                  <p>The required configuration for Image service can be  * - service found in
<a class="link" href="http://docs.openstack.org/project-install-guide/telemetry/newton" target="_blank">Configure the Image service for Telemetry</a>
section in the Installation Tutorials and Guides.</p>
                </td></tr><tr><td>
                  <p>OpenStack Networking</p>
                </td><td>
                  <p>floatingip.create.end</p>
                  <p>floatingip.update.*</p>
                  <p>floatingip.exists</p>
                  <p>network.create.end</p>
                  <p>network.update.*</p>
                  <p>network.exists</p>
                  <p>port.create.end</p>
                  <p>port.update.*</p>
                  <p>port.exists</p>
                  <p>router.create.end</p>
                  <p>router.update.*</p>
                  <p>router.exists</p>
                  <p>subnet.create.end</p>
                  <p>subnet.update.*</p>
                  <p>subnet.exists</p>
                  <p>l3.meter</p>
                </td><td> </td></tr><tr><td>
                  <p>Orchestration service</p>
                </td><td>
                  <p>orchestration.stack.create.end</p>
                  <p>orchestration.stack.update.end</p>
                  <p>orchestration.stack.delete.end</p>
                  <p>orchestration.stack.resume.end</p>
                  <p>orchestration.stack.suspend.end</p>
                </td><td> </td></tr><tr><td>
                  <p>OpenStack Block Storage</p>
                </td><td>
                  <p>volume.exists</p>
                  <p>volume.create.*</p>
                  <p>volume.delete.*</p>
                  <p>volume.update.*</p>
                  <p>volume.resize.*</p>
                  <p>volume.attach.*</p>
                  <p>volume.detach.*</p>
                  <p>snapshot.exists</p>
                  <p>snapshot.create.*</p>
                  <p>snapshot.delete.*</p>
                  <p>snapshot.update.*</p>
                  <p>volume.backup.create.*</p>
                  <p>volume.backup.delete.*</p>
                  <p>volume.backup.restore.*</p>
                </td><td>
                  <p>The required configuration for Block Storage service can be found in the
<a class="link" href="http://docs.openstack.org/project-install-guide/telemetry/newton/configure_services/cinder/install-cinder-ubuntu.html" target="_blank">Add the Block Storage service agent for Telemetry section</a>
in the Installation Tutorials and Guides.</p>
                </td></tr></tbody></table></div><div id="id-1.4.12.10.7.7" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note</h6><p>Some services require additional configuration to emit the
notifications using the correct control exchange on the message
queue and so forth. These configuration needs are referred in the
above table for each OpenStack service that needs it.</p></div><p>Specific notifications from the Compute service are important for
administrators and users. Configuring <code class="literal">nova_notifications</code> in the
<code class="literal">nova.conf</code> file allows administrators to respond to events
rapidly. For more information on configuring notifications for the
compute service, see
<a class="link" href="http://docs.openstack.org/project-install-guide/telemetry/newton/configure_services/nova/install-nova-ubuntu.html" target="_blank">Telemetry services</a> in the
Installation Tutorials and Guides.</p><div id="id-1.4.12.10.7.9" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note</h6><p>When the <code class="literal">store_events</code> option is set to <code class="literal">True</code> in
<code class="literal">ceilometer.conf</code>, Prior to the Kilo release, the notification agent
needed database access in order to work properly.</p></div><div class="sect3 " id="id-1.4.12.10.7.10"><div class="titlepage"><div><div><h4 class="title"><span class="number">10.2.1.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Compute agent</span> <a title="Permalink" class="permalink" href="bk02ch10.html#id-1.4.12.10.7.10">#</a></h4><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>This agent is responsible for collecting resource usage data of VM
instances on individual compute nodes within an OpenStack deployment.
This mechanism requires a closer interaction with the hypervisor,
therefore a separate agent type fulfills the collection of the related
meters, which is placed on the host machines to retrieve this
information locally.</p><p>A Compute agent instance has to be installed on each and every compute
node, installation instructions can be found in the <a class="link" href="http://docs.openstack.org/project-install-guide/telemetry/newton/configure_services/nova/install-nova-ubuntu.html" target="_blank">Install the Compute
agent for Telemetry</a>
section in the Installation Tutorials and Guides.</p><p>Just like the central agent, this component also does not need a direct
database connection. The samples are sent via AMQP to the notification agent.</p><p>The list of supported hypervisors can be found in
<a class="xref" href="bk02ch10.html#telemetry-supported-hypervisors" title="10.1.2. Supported hypervisors">Section 10.1.2, “Supported hypervisors”</a>. The Compute agent uses the API of the
hypervisor installed on the compute hosts. Therefore, the supported meters may
be different in case of each virtualization back end, as each inspection tool
provides a different set of meters.</p><p>The list of collected meters can be found in <a class="xref" href="bk02ch10.html#telemetry-compute-meters" title="10.6.1. OpenStack Compute">Section 10.6.1, “OpenStack Compute”</a>.
The support column provides the information about which meter is available for
each hypervisor supported by the Telemetry service.</p><div id="id-1.4.12.10.7.10.7" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note</h6><p>Telemetry supports Libvirt, which hides the hypervisor under it.</p></div></div><div class="sect3 " id="id-1.4.12.10.7.11"><div class="titlepage"><div><div><h4 class="title"><span class="number">10.2.1.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Middleware for the OpenStack Object Storage service</span> <a title="Permalink" class="permalink" href="bk02ch10.html#id-1.4.12.10.7.11">#</a></h4><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>A subset of Object Store statistics requires additional middleware to
be installed behind the proxy of Object Store. This additional component
emits notifications containing data-flow-oriented meters, namely the
<code class="literal">storage.objects.(incoming|outgoing).bytes values</code>. The list of these
meters are listed in <a class="xref" href="bk02ch10.html#telemetry-object-storage-meter" title="10.6.7. OpenStack Object Storage">Section 10.6.7, “OpenStack Object Storage”</a>, marked with
<code class="literal">notification</code> as origin.</p><p>The instructions on how to install this middleware can be found in
<a class="link" href="http://docs.openstack.org/project-install-guide/telemetry/newton/configure_services/swift/install-swift-ubuntu.html" target="_blank">Configure the Object Storage service for Telemetry</a>
section in the Installation Tutorials and Guides.</p></div><div class="sect3 " id="id-1.4.12.10.7.12"><div class="titlepage"><div><div><h4 class="title"><span class="number">10.2.1.3 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Telemetry middleware</span> <a title="Permalink" class="permalink" href="bk02ch10.html#id-1.4.12.10.7.12">#</a></h4><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>Telemetry provides HTTP request and API endpoint counting
capability in OpenStack. This is achieved by
storing a sample for each event marked as <code class="literal">audit.http.request</code>,
<code class="literal">audit.http.response</code>, <code class="literal">http.request</code> or <code class="literal">http.response</code>.</p><p>It is recommended that these notifications be consumed as events rather
than samples to better index the appropriate values and avoid massive
load on the Metering database. If preferred, Telemetry can consume these
events as samples if the services are configured to emit <code class="literal">http.*</code>
notifications.</p></div></div><div class="sect2 " id="id-1.4.12.10.8"><div class="titlepage"><div><div><h3 class="title"><span class="number">10.2.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Polling</span> <a title="Permalink" class="permalink" href="bk02ch10.html#id-1.4.12.10.8">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>The Telemetry service is intended to store a complex picture of the
infrastructure. This goal requires additional information than what is
provided by the events and notifications published by each service. Some
information is not emitted directly, like resource usage of the VM
instances.</p><p>Therefore Telemetry uses another method to gather this data by polling
the infrastructure including the APIs of the different OpenStack
services and other assets, like hypervisors. The latter case requires
closer interaction with the compute hosts. To solve this issue,
Telemetry uses an agent based architecture to fulfill the requirements
against the data collection.</p><p>There are three types of agents supporting the polling mechanism, the
<code class="literal">compute agent</code>, the <code class="literal">central agent</code>, and the <code class="literal">IPMI agent</code>. Under
the hood, all the types of polling agents are the same
<code class="literal">ceilometer-polling</code> agent, except that they load different polling
plug-ins (pollsters) from different namespaces to gather data. The following
subsections give further information regarding the architectural and
configuration details of these components.</p><p>Running <code class="command">ceilometer-agent-compute</code> is exactly the same as:</p><div class="verbatim-wrap"><pre class="screen">$ ceilometer-polling --polling-namespaces compute</pre></div><p>Running <code class="command">ceilometer-agent-central</code> is exactly the same as:</p><div class="verbatim-wrap"><pre class="screen">$ ceilometer-polling --polling-namespaces central</pre></div><p>Running <code class="command">ceilometer-agent-ipmi</code> is exactly the same as:</p><div class="verbatim-wrap"><pre class="screen">$ ceilometer-polling --polling-namespaces ipmi</pre></div><p>In addition to loading all the polling plug-ins registered in the
specified namespaces, the <code class="literal">ceilometer-polling</code> agent can also specify the
polling plug-ins to be loaded by using the <code class="literal">pollster-list</code> option:</p><div class="verbatim-wrap"><pre class="screen">$ ceilometer-polling --polling-namespaces central \
        --pollster-list image image.size storage.*</pre></div><div id="id-1.4.12.10.8.13" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note</h6><p>HA deployment is NOT supported if the <code class="literal">pollster-list</code> option is
used.</p></div><div id="id-1.4.12.10.8.14" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note</h6><p>The <code class="literal">ceilometer-polling</code> service is available since Kilo release.</p></div><div class="sect3 " id="id-1.4.12.10.8.15"><div class="titlepage"><div><div><h4 class="title"><span class="number">10.2.2.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Central agent</span> <a title="Permalink" class="permalink" href="bk02ch10.html#id-1.4.12.10.8.15">#</a></h4><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>This agent is responsible for polling public REST APIs to retrieve additional
information on OpenStack resources not already surfaced via notifications,
and also for polling hardware resources over SNMP.</p><p>The following services can be polled with this agent:</p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>OpenStack Networking</p></li><li class="listitem "><p>OpenStack Object Storage</p></li><li class="listitem "><p>OpenStack Block Storage</p></li><li class="listitem "><p>Hardware resources via SNMP</p></li><li class="listitem "><p>Energy consumption meters via <a class="link" href="https://launchpad.net/kwapi" target="_blank">Kwapi</a>
framework</p></li></ul></div><p>To install and configure this service use the <a class="link" href="http://docs.openstack.org/project-install-guide/telemetry/newton/install-base-ubuntu.html" target="_blank">Add the Telemetry service</a>
section in the Installation Tutorials and Guides.</p><p>The central agent does not need direct database connection. The samples
collected by this agent are sent via AMQP to the notification agent to be
processed.</p><div id="id-1.4.12.10.8.15.7" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note</h6><p>Prior to the Liberty release, data from the polling agents was processed
locally and published accordingly rather than by the notification agent.</p></div></div><div class="sect3 " id="telemetry-ipmi-agent"><div class="titlepage"><div><div><h4 class="title"><span class="number">10.2.2.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">IPMI agent</span> <a title="Permalink" class="permalink" href="bk02ch10.html#telemetry-ipmi-agent">#</a></h4><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span>telemetry-ipmi-agent</li></ul></div></div></div></div><p>This agent is responsible for collecting IPMI sensor data and Intel Node
Manager data on individual compute nodes within an OpenStack deployment.
This agent requires an IPMI capable node with the ipmitool utility installed,
which is commonly used for IPMI control on various Linux distributions.</p><p>An IPMI agent instance could be installed on each and every compute node
with IPMI support, except when the node is managed by the Bare metal
service and the <code class="literal">conductor.send_sensor_data</code> option is set to <code class="literal">true</code>
in the Bare metal service. It is no harm to install this agent on a
compute node without IPMI or Intel Node Manager support, as the agent
checks for the hardware and if none is available, returns empty data. It
is suggested that you install the IPMI agent only on an IPMI capable
node for performance reasons.</p><p>Just like the central agent, this component also does not need direct
database access. The samples are sent via AMQP to the notification agent.</p><p>The list of collected meters can be found in
<a class="xref" href="bk02ch10.html#telemetry-bare-metal-service" title="10.6.2. Bare metal service">Section 10.6.2, “Bare metal service”</a>.</p><div id="id-1.4.12.10.8.16.6" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note</h6><p>Do not deploy both the IPMI agent and the Bare metal service on one
compute node. If <code class="literal">conductor.send_sensor_data</code> is set, this
misconfiguration causes duplicated IPMI sensor samples.</p></div></div></div><div class="sect2 " id="ha-deploy-services"><div class="titlepage"><div><div><h3 class="title"><span class="number">10.2.3 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Support for HA deployment</span> <a title="Permalink" class="permalink" href="bk02ch10.html#ha-deploy-services">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span>ha-deploy-services</li></ul></div></div></div></div><p>Both the polling agents and notification agents can run in an HA deployment,
which means that multiple instances of these services can run in
parallel with workload partitioning among these running instances.</p><p>The <a class="link" href="https://pypi.python.org/pypi/tooz" target="_blank">Tooz</a> library provides the
coordination within the groups of service instances. It provides an API
above several back ends that can be used for building distributed
applications.</p><p>Tooz supports <a class="link" href="http://docs.openstack.org/developer/tooz/drivers.html" target="_blank">various
drivers</a>
including the following back end solutions:</p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p><a class="link" href="http://zookeeper.apache.org/" target="_blank">Zookeeper</a>. Recommended solution by
the Tooz project.</p></li><li class="listitem "><p><a class="link" href="http://redis.io/" target="_blank">Redis</a>. Recommended solution by the Tooz
project.</p></li><li class="listitem "><p><a class="link" href="http://memcached.org/" target="_blank">Memcached</a>. Recommended for testing.</p></li></ul></div><p>You must configure a supported Tooz driver for the HA deployment of the
Telemetry services.</p><p>For information about the required configuration options that have to be
set in the <code class="literal">ceilometer.conf</code> configuration file for both the central
and Compute agents, see the <a class="link" href="http://docs.openstack.org/newton/config-reference/telemetry/telemetry-config-options.html" target="_blank">Coordination section</a>
in the OpenStack Configuration Reference.</p><div class="sect3 " id="id-1.4.12.10.9.8"><div class="titlepage"><div><div><h4 class="title"><span class="number">10.2.3.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Notification agent HA deployment</span> <a title="Permalink" class="permalink" href="bk02ch10.html#id-1.4.12.10.9.8">#</a></h4><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>In the Kilo release, workload partitioning support was added to the
notification agent. This is particularly useful as the pipeline processing
is handled exclusively by the notification agent now which may result
in a larger amount of load.</p><p>To enable workload partitioning by notification agent, the <code class="literal">backend_url</code>
option must be set in the <code class="literal">ceilometer.conf</code> configuration file.
Additionally, <code class="literal">workload_partitioning</code> should be enabled in the
<a class="link" href="http://docs.openstack.org/newton/config-reference/telemetry/telemetry-config-options.html" target="_blank">Notification section</a> in the OpenStack Configuration Reference.</p><div id="id-1.4.12.10.9.8.4" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note</h6><p>In Liberty, the notification agent creates multiple queues to divide the
workload across all active agents. The number of queues can be controlled by
the <code class="literal">pipeline_processing_queues</code> option in the <code class="literal">ceilometer.conf</code>
configuration file. A larger value will result in better distribution of
tasks but will also require more memory and longer startup time. It is
recommended to have a value approximately three times the number of active
notification agents. At a minimum, the value should be equal to the number
of active agents.</p></div></div><div class="sect3 " id="id-1.4.12.10.9.9"><div class="titlepage"><div><div><h4 class="title"><span class="number">10.2.3.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Polling agent HA deployment</span> <a title="Permalink" class="permalink" href="bk02ch10.html#id-1.4.12.10.9.9">#</a></h4><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><div id="id-1.4.12.10.9.9.2" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note</h6><p>Without the <code class="literal">backend_url</code> option being set only one instance of
both the central and Compute agent service is able to run and
function correctly.</p></div><p>The availability check of the instances is provided by heartbeat
messages. When the connection with an instance is lost, the workload
will be reassigned within the remained instances in the next polling
cycle.</p><div id="id-1.4.12.10.9.9.4" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note</h6><p><code class="literal">Memcached</code> uses a <code class="literal">timeout</code> value, which should always be set
to a value that is higher than the <code class="literal">heartbeat</code> value set for
Telemetry.</p></div><p>For backward compatibility and supporting existing deployments, the
central agent configuration also supports using different configuration
files for groups of service instances of this type that are running in
parallel. For enabling this configuration set a value for the
<code class="literal">partitioning_group_prefix</code> option in the <a class="link" href="http://docs.openstack.org/newton/config-reference/telemetry/telemetry-config-options.html" target="_blank">polling section</a>
in the OpenStack Configuration Reference.</p><div id="id-1.4.12.10.9.9.6" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg" /><h6>Warning</h6><p>For each sub-group of the central agent pool with the same
<code class="literal">partitioning_group_prefix</code> a disjoint subset of meters must be
polled, otherwise samples may be missing or duplicated. The list of
meters to poll can be set in the <code class="literal">/etc/ceilometer/pipeline.yaml</code>
configuration file. For more information about pipelines see
<a class="xref" href="bk02ch10.html#data-collection-and-processing" title="10.3. Data collection, processing, and pipelines">Section 10.3, “Data collection, processing, and pipelines”</a>.</p></div><p>To enable the Compute agent to run multiple instances simultaneously
with workload partitioning, the <code class="literal">workload_partitioning</code> option has to
be set to <code class="literal">True</code> under the <a class="link" href="http://docs.openstack.org/newton/config-reference/telemetry/telemetry-config-options.html" target="_blank">Compute section</a>
in the <code class="literal">ceilometer.conf</code> configuration file.</p></div></div><div class="sect2 " id="id-1.4.12.10.10"><div class="titlepage"><div><div><h3 class="title"><span class="number">10.2.4 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Send samples to Telemetry</span> <a title="Permalink" class="permalink" href="bk02ch10.html#id-1.4.12.10.10">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>While most parts of the data collection in the Telemetry service are
automated, Telemetry provides the possibility to submit samples via the
REST API to allow users to send custom samples into this service.</p><p>This option makes it possible to send any kind of samples without the
need of writing extra code lines or making configuration changes.</p><p>The samples that can be sent to Telemetry are not limited to the actual
existing meters. There is a possibility to provide data for any new,
customer defined counter by filling out all the required fields of the
POST request.</p><p>If the sample corresponds to an existing meter, then the fields like
<code class="literal">meter-type</code> and meter name should be matched accordingly.</p><p>The required fields for sending a sample using the command-line client
are:</p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>ID of the corresponding resource. (<code class="literal">--resource-id</code>)</p></li><li class="listitem "><p>Name of meter. (<code class="literal">--meter-name</code>)</p></li><li class="listitem "><p>Type of meter. (<code class="literal">--meter-type</code>)</p><p>Predefined meter types:</p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>Gauge</p></li><li class="listitem "><p>Delta</p></li><li class="listitem "><p>Cumulative</p></li></ul></div></li><li class="listitem "><p>Unit of meter. (<code class="literal">--meter-unit</code>)</p></li><li class="listitem "><p>Volume of sample. (<code class="literal">--sample-volume</code>)</p></li></ul></div><p>To send samples to Telemetry using the command-line client, the
following command should be invoked:</p><div class="verbatim-wrap"><pre class="screen">$ ceilometer sample-create -r 37128ad6-daaa-4d22-9509-b7e1c6b08697 \
  -m memory.usage --meter-type gauge --meter-unit MB --sample-volume 48
+-------------------+--------------------------------------------+
| Property          | Value                                      |
+-------------------+--------------------------------------------+
| message_id        | 6118820c-2137-11e4-a429-08002715c7fb       |
| name              | memory.usage                               |
| project_id        | e34eaa91d52a4402b4cb8bc9bbd308c1           |
| resource_id       | 37128ad6-daaa-4d22-9509-b7e1c6b08697       |
| resource_metadata | {}                                         |
| source            | e34eaa91d52a4402b4cb8bc9bbd308c1:openstack |
| timestamp         | 2014-08-11T09:10:46.358926                 |
| type              | gauge                                      |
| unit              | MB                                         |
| user_id           | 679b0499e7a34ccb9d90b64208401f8e           |
| volume            | 48.0                                       |
+-------------------+--------------------------------------------+</pre></div><div class="sect3 " id="id-1.4.12.10.10.10"><div class="titlepage"><div><div><h4 class="title"><span class="number">10.2.4.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Meter definitions</span> <a title="Permalink" class="permalink" href="bk02ch10.html#id-1.4.12.10.10.10">#</a></h4><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>The Telemetry service collects a subset of the meters by filtering
notifications emitted by other OpenStack services. Starting with the Liberty
release, you can find the meter definitions in a separate configuration file,
called <code class="literal">ceilometer/meter/data/meter.yaml</code>. This enables
operators/administrators to add new meters to Telemetry project by updating
the <code class="literal">meter.yaml</code> file without any need for additional code changes.</p><div id="id-1.4.12.10.10.10.3" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note</h6><p>The <code class="literal">meter.yaml</code> file should be modified with care. Unless intended
do not remove any existing meter definitions from the file. Also, the
collected meters can differ in some cases from what is referenced in the
documentation.</p></div><p>A standard meter definition looks like:</p><div class="verbatim-wrap highlight yaml"><pre class="screen">---
metric:
  - name: 'meter name'
    event_type: 'event name'
    type: 'type of meter eg: gauge, cumulative or delta'
    unit: 'name of unit eg: MB'
    volume: 'path to a measurable value eg: $.payload.size'
    resource_id: 'path to resource id eg: $.payload.id'
    project_id: 'path to project id eg: $.payload.owner'</pre></div><p>The definition above shows a simple meter definition with some fields,
from which <code class="literal">name</code>, <code class="literal">event_type</code>, <code class="literal">type</code>, <code class="literal">unit</code>, and <code class="literal">volume</code>
are required. If there is a match on the event type, samples are generated
for the meter.</p><p>If you take a look at the <code class="literal">meter.yaml</code> file, it contains the sample
definitions for all the meters that Telemetry is collecting from
notifications. The value of each field is specified by using JSON path in
order to find the right value from the notification message. In order to be
able to specify the right field you need to be aware of the format of the
consumed notification. The values that need to be searched in the notification
message are set with a JSON path starting with <code class="literal">$.</code> For instance, if you need
the <code class="literal">size</code> information from the payload you can define it like
<code class="literal">$.payload.size</code>.</p><p>A notification message may contain multiple meters. You can use <code class="literal">*</code> in
the meter definition to capture all the meters and generate samples
respectively. You can use wild cards as shown in the following example:</p><div class="verbatim-wrap highlight yaml"><pre class="screen">---
metric:
  - name: $.payload.measurements.[*].metric.[*].name
    event_type: 'event_name.*'
    type: 'delta'
    unit: $.payload.measurements.[*].metric.[*].unit
    volume: payload.measurements.[*].result
    resource_id: $.payload.target
    user_id: $.payload.initiator.id
    project_id: $.payload.initiator.project_id</pre></div><p>In the above example, the <code class="literal">name</code> field is a JSON path with matching
a list of meter names defined in the notification message.</p><p>You can even use complex operations on JSON paths. In the following example,
<code class="literal">volume</code> and <code class="literal">resource_id</code> fields perform an arithmetic
and string concatenation:</p><div class="verbatim-wrap highlight yaml"><pre class="screen">---
metric:
- name: 'compute.node.cpu.idle.percent'
  event_type: 'compute.metrics.update'
  type: 'gauge'
  unit: 'percent'
  volume: payload.metrics[?(@.name='cpu.idle.percent')].value * 100
  resource_id: $.payload.host + "_" + $.payload.nodename</pre></div><p>You can use the <code class="literal">timedelta</code> plug-in to evaluate the difference in seconds
between two <code class="literal">datetime</code> fields from one notification.</p><div class="verbatim-wrap highlight yaml"><pre class="screen">---
metric:
- name: 'compute.instance.booting.time'
  event_type: 'compute.instance.create.end'
 type: 'gauge'
 unit: 'sec'
 volume:
   fields: [$.payload.created_at, $.payload.launched_at]
   plugin: 'timedelta'
 project_id: $.payload.tenant_id
 resource_id: $.payload.instance_id</pre></div><p>You will find some existence meters in the <code class="literal">meter.yaml</code>. These
meters have a <code class="literal">volume</code> as <code class="literal">1</code> and are at the bottom of the yaml file
with a note suggesting that these will be removed in Mitaka release.</p><p>For example, the meter definition for existence meters is as follows:</p><div class="verbatim-wrap highlight yaml"><pre class="screen">---
metric:
  - name: 'meter name'
    type: 'delta'
    unit: 'volume'
    volume: 1
    event_type:
        - 'event type'
    resource_id: $.payload.volume_id
    user_id: $.payload.user_id
    project_id: $.payload.tenant_id</pre></div><p>These meters are not loaded by default. To load these meters, flip
the <code class="literal">disable_non_metric_meters</code> option in the <code class="literal">ceilometer.conf</code>
file.</p></div></div><div class="sect2 " id="id-1.4.12.10.11"><div class="titlepage"><div><div><h3 class="title"><span class="number">10.2.5 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Block Storage audit script setup to get notifications</span> <a title="Permalink" class="permalink" href="bk02ch10.html#id-1.4.12.10.11">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>If you want to collect OpenStack Block Storage notification on demand,
you can use <code class="command">cinder-volume-usage-audit</code> from OpenStack Block Storage.
This script becomes available when you install OpenStack Block Storage,
so you can use it without any specific settings and you don't need to
authenticate to access the data. To use it, you must run this command in
the following format:</p><div class="verbatim-wrap"><pre class="screen">$ cinder-volume-usage-audit \
  --start_time='YYYY-MM-DD HH:MM:SS' --end_time='YYYY-MM-DD HH:MM:SS' --send_actions</pre></div><p>This script outputs what volumes or snapshots were created, deleted, or
exists in a given period of time and some information about these
volumes or snapshots. Information about the existence and size of
volumes and snapshots is store in the Telemetry service. This data is
also stored as an event which is the recommended usage as it provides
better indexing of data.</p><p>Using this script via cron you can get notifications periodically, for
example, every 5 minutes:</p><div class="verbatim-wrap"><pre class="screen">*/5 * * * * /path/to/cinder-volume-usage-audit --send_actions</pre></div></div><div class="sect2 " id="telemetry-storing-samples"><div class="titlepage"><div><div><h3 class="title"><span class="number">10.2.6 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Storing samples</span> <a title="Permalink" class="permalink" href="bk02ch10.html#telemetry-storing-samples">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span>telemetry-storing-samples</li></ul></div></div></div></div><p>The Telemetry service has a separate service that is responsible for
persisting the data that comes from the pollsters or is received as
notifications. The data can be stored in a file or a database back end,
for which the list of supported databases can be found in
<a class="xref" href="bk02ch10.html#telemetry-supported-databases" title="10.1.1. Supported databases">Section 10.1.1, “Supported databases”</a>. The data can also be sent to an external
data store by using an HTTP dispatcher.</p><p>The <code class="literal">ceilometer-collector</code> service receives the data as messages from the
message bus of the configured AMQP service. It sends these datapoints
without any modification to the configured target. The service has to
run on a host machine from which it has access to the configured
dispatcher.</p><div id="id-1.4.12.10.12.4" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note</h6><p>Multiple dispatchers can be configured for Telemetry at one time.</p></div><p>Multiple <code class="literal">ceilometer-collector</code> processes can be run at a time. It is also
supported to start multiple worker threads per collector process. The
<code class="literal">collector_workers</code> configuration option has to be modified in the
<a class="link" href="http://docs.openstack.org/newton/config-reference/telemetry/telemetry-config-options.html" target="_blank">Collector section</a>
of the <code class="literal">ceilometer.conf</code> configuration file.</p><div class="sect3 " id="id-1.4.12.10.12.6"><div class="titlepage"><div><div><h4 class="title"><span class="number">10.2.6.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Database dispatcher</span> <a title="Permalink" class="permalink" href="bk02ch10.html#id-1.4.12.10.12.6">#</a></h4><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>When the database dispatcher is configured as data store, you have the
option to set a <code class="literal">time_to_live</code> option (ttl) for samples. By default
the time to live value for samples is set to -1, which means that they
are kept in the database forever.</p><p>The time to live value is specified in seconds. Each sample has a time
stamp, and the <code class="literal">ttl</code> value indicates that a sample will be deleted
from the database when the number of seconds has elapsed since that
sample reading was stamped. For example, if the time to live is set to
600, all samples older than 600 seconds will be purged from the
database.</p><p>Certain databases support native TTL expiration. In cases where this is
not possible, a command-line script, which you can use for this purpose
is <code class="literal">ceilometer-expirer</code>. You can run it in a cron job, which helps to keep
your database in a consistent state.</p><p>The level of support differs in case of the configured back end:</p><div class="informaltable"><table class="informaltable" border="1"><colgroup><col class="c1" /><col class="c2" /><col class="c3" /></colgroup><thead><tr><th>
                    <p>Database</p>
                  </th><th>
                    <p>TTL value support</p>
                  </th><th>
                    <p>Note</p>
                  </th></tr></thead><tbody><tr><td>
                    <p>MongoDB</p>
                  </td><td>
                    <p>Yes</p>
                  </td><td>
                    <p>MongoDB has native TTL support for deleting samples
that are older than the configured ttl value.</p>
                  </td></tr><tr><td>
                    <p>SQL-based back ends</p>
                  </td><td>
                    <p>Yes</p>
                  </td><td>
                    <p><code class="literal">ceilometer-expirer</code> has to be used for deleting
samples and its related data from the database.</p>
                  </td></tr><tr><td>
                    <p>HBase</p>
                  </td><td>
                    <p>No</p>
                  </td><td>
                    <p>Telemetry's HBase support does not include native TTL
nor <code class="literal">ceilometer-expirer</code> support.</p>
                  </td></tr><tr><td>
                    <p>DB2 NoSQL</p>
                  </td><td>
                    <p>No</p>
                  </td><td>
                    <p>DB2 NoSQL does not have native TTL
nor <code class="literal">ceilometer-expirer</code> support.</p>
                  </td></tr></tbody></table></div></div><div class="sect3 " id="id-1.4.12.10.12.7"><div class="titlepage"><div><div><h4 class="title"><span class="number">10.2.6.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">HTTP dispatcher</span> <a title="Permalink" class="permalink" href="bk02ch10.html#id-1.4.12.10.12.7">#</a></h4><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>The Telemetry service supports sending samples to an external HTTP
target. The samples are sent without any modification. To set this
option as the collector's target, the <code class="literal">dispatcher</code> has to be changed
to <code class="literal">http</code> in the <code class="literal">ceilometer.conf</code> configuration file. For the list
of options that you need to set, see the see the <a class="link" href="http://docs.openstack.org/newton/config-reference/telemetry/telemetry-config-options.html" target="_blank">dispatcher_http
section</a>
in the OpenStack Configuration Reference.</p></div><div class="sect3 " id="id-1.4.12.10.12.8"><div class="titlepage"><div><div><h4 class="title"><span class="number">10.2.6.3 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">File dispatcher</span> <a title="Permalink" class="permalink" href="bk02ch10.html#id-1.4.12.10.12.8">#</a></h4><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>You can store samples in a file by setting the <code class="literal">dispatcher</code> option in the
<code class="literal">ceilometer.conf</code> file. For the list of configuration options,
see the <a class="link" href="http://docs.openstack.org/newton/config-reference/telemetry/telemetry-config-options.html" target="_blank">dispatcher_file section</a>
in the OpenStack Configuration Reference.</p></div></div></div><div class="sect1 " id="data-collection-and-processing"><div class="titlepage"><div><div><h2 class="title"><span class="number">10.3 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Data collection, processing, and pipelines</span> <a title="Permalink" class="permalink" href="bk02ch10.html#data-collection-and-processing">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span>data-collection-and-processing</li></ul></div></div></div></div><p>The mechanism by which data is collected and processed is called a
pipeline. Pipelines, at the configuration level, describe a coupling
between sources of data and the corresponding sinks for transformation
and publication of data.</p><p>A source is a producer of data: <code class="literal">samples</code> or <code class="literal">events</code>. In effect, it is a
set of pollsters or notification handlers emitting datapoints for a set
of matching meters and event types.</p><p>Each source configuration encapsulates name matching, polling interval
determination, optional resource enumeration or discovery, and mapping
to one or more sinks for publication.</p><p>Data gathered can be used for different purposes, which can impact how
frequently it needs to be published. Typically, a meter published for
billing purposes needs to be updated every 30 minutes while the same
meter may be needed for performance tuning every minute.</p><div id="id-1.4.12.11.6" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg" /><h6>Warning</h6><p>Rapid polling cadences should be avoided, as it results in a huge
amount of data in a short time frame, which may negatively affect
the performance of both Telemetry and the underlying database back
end. We strongly recommend you do not use small granularity
values like 10 seconds.</p></div><p>A sink, on the other hand, is a consumer of data, providing logic for
the transformation and publication of data emitted from related sources.</p><p>In effect, a sink describes a chain of handlers. The chain starts with
zero or more transformers and ends with one or more publishers. The
first transformer in the chain is passed data from the corresponding
source, takes some action such as deriving rate of change, performing
unit conversion, or aggregating, before passing the modified data to the
next step that is described in <a class="xref" href="bk02ch10.html#telemetry-publishers" title="10.4.3. Publishers">Section 10.4.3, “Publishers”</a>.</p><div class="sect2 " id="telemetry-pipeline-configuration"><div class="titlepage"><div><div><h3 class="title"><span class="number">10.3.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Pipeline configuration</span> <a title="Permalink" class="permalink" href="bk02ch10.html#telemetry-pipeline-configuration">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span>telemetry-pipeline-configuration</li></ul></div></div></div></div><p>The pipeline configuration is, by default stored in separate configuration
files called <code class="literal">pipeline.yaml</code> and <code class="literal">event_pipeline.yaml</code> next to
the <code class="literal">ceilometer.conf</code> file. The meter pipeline and event pipeline
configuration files can be set by the <code class="literal">pipeline_cfg_file</code> and
<code class="literal">event_pipeline_cfg_file</code> options listed in the <a class="link" href="http://docs.openstack.org/newton/config-reference/telemetry/telemetry-config-options.html" target="_blank">Description of
configuration options for api table</a>
section in the OpenStack Configuration Reference respectively. Multiple
pipelines can be defined in one pipeline configuration file.</p><p>The meter pipeline definition looks like:</p><div class="verbatim-wrap highlight yaml"><pre class="screen">---
sources:
  - name: 'source name'
    interval: 'how often should the samples be injected into the pipeline'
    meters:
      - 'meter filter'
    resources:
      - 'list of resource URLs'
    sinks
      - 'sink name'
sinks:
  - name: 'sink name'
    transformers: 'definition of transformers'
    publishers:
      - 'list of publishers'</pre></div><p>The interval parameter in the sources section should be defined in
seconds. It determines the polling cadence of sample injection into the
pipeline, where samples are produced under the direct control of an
agent.</p><p>There are several ways to define the list of meters for a pipeline
source. The list of valid meters can be found in <a class="xref" href="bk02ch10.html#telemetry-measurements" title="10.6. Measurements">Section 10.6, “Measurements”</a>.
There is a possibility to define all the meters, or just included or excluded
meters, with which a source should operate:</p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>To include all meters, use the <code class="literal">*</code> wildcard symbol. It is highly
advisable to select only the meters that you intend on using to avoid
flooding the metering database with unused data.</p></li><li class="listitem "><p>To define the list of meters, use either of the following:</p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>To define the list of included meters, use the <code class="literal">meter_name</code>
syntax.</p></li><li class="listitem "><p>To define the list of excluded meters, use the <code class="literal">!meter_name</code>
syntax.</p></li><li class="listitem "><p>For meters, which have variants identified by a complex name
field, use the wildcard symbol to select all, for example,
for <code class="literal">instance:m1.tiny</code>, use <code class="literal">instance:\*</code>.</p></li></ul></div></li></ul></div><div id="id-1.4.12.11.9.8" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note</h6><p>The OpenStack Telemetry service does not have any duplication check
between pipelines, and if you add a meter to multiple pipelines then it is
assumed the duplication is intentional and may be stored multiple
times according to the specified sinks.</p></div><p>The above definition methods can be used in the following combinations:</p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>Use only the wildcard symbol.</p></li><li class="listitem "><p>Use the list of included meters.</p></li><li class="listitem "><p>Use the list of excluded meters.</p></li><li class="listitem "><p>Use wildcard symbol with the list of excluded meters.</p></li></ul></div><div id="id-1.4.12.11.9.11" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note</h6><p>At least one of the above variations should be included in the
meters section. Included and excluded meters cannot co-exist in the
same pipeline. Wildcard and included meters cannot co-exist in the
same pipeline definition section.</p></div><p>The optional resources section of a pipeline source allows a static list
of resource URLs to be configured for polling.</p><p>The transformers section of a pipeline sink provides the possibility to
add a list of transformer definitions. The available transformers are:</p><div class="informaltable"><table class="informaltable" border="1"><colgroup><col class="c1" /><col class="c2" /></colgroup><thead><tr><th>
                  <p>Name of transformer</p>
                </th><th>
                  <p>Reference name for configuration</p>
                </th></tr></thead><tbody><tr><td>
                  <p>Accumulator</p>
                </td><td>
                  <p>accumulator</p>
                </td></tr><tr><td>
                  <p>Aggregator</p>
                </td><td>
                  <p>aggregator</p>
                </td></tr><tr><td>
                  <p>Arithmetic</p>
                </td><td>
                  <p>arithmetic</p>
                </td></tr><tr><td>
                  <p>Rate of change</p>
                </td><td>
                  <p>rate_of_change</p>
                </td></tr><tr><td>
                  <p>Unit conversion</p>
                </td><td>
                  <p>unit_conversion</p>
                </td></tr><tr><td>
                  <p>Delta</p>
                </td><td>
                  <p>delta</p>
                </td></tr></tbody></table></div><p>The publishers section contains the list of publishers, where the
samples data should be sent after the possible transformations.</p><p>Similarly, the event pipeline definition looks like:</p><div class="verbatim-wrap highlight yaml"><pre class="screen">---
sources:
  - name: 'source name'
    events:
      - 'event filter'
    sinks
      - 'sink name'
sinks:
  - name: 'sink name'
    publishers:
      - 'list of publishers'</pre></div><p>The event filter uses the same filtering logic as the meter pipeline.</p><div class="sect3 " id="telemetry-transformers"><div class="titlepage"><div><div><h4 class="title"><span class="number">10.3.1.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Transformers</span> <a title="Permalink" class="permalink" href="bk02ch10.html#telemetry-transformers">#</a></h4><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span>telemetry-transformers</li></ul></div></div></div></div><p>The definition of transformers can contain the following fields:</p><div class="variablelist "><dl class="variablelist"><dt id="id-1.4.12.11.9.19.3.1"><span class="term ">name</span></dt><dd><p>Name of the transformer.</p></dd><dt id="id-1.4.12.11.9.19.3.2"><span class="term ">parameters</span></dt><dd><p>Parameters of the transformer.</p></dd></dl></div><p>The parameters section can contain transformer specific fields, like
source and target fields with different subfields in case of the rate of
change, which depends on the implementation of the transformer.</p><p>In the case of the transformer that creates the <code class="literal">cpu_util</code> meter, the
definition looks like:</p><div class="verbatim-wrap highlight yaml"><pre class="screen">transformers:
    - name: "rate_of_change"
      parameters:
          target:
              name: "cpu_util"
              unit: "%"
              type: "gauge"
              scale: "100.0 / (10**9 * (resource_metadata.cpu_number or 1))"</pre></div><p>The rate of change the transformer generates is the <code class="literal">cpu_util</code> meter
from the sample values of the <code class="literal">cpu</code> counter, which represents
cumulative CPU time in nanoseconds. The transformer definition above
defines a scale factor (for nanoseconds and multiple CPUs), which is
applied before the transformation derives a sequence of gauge samples
with unit <code class="literal">%</code>, from sequential values of the <code class="literal">cpu</code> meter.</p><p>The definition for the disk I/O rate, which is also generated by the
rate of change transformer:</p><div class="verbatim-wrap highlight yaml"><pre class="screen">transformers:
    - name: "rate_of_change"
      parameters:
          source:
              map_from:
                  name: "disk\\.(read|write)\\.(bytes|requests)"
                  unit: "(B|request)"
          target:
              map_to:
                  name: "disk.\\1.\\2.rate"
                  unit: "\\1/s"
              type: "gauge"</pre></div></div><div class="sect3 " id="id-1.4.12.11.9.20"><div class="titlepage"><div><div><h4 class="title"><span class="number">10.3.1.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Unit conversion transformer</span> <a title="Permalink" class="permalink" href="bk02ch10.html#id-1.4.12.11.9.20">#</a></h4><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>Transformer to apply a unit conversion. It takes the volume of the meter
and multiplies it with the given <code class="literal">scale</code> expression. Also supports
<code class="literal">map_from</code> and <code class="literal">map_to</code> like the rate of change transformer.</p><p>Sample configuration:</p><div class="verbatim-wrap highlight yaml"><pre class="screen">transformers:
    - name: "unit_conversion"
      parameters:
          target:
              name: "disk.kilobytes"
              unit: "KB"
              scale: "volume * 1.0 / 1024.0"</pre></div><p>With <code class="literal">map_from</code> and <code class="literal">map_to</code>:</p><div class="verbatim-wrap highlight yaml"><pre class="screen">transformers:
    - name: "unit_conversion"
      parameters:
          source:
              map_from:
                  name: "disk\\.(read|write)\\.bytes"
          target:
              map_to:
                  name: "disk.\\1.kilobytes"
              scale: "volume * 1.0 / 1024.0"
              unit: "KB"</pre></div></div><div class="sect3 " id="id-1.4.12.11.9.21"><div class="titlepage"><div><div><h4 class="title"><span class="number">10.3.1.3 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Aggregator transformer</span> <a title="Permalink" class="permalink" href="bk02ch10.html#id-1.4.12.11.9.21">#</a></h4><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>A transformer that sums up the incoming samples until enough samples
have come in or a timeout has been reached.</p><p>Timeout can be specified with the <code class="literal">retention_time</code> option. If you want
to flush the aggregation, after a set number of samples have been
aggregated, specify the size parameter.</p><p>The volume of the created sample is the sum of the volumes of samples
that came into the transformer. Samples can be aggregated by the
attributes <code class="literal">project_id</code>, <code class="literal">user_id</code> and <code class="literal">resource_metadata</code>. To aggregate
by the chosen attributes, specify them in the configuration and set which
value of the attribute to take for the new sample (first to take the
first sample's attribute, last to take the last sample's attribute, and
drop to discard the attribute).</p><p>To aggregate 60s worth of samples by <code class="literal">resource_metadata</code> and keep the
<code class="literal">resource_metadata</code> of the latest received sample:</p><div class="verbatim-wrap highlight yaml"><pre class="screen">transformers:
    - name: "aggregator"
      parameters:
          retention_time: 60
          resource_metadata: last</pre></div><p>To aggregate each 15 samples by <code class="literal">user_id</code> and <code class="literal">resource_metadata</code> and keep
the <code class="literal">user_id</code> of the first received sample and drop the
<code class="literal">resource_metadata</code>:</p><div class="verbatim-wrap highlight yaml"><pre class="screen">transformers:
    - name: "aggregator"
      parameters:
          size: 15
          user_id: first
          resource_metadata: drop</pre></div></div><div class="sect3 " id="id-1.4.12.11.9.22"><div class="titlepage"><div><div><h4 class="title"><span class="number">10.3.1.4 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Accumulator transformer</span> <a title="Permalink" class="permalink" href="bk02ch10.html#id-1.4.12.11.9.22">#</a></h4><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>This transformer simply caches the samples until enough samples have
arrived and then flushes them all down the pipeline at once:</p><div class="verbatim-wrap highlight yaml"><pre class="screen">transformers:
    - name: "accumulator"
      parameters:
          size: 15</pre></div></div><div class="sect3 " id="id-1.4.12.11.9.23"><div class="titlepage"><div><div><h4 class="title"><span class="number">10.3.1.5 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Multi meter arithmetic transformer</span> <a title="Permalink" class="permalink" href="bk02ch10.html#id-1.4.12.11.9.23">#</a></h4><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>This transformer enables us to perform arithmetic calculations over one
or more meters and/or their metadata, for example:</p><div class="verbatim-wrap highlight json"><pre class="screen">memory_util = 100 * memory.usage / memory</pre></div><p>A new sample is created with the properties described in the <code class="literal">target</code>
section of the transformer's configuration. The sample's
volume is the result of the provided expression. The calculation is
performed on samples from the same resource.</p><div id="id-1.4.12.11.9.23.5" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note</h6><p>The calculation is limited to meters with the same interval.</p></div><p>Example configuration:</p><div class="verbatim-wrap highlight yaml"><pre class="screen">transformers:
    - name: "arithmetic"
      parameters:
        target:
          name: "memory_util"
          unit: "%"
          type: "gauge"
          expr: "100 * $(memory.usage) / $(memory)"</pre></div><p>To demonstrate the use of metadata, the following implementation of a
novel meter shows average CPU time per core:</p><div class="verbatim-wrap highlight yaml"><pre class="screen">transformers:
    - name: "arithmetic"
      parameters:
        target:
          name: "avg_cpu_per_core"
          unit: "ns"
          type: "cumulative"
          expr: "$(cpu) / ($(cpu).resource_metadata.cpu_number or 1)"</pre></div><div id="id-1.4.12.11.9.23.10" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note</h6><p>Expression evaluation gracefully handles NaNs and exceptions. In
such a case it does not create a new sample but only logs a warning.</p></div></div><div class="sect3 " id="id-1.4.12.11.9.24"><div class="titlepage"><div><div><h4 class="title"><span class="number">10.3.1.6 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Delta transformer</span> <a title="Permalink" class="permalink" href="bk02ch10.html#id-1.4.12.11.9.24">#</a></h4><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>This transformer calculates the change between two sample datapoints of a
resource. It can be configured to capture only the positive growth deltas.</p><p>Example configuration:</p><div class="verbatim-wrap highlight yaml"><pre class="screen">transformers:
    - name: "delta"
      parameters:
        target:
            name: "cpu.delta"
        growth_only: True</pre></div></div></div></div><div class="sect1 " id="id-1.4.12.12"><div class="titlepage"><div><div><h2 class="title"><span class="number">10.4 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Data retrieval</span> <a title="Permalink" class="permalink" href="bk02ch10.html#id-1.4.12.12">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>The Telemetry service offers several mechanisms from which the persisted
data can be accessed. As described in <a class="xref" href="bk02ch10.html#telemetry-system-architecture" title="10.1. System architecture">Section 10.1, “System architecture”</a> and
in <a class="xref" href="bk02ch10.html#telemetry-data-collection" title="10.2. Data collection">Section 10.2, “Data collection”</a>, the collected information can be stored in
one or more database back ends, which are hidden by the Telemetry RESTful API.</p><div id="id-1.4.12.12.3" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note</h6><p>It is highly recommended not to access the database directly and
read or modify any data in it. The API layer hides all the changes
in the actual database schema and provides a standard interface to
expose the samples, alarms and so forth.</p></div><div class="sect2 " id="id-1.4.12.12.4"><div class="titlepage"><div><div><h3 class="title"><span class="number">10.4.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Telemetry v2 API</span> <a title="Permalink" class="permalink" href="bk02ch10.html#id-1.4.12.12.4">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>The Telemetry service provides a RESTful API, from which the collected
samples and all the related information can be retrieved, like the list
of meters, alarm definitions and so forth.</p><p>The Telemetry API URL can be retrieved from the service catalog provided
by OpenStack Identity, which is populated during the installation
process. The API access needs a valid token and proper permission to
retrieve data, as described in <a class="xref" href="bk02ch10.html#telemetry-users-roles-projects" title="10.1.4. Users, roles, and projects">Section 10.1.4, “Users, roles, and projects”</a>.</p><p>Further information about the available API endpoints can be found in
the <a class="link" href="http://developer.openstack.org/api-ref-telemetry-v2.html" target="_blank">Telemetry API Reference</a>.</p><div class="sect3 " id="sec-query"><div class="titlepage"><div><div><h4 class="title"><span class="number">10.4.1.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Query</span> <a title="Permalink" class="permalink" href="bk02ch10.html#sec-query">#</a></h4><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span>sec-query</li></ul></div></div></div></div><p>The API provides some additional functionalities, like querying the
collected data set. For the samples and alarms API endpoints, both
simple and complex query styles are available, whereas for the other
endpoints only simple queries are supported.</p><p>After validating the query parameters, the processing is done on the
database side in the case of most database back ends in order to achieve
better performance.</p><p>
            <span class="bold"><strong>Simple query</strong></span>
          </p><p>Many of the API endpoints accept a query filter argument, which should
be a list of data structures that consist of the following items:</p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
                <code class="literal">field</code>
              </p></li><li class="listitem "><p>
                <code class="literal">op</code>
              </p></li><li class="listitem "><p>
                <code class="literal">value</code>
              </p></li><li class="listitem "><p>
                <code class="literal">type</code>
              </p></li></ul></div><p>Regardless of the endpoint on which the filter is applied on, it will
always target the fields of the <a class="link" href="http://docs.openstack.org/developer/ceilometer/webapi/v2.html#Sample" target="_blank">Sample type</a>.</p><p>Several fields of the API endpoints accept shorter names than the ones
defined in the reference. The API will do the transformation internally
and return the output with the fields that are listed in the <a class="link" href="http://docs.openstack.org/developer/ceilometer/webapi/v2.html" target="_blank">API reference</a>.
The fields are the following:</p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p><code class="literal">project_id</code>: project</p></li><li class="listitem "><p><code class="literal">resource_id</code>: resource</p></li><li class="listitem "><p><code class="literal">user_id</code>: user</p></li></ul></div><p>When a filter argument contains multiple constraints of the above form,
a logical <code class="literal">AND</code> relation between them is implied.</p><p>
            <span class="bold"><strong>Complex query</strong></span>
          </p><p>The filter expressions of the complex query feature operate on the
fields of <code class="literal">Sample</code>, <code class="literal">Alarm</code> and <code class="literal">AlarmChange</code> types. The following
comparison operators are supported:</p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
                <code class="literal">=</code>
              </p></li><li class="listitem "><p>
                <code class="literal">!=</code>
              </p></li><li class="listitem "><p>
                <code class="literal">&lt;</code>
              </p></li><li class="listitem "><p>
                <code class="literal">&lt;=</code>
              </p></li><li class="listitem "><p>
                <code class="literal">&gt;</code>
              </p></li><li class="listitem "><p>
                <code class="literal">&gt;=</code>
              </p></li></ul></div><p>The following logical operators can be used:</p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
                <code class="literal">and</code>
              </p></li><li class="listitem "><p>
                <code class="literal">or</code>
              </p></li><li class="listitem "><p>
                <code class="literal">not</code>
              </p></li></ul></div><div id="id-1.4.12.12.4.5.16" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note</h6><p>The <code class="literal">not</code> operator has different behavior in MongoDB and in the
SQLAlchemy-based database engines. If the <code class="literal">not</code> operator is
applied on a non existent metadata field then the result depends on
the database engine. In case of MongoDB, it will return every sample
as the <code class="literal">not</code> operator is evaluated true for every sample where the
given field does not exist. On the other hand the SQL-based database
engine will return an empty result because of the underlying
<code class="literal">join</code> operation.</p></div><p>Complex query supports specifying a list of <code class="literal">orderby</code> expressions.
This means that the result of the query can be ordered based on the
field names provided in this list. When multiple keys are defined for
the ordering, these will be applied sequentially in the order of the
specification. The second expression will be applied on the groups for
which the values of the first expression are the same. The ordering can
be ascending or descending.</p><p>The number of returned items can be bounded using the <code class="literal">limit</code> option.</p><p>The <code class="literal">filter</code>, <code class="literal">orderby</code> and <code class="literal">limit</code> fields are optional.</p><div id="id-1.4.12.12.4.5.20" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note</h6><p>As opposed to the simple query, complex query is available via a
separate API endpoint. For more information see the <a class="link" href="http://docs.openstack.org/developer/ceilometer/webapi/v2.html#v2-web-api" target="_blank">Telemetry v2 Web API
Reference</a>.</p></div></div><div class="sect3 " id="id-1.4.12.12.4.6"><div class="titlepage"><div><div><h4 class="title"><span class="number">10.4.1.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Statistics</span> <a title="Permalink" class="permalink" href="bk02ch10.html#id-1.4.12.12.4.6">#</a></h4><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>The sample data can be used in various ways for several purposes, like
billing or profiling. In external systems the data is often used in the
form of aggregated statistics. The Telemetry API provides several
built-in functions to make some basic calculations available without any
additional coding.</p><p>Telemetry supports the following statistics and aggregation functions:</p><div class="variablelist "><dl class="variablelist"><dt id="id-1.4.12.12.4.6.4.1"><span class="term ">
                <code class="literal">avg</code>
              </span></dt><dd><p>Average of the sample volumes over each period.</p></dd><dt id="id-1.4.12.12.4.6.4.2"><span class="term ">
                <code class="literal">cardinality</code>
              </span></dt><dd><p>Count of distinct values in each period identified by a key
specified as the parameter of this aggregate function. The supported
parameter values are:</p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
                      <code class="literal">project_id</code>
                    </p></li><li class="listitem "><p>
                      <code class="literal">resource_id</code>
                    </p></li><li class="listitem "><p>
                      <code class="literal">user_id</code>
                    </p></li></ul></div></dd></dl></div><div id="id-1.4.12.12.4.6.5" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note</h6><p>The <code class="literal">aggregate.param</code> option is required.</p></div><div class="variablelist "><dl class="variablelist"><dt id="id-1.4.12.12.4.6.6.1"><span class="term ">
                <code class="literal">count</code>
              </span></dt><dd><p>Number of samples in each period.</p></dd><dt id="id-1.4.12.12.4.6.6.2"><span class="term ">
                <code class="literal">max</code>
              </span></dt><dd><p>Maximum of the sample volumes in each period.</p></dd><dt id="id-1.4.12.12.4.6.6.3"><span class="term ">
                <code class="literal">min</code>
              </span></dt><dd><p>Minimum of the sample volumes in each period.</p></dd><dt id="id-1.4.12.12.4.6.6.4"><span class="term ">
                <code class="literal">stddev</code>
              </span></dt><dd><p>Standard deviation of the sample volumes in each period.</p></dd><dt id="id-1.4.12.12.4.6.6.5"><span class="term ">
                <code class="literal">sum</code>
              </span></dt><dd><p>Sum of the sample volumes over each period.</p></dd></dl></div><p>The simple query and the statistics functionality can be used together
in a single API request.</p></div></div><div class="sect2 " id="id-1.4.12.12.5"><div class="titlepage"><div><div><h3 class="title"><span class="number">10.4.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Telemetry command-line client and SDK</span> <a title="Permalink" class="permalink" href="bk02ch10.html#id-1.4.12.12.5">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>The Telemetry service provides a command-line client, with which the
collected data is available just as the alarm definition and retrieval
options. The client uses the Telemetry RESTful API in order to execute
the requested operations.</p><p>To be able to use the <code class="command">ceilometer</code> command, the
python-ceilometerclient package needs to be installed and configured
properly. For details about the installation process, see the <a class="link" href="http://docs.openstack.org/project-install-guide/telemetry/newton/" target="_blank">Telemetry
chapter</a>
in the Installation Tutorials and Guides.</p><div id="id-1.4.12.12.5.4" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note</h6><p>The Telemetry service captures the user-visible resource usage data.
Therefore the database will not contain any data without the
existence of these resources, like VM images in the OpenStack Image
service.</p></div><p>Similarly to other OpenStack command-line clients, the <code class="literal">ceilometer</code>
client uses OpenStack Identity for authentication. The proper
credentials and <code class="literal">--auth_url</code> parameter have to be defined via command
line parameters or environment variables.</p><p>This section provides some examples without the aim of completeness.
These commands can be used for instance for validating an installation
of Telemetry.</p><p>To retrieve the list of collected meters, the following command should
be used:</p><div class="verbatim-wrap"><pre class="screen">$ ceilometer meter-list
+------------------------+------------+------+------------------------------------------+----------------------------------+----------------------------------+
| Name                   | Type       | Unit | Resource ID                              | User ID                          | Project ID                       |
+------------------------+------------+------+------------------------------------------+----------------------------------+----------------------------------+
| cpu                    | cumulative | ns   | bb52e52b-1e42-4751-b3ac-45c52d83ba07     | b6e62aad26174382bc3781c12fe413c8 | cbfa8e3dfab64a27a87c8e24ecd5c60f |
| cpu                    | cumulative | ns   | c8d2e153-a48f-4cec-9e93-86e7ac6d4b0b     | b6e62aad26174382bc3781c12fe413c8 | cbfa8e3dfab64a27a87c8e24ecd5c60f |
| cpu_util               | gauge      | %    | bb52e52b-1e42-4751-b3ac-45c52d83ba07     | b6e62aad26174382bc3781c12fe413c8 | cbfa8e3dfab64a27a87c8e24ecd5c60f |
| cpu_util               | gauge      | %    | c8d2e153-a48f-4cec-9e93-86e7ac6d4b0b     | b6e62aad26174382bc3781c12fe413c8 | cbfa8e3dfab64a27a87c8e24ecd5c60f |
| disk.device.read.bytes | cumulative | B    | bb52e52b-1e42-4751-b3ac-45c52d83ba07-hdd | b6e62aad26174382bc3781c12fe413c8 | cbfa8e3dfab64a27a87c8e24ecd5c60f |
| disk.device.read.bytes | cumulative | B    | bb52e52b-1e42-4751-b3ac-45c52d83ba07-vda | b6e62aad26174382bc3781c12fe413c8 | cbfa8e3dfab64a27a87c8e24ecd5c60f |
| disk.device.read.bytes | cumulative | B    | c8d2e153-a48f-4cec-9e93-86e7ac6d4b0b-hdd | b6e62aad26174382bc3781c12fe413c8 | cbfa8e3dfab64a27a87c8e24ecd5c60f |
| disk.device.read.bytes | cumulative | B    | c8d2e153-a48f-4cec-9e93-86e7ac6d4b0b-vda | b6e62aad26174382bc3781c12fe413c8 | cbfa8e3dfab64a27a87c8e24ecd5c60f |
| ...                                                                                                                                                         |
+------------------------+------------+------+------------------------------------------+----------------------------------+----------------------------------+</pre></div><p>The <code class="command">ceilometer</code> command was run with <code class="literal">admin</code> rights, which means
that all the data is accessible in the database. For more information
about access right see <a class="xref" href="bk02ch10.html#telemetry-users-roles-projects" title="10.1.4. Users, roles, and projects">Section 10.1.4, “Users, roles, and projects”</a>. As it can be seen
in the above example, there are two VM instances existing in the system, as
there are VM instance related meters on the top of the result list. The
existence of these meters does not indicate that these instances are running at
the time of the request. The result contains the currently collected meters per
resource, in an ascending order based on the name of the meter.</p><p>Samples are collected for each meter that is present in the list of
meters, except in case of instances that are not running or deleted from
the OpenStack Compute database. If an instance no longer exists and
there is a <code class="literal">time_to_live</code> value set in the <code class="literal">ceilometer.conf</code>
configuration file, then a group of samples are deleted in each
expiration cycle. When the last sample is deleted for a meter, the
database can be cleaned up by running ceilometer-expirer and the meter
will not be present in the list above anymore. For more information
about the expiration procedure see <a class="xref" href="bk02ch10.html#telemetry-storing-samples" title="10.2.6. Storing samples">Section 10.2.6, “Storing samples”</a>.</p><p>The Telemetry API supports simple query on the meter endpoint. The query
functionality has the following syntax:</p><div class="verbatim-wrap"><pre class="screen">--query &lt;field1&gt;&lt;operator1&gt;&lt;value1&gt;;...;&lt;field_n&gt;&lt;operator_n&gt;&lt;value_n&gt;</pre></div><p>The following command needs to be invoked to request the meters of one
VM instance:</p><div class="verbatim-wrap"><pre class="screen">$ ceilometer meter-list --query resource=bb52e52b-1e42-4751-b3ac-45c52d83ba07
+-------------------------+------------+-----------+--------------------------------------+----------------------------------+----------------------------------+
| Name                    | Type       | Unit      | Resource ID                          | User ID                          | Project ID                       |
+-------------------------+------------+-----------+--------------------------------------+----------------------------------+----------------------------------+
| cpu                     | cumulative | ns        | bb52e52b-1e42-4751-b3ac-45c52d83ba07 | b6e62aad26174382bc3781c12fe413c8 | cbfa8e3dfab64a27a87c8e24ecd5c60f |
| cpu_util                | gauge      | %         | bb52e52b-1e42-4751-b3ac-45c52d83ba07 | b6e62aad26174382bc3781c12fe413c8 | cbfa8e3dfab64a27a87c8e24ecd5c60f |
| cpu_l3_cache            | gauge      | B         | bb52e52b-1e42-4751-b3ac-45c52d83ba07 | b6e62aad26174382bc3781c12fe413c8 | cbfa8e3dfab64a27a87c8e24ecd5c60f |
| disk.ephemeral.size     | gauge      | GB        | bb52e52b-1e42-4751-b3ac-45c52d83ba07 | b6e62aad26174382bc3781c12fe413c8 | cbfa8e3dfab64a27a87c8e24ecd5c60f |
| disk.read.bytes         | cumulative | B         | bb52e52b-1e42-4751-b3ac-45c52d83ba07 | b6e62aad26174382bc3781c12fe413c8 | cbfa8e3dfab64a27a87c8e24ecd5c60f |
| disk.read.bytes.rate    | gauge      | B/s       | bb52e52b-1e42-4751-b3ac-45c52d83ba07 | b6e62aad26174382bc3781c12fe413c8 | cbfa8e3dfab64a27a87c8e24ecd5c60f |
| disk.read.requests      | cumulative | request   | bb52e52b-1e42-4751-b3ac-45c52d83ba07 | b6e62aad26174382bc3781c12fe413c8 | cbfa8e3dfab64a27a87c8e24ecd5c60f |
| disk.read.requests.rate | gauge      | request/s | bb52e52b-1e42-4751-b3ac-45c52d83ba07 | b6e62aad26174382bc3781c12fe413c8 | cbfa8e3dfab64a27a87c8e24ecd5c60f |
| disk.root.size          | gauge      | GB        | bb52e52b-1e42-4751-b3ac-45c52d83ba07 | b6e62aad26174382bc3781c12fe413c8 | cbfa8e3dfab64a27a87c8e24ecd5c60f |
| disk.write.bytes        | cumulative | B         | bb52e52b-1e42-4751-b3ac-45c52d83ba07 | b6e62aad26174382bc3781c12fe413c8 | cbfa8e3dfab64a27a87c8e24ecd5c60f |
| disk.write.bytes.rate   | gauge      | B/s       | bb52e52b-1e42-4751-b3ac-45c52d83ba07 | b6e62aad26174382bc3781c12fe413c8 | cbfa8e3dfab64a27a87c8e24ecd5c60f |
| disk.write.requests     | cumulative | request   | bb52e52b-1e42-4751-b3ac-45c52d83ba07 | b6e62aad26174382bc3781c12fe413c8 | cbfa8e3dfab64a27a87c8e24ecd5c60f |
| disk.write.requests.rate| gauge      | request/s | bb52e52b-1e42-4751-b3ac-45c52d83ba07 | b6e62aad26174382bc3781c12fe413c8 | cbfa8e3dfab64a27a87c8e24ecd5c60f |
| instance                | gauge      | instance  | bb52e52b-1e42-4751-b3ac-45c52d83ba07 | b6e62aad26174382bc3781c12fe413c8 | cbfa8e3dfab64a27a87c8e24ecd5c60f |
| instance:m1.tiny        | gauge      | instance  | bb52e52b-1e42-4751-b3ac-45c52d83ba07 | b6e62aad26174382bc3781c12fe413c8 | cbfa8e3dfab64a27a87c8e24ecd5c60f |
| memory                  | gauge      | MB        | bb52e52b-1e42-4751-b3ac-45c52d83ba07 | b6e62aad26174382bc3781c12fe413c8 | cbfa8e3dfab64a27a87c8e24ecd5c60f |
| vcpus                   | gauge      | vcpu      | bb52e52b-1e42-4751-b3ac-45c52d83ba07 | b6e62aad26174382bc3781c12fe413c8 | cbfa8e3dfab64a27a87c8e24ecd5c60f |
+-------------------------+------------+-----------+--------------------------------------+----------------------------------+----------------------------------+</pre></div><p>As it was described above, the whole set of samples can be retrieved
that are stored for a meter or filtering the result set by using one of
the available query types. The request for all the samples of the
<code class="literal">cpu</code> meter without any additional filtering looks like the following:</p><div class="verbatim-wrap"><pre class="screen">$ ceilometer sample-list --meter cpu
+--------------------------------------+-------+------------+------------+------+---------------------+
| Resource ID                          | Meter | Type       | Volume     | Unit | Timestamp           |
+--------------------------------------+-------+------------+------------+------+---------------------+
| c8d2e153-a48f-4cec-9e93-86e7ac6d4b0b | cpu   | cumulative | 5.4863e+11 | ns   | 2014-08-31T11:17:03 |
| bb52e52b-1e42-4751-b3ac-45c52d83ba07 | cpu   | cumulative | 5.7848e+11 | ns   | 2014-08-31T11:17:03 |
| c8d2e153-a48f-4cec-9e93-86e7ac6d4b0b | cpu   | cumulative | 5.4811e+11 | ns   | 2014-08-31T11:07:05 |
| bb52e52b-1e42-4751-b3ac-45c52d83ba07 | cpu   | cumulative | 5.7797e+11 | ns   | 2014-08-31T11:07:05 |
| c8d2e153-a48f-4cec-9e93-86e7ac6d4b0b | cpu   | cumulative | 5.3589e+11 | ns   | 2014-08-31T10:27:19 |
| bb52e52b-1e42-4751-b3ac-45c52d83ba07 | cpu   | cumulative | 5.6397e+11 | ns   | 2014-08-31T10:27:19 |
| ...                                                                                                 |
+--------------------------------------+-------+------------+------------+------+---------------------+</pre></div><p>The result set of the request contains the samples for both instances
ordered by the timestamp field in the default descending order.</p><p>The simple query makes it possible to retrieve only a subset of the
collected samples. The following command can be executed to request the
<code class="literal">cpu</code> samples of only one of the VM instances:</p><div class="verbatim-wrap"><pre class="screen">$ ceilometer sample-list --meter cpu --query resource=bb52e52b-1e42-4751-
  b3ac-45c52d83ba07
+--------------------------------------+------+------------+------------+------+---------------------+
| Resource ID                          | Name | Type       | Volume     | Unit | Timestamp           |
+--------------------------------------+------+------------+------------+------+---------------------+
| bb52e52b-1e42-4751-b3ac-45c52d83ba07 | cpu  | cumulative | 5.7906e+11 | ns   | 2014-08-31T11:27:08 |
| bb52e52b-1e42-4751-b3ac-45c52d83ba07 | cpu  | cumulative | 5.7848e+11 | ns   | 2014-08-31T11:17:03 |
| bb52e52b-1e42-4751-b3ac-45c52d83ba07 | cpu  | cumulative | 5.7797e+11 | ns   | 2014-08-31T11:07:05 |
| bb52e52b-1e42-4751-b3ac-45c52d83ba07 | cpu  | cumulative | 5.6397e+11 | ns   | 2014-08-31T10:27:19 |
| bb52e52b-1e42-4751-b3ac-45c52d83ba07 | cpu  | cumulative | 5.6207e+11 | ns   | 2014-08-31T10:17:03 |
| bb52e52b-1e42-4751-b3ac-45c52d83ba07 | cpu  | cumulative | 5.3831e+11 | ns   | 2014-08-31T08:41:57 |
| ...                                                                                                |
+--------------------------------------+------+------------+------------+------+---------------------+</pre></div><p>As it can be seen on the output above, the result set contains samples
for only one instance of the two.</p><p>The <code class="command">ceilometer query-samples</code> command is used to execute rich
queries. This command accepts the following parameters:</p><div class="variablelist "><dl class="variablelist"><dt id="id-1.4.12.12.5.22.1"><span class="term ">
              <code class="literal">--filter</code>
            </span></dt><dd><p>Contains the filter expression for the query in the form of:
<code class="literal">{complex_op: [{simple_op: {field_name: value}}]}</code>.</p></dd><dt id="id-1.4.12.12.5.22.2"><span class="term ">
              <code class="literal">--orderby</code>
            </span></dt><dd><p>Contains the list of <code class="literal">orderby</code> expressions in the form of:
<code class="literal">[{field_name: direction}, {field_name: direction}]</code>.</p></dd><dt id="id-1.4.12.12.5.22.3"><span class="term ">
              <code class="literal">--limit</code>
            </span></dt><dd><p>Specifies the maximum number of samples to return.</p></dd></dl></div><p>For more information about complex queries see
<a class="xref" href="bk02ch10.html#sec-query" title="10.4.1.1. Query">Section 10.4.1.1, “Query”</a>.</p><p>As the complex query functionality provides the possibility of using
complex operators, it is possible to retrieve a subset of samples for a
given VM instance. To request for the first six samples for the <code class="literal">cpu</code>
and <code class="literal">disk.read.bytes</code> meters, the following command should be invoked:</p><div class="verbatim-wrap"><pre class="screen">$ ceilometer query-samples --filter '{"and": \
  [{"=":{"resource":"bb52e52b-1e42-4751-b3ac-45c52d83ba07"}},{"or":[{"=":{"counter_name":"cpu"}}, \
  {"=":{"counter_name":"disk.read.bytes"}}]}]}' --orderby '[{"timestamp":"asc"}]' --limit 6
+--------------------------------------+-----------------+------------+------------+------+---------------------+
| Resource ID                          | Meter           | Type       | Volume     | Unit | Timestamp           |
+--------------------------------------+-----------------+------------+------------+------+---------------------+
| bb52e52b-1e42-4751-b3ac-45c52d83ba07 | disk.read.bytes | cumulative | 385334.0   | B    | 2014-08-30T13:00:46 |
| bb52e52b-1e42-4751-b3ac-45c52d83ba07 | cpu             | cumulative | 1.2132e+11 | ns   | 2014-08-30T13:00:47 |
| bb52e52b-1e42-4751-b3ac-45c52d83ba07 | cpu             | cumulative | 1.4295e+11 | ns   | 2014-08-30T13:10:51 |
| bb52e52b-1e42-4751-b3ac-45c52d83ba07 | disk.read.bytes | cumulative | 601438.0   | B    | 2014-08-30T13:10:51 |
| bb52e52b-1e42-4751-b3ac-45c52d83ba07 | disk.read.bytes | cumulative | 601438.0   | B    | 2014-08-30T13:20:33 |
| bb52e52b-1e42-4751-b3ac-45c52d83ba07 | cpu             | cumulative | 1.4795e+11 | ns   | 2014-08-30T13:20:34 |
+--------------------------------------+-----------------+------------+------------+------+---------------------+</pre></div><p>Ceilometer also captures data as events, which represents the state of a
resource. Refer to <code class="literal">/telemetry-events</code> for more information regarding
Events.</p><p>To retrieve a list of recent events that occurred in the system, the
following command can be executed:</p><div class="verbatim-wrap"><pre class="screen">$ ceilometer event-list
+--------------------------------------+---------------+----------------------------+-----------------------------------------------------------------+
| Message ID                           | Event Type    | Generated                  | Traits                                                          |
+--------------------------------------+---------------+----------------------------+-----------------------------------------------------------------+
| dfdb87b6-92c6-4d40-b9b5-ba308f304c13 | image.create  | 2015-09-24T22:17:39.498888 | +---------+--------+-----------------+                          |
|                                      |               |                            | |   name  |  type  |      value      |                          |
|                                      |               |                            | +---------+--------+-----------------+                          |
|                                      |               |                            | | service | string | image.localhost |                          |
|                                      |               |                            | +---------+--------+-----------------+                          |
| 84054bc6-2ae6-4b93-b5e7-06964f151cef | image.prepare | 2015-09-24T22:17:39.594192 | +---------+--------+-----------------+                          |
|                                      |               |                            | |   name  |  type  |      value      |                          |
|                                      |               |                            | +---------+--------+-----------------+                          |
|                                      |               |                            | | service | string | image.localhost |                          |
|                                      |               |                            | +---------+--------+-----------------+                          |
| 2ec99c2c-08ee-4079-bf80-27d4a073ded6 | image.update  | 2015-09-24T22:17:39.578336 | +-------------+--------+--------------------------------------+ |
|                                      |               |                            | |     name    |  type  |                value                 | |
|                                      |               |                            | +-------------+--------+--------------------------------------+ |
|                                      |               |                            | |  created_at | string |         2015-09-24T22:17:39Z         | |
|                                      |               |                            | |     name    | string |    cirros-0.3.4-x86_64-uec-kernel    | |
|                                      |               |                            | |  project_id | string |   56ffddea5b4f423496444ea36c31be23   | |
|                                      |               |                            | | resource_id | string | 86eb8273-edd7-4483-a07c-002ff1c5657d | |
|                                      |               |                            | |   service   | string |           image.localhost            | |
|                                      |               |                            | |    status   | string |                saving                | |
|                                      |               |                            | |   user_id   | string |   56ffddea5b4f423496444ea36c31be23   | |
|                                      |               |                            | +-------------+--------+--------------------------------------+ |
+--------------------------------------+---------------+----------------------------+-----------------------------------------------------------------+</pre></div><div id="id-1.4.12.12.5.29" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note</h6><p>In Liberty, the data returned corresponds to the role and user. Non-admin
users will only return events that are scoped to them. Admin users will
return all events related to the project they administer as well as
all unscoped events.</p></div><p>Similar to querying meters, additional filter parameters can be given to
retrieve specific events:</p><div class="verbatim-wrap"><pre class="screen">$ ceilometer event-list -q 'event_type=compute.instance.exists; \
  instance_type=m1.tiny'
+--------------------------------------+-------------------------+----------------------------+----------------------------------------------------------------------------------+
| Message ID                           | Event Type              | Generated                  | Traits                                                                           |
+--------------------------------------+-------------------------+----------------------------+----------------------------------------------------------------------------------+
| 134a2ab3-6051-496c-b82f-10a3c367439a | compute.instance.exists | 2015-09-25T03:00:02.152041 | +------------------------+----------+------------------------------------------+ |
|                                      |                         |                            | |          name          |   type   |                  value                   | |
|                                      |                         |                            | +------------------------+----------+------------------------------------------+ |
|                                      |                         |                            | | audit_period_beginning | datetime |           2015-09-25T02:00:00            | |
|                                      |                         |                            | |  audit_period_ending   | datetime |           2015-09-25T03:00:00            | |
|                                      |                         |                            | |        disk_gb         | integer  |                    1                     | |
|                                      |                         |                            | |      ephemeral_gb      | integer  |                    0                     | |
|                                      |                         |                            | |          host          |  string  |          localhost.localdomain           | |
|                                      |                         |                            | |      instance_id       |  string  |   2115f189-c7f1-4228-97bc-d742600839f2   | |
|                                      |                         |                            | |     instance_type      |  string  |                 m1.tiny                  | |
|                                      |                         |                            | |    instance_type_id    | integer  |                    2                     | |
|                                      |                         |                            | |      launched_at       | datetime |           2015-09-24T22:24:56            | |
|                                      |                         |                            | |       memory_mb        | integer  |                   512                    | |
|                                      |                         |                            | |       project_id       |  string  |     56ffddea5b4f423496444ea36c31be23     | |
|                                      |                         |                            | |       request_id       |  string  | req-c6292b21-bf98-4a1d-b40c-cebba4d09a67 | |
|                                      |                         |                            | |        root_gb         | integer  |                    1                     | |
|                                      |                         |                            | |        service         |  string  |                 compute                  | |
|                                      |                         |                            | |         state          |  string  |                  active                  | |
|                                      |                         |                            | |       tenant_id        |  string  |     56ffddea5b4f423496444ea36c31be23     | |
|                                      |                         |                            | |        user_id         |  string  |     0b3d725756f94923b9d0c4db864d06a9     | |
|                                      |                         |                            | |         vcpus          | integer  |                    1                     | |
|                                      |                         |                            | +------------------------+----------+------------------------------------------+ |
+--------------------------------------+-------------------------+----------------------------+----------------------------------------------------------------------------------+</pre></div><div id="id-1.4.12.12.5.32" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note</h6><p>As of the Liberty release, the number of items returned will be
restricted to the value defined by <code class="literal">default_api_return_limit</code> in the
<code class="literal">ceilometer.conf</code> configuration file. Alternatively, the value can
be set per query by passing the <code class="literal">limit</code> option in the request.</p></div><div class="sect3 " id="id-1.4.12.12.5.33"><div class="titlepage"><div><div><h4 class="title"><span class="number">10.4.2.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Telemetry Python bindings</span> <a title="Permalink" class="permalink" href="bk02ch10.html#id-1.4.12.12.5.33">#</a></h4><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>The command-line client library provides python bindings in order to use
the Telemetry Python API directly from python programs.</p><p>The first step in setting up the client is to create a client instance
with the proper credentials:</p><div class="verbatim-wrap highlight python"><pre class="screen">&gt;&gt;&gt; import ceilometerclient.client
&gt;&gt;&gt; cclient = ceilometerclient.client.get_client(VERSION, username=USERNAME, password=PASSWORD, tenant_name=PROJECT_NAME, auth_url=AUTH_URL)</pre></div><p>The <code class="literal">VERSION</code> parameter can be <code class="literal">1</code> or <code class="literal">2</code>, specifying the API
version to be used.</p><p>The method calls look like the following:</p><div class="verbatim-wrap highlight python"><pre class="screen">&gt;&gt;&gt; cclient.meters.list()
 [&lt;Meter ...&gt;, ...]

&gt;&gt;&gt; cclient.samples.list()
 [&lt;Sample ...&gt;, ...]</pre></div><p>For further details about the python-ceilometerclient package, see the
<a class="link" href="http://docs.openstack.org/developer/python-ceilometerclient/" target="_blank">Python bindings to the OpenStack Ceilometer
API</a>
reference.</p></div></div><div class="sect2 " id="telemetry-publishers"><div class="titlepage"><div><div><h3 class="title"><span class="number">10.4.3 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Publishers</span> <a title="Permalink" class="permalink" href="bk02ch10.html#telemetry-publishers">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span>telemetry-publishers</li></ul></div></div></div></div><p>The Telemetry service provides several transport methods to forward the
data collected to the <code class="literal">ceilometer-collector</code> service or to an external
system. The consumers of this data are widely different, like monitoring
systems, for which data loss is acceptable and billing systems, which
require reliable data transportation. Telemetry provides methods to
fulfill the requirements of both kind of systems, as it is described
below.</p><p>The publisher component makes it possible to persist the data into
storage through the message bus or to send it to one or more external
consumers. One chain can contain multiple publishers.</p><p>To solve the above mentioned problem, the notion of multi-publisher can
be configured for each datapoint within the Telemetry service, allowing
the same technical meter or event to be published multiple times to
multiple destinations, each potentially using a different transport.</p><p>Publishers can be specified in the <code class="literal">publishers</code> section for each
pipeline (for further details about pipelines see
<a class="xref" href="bk02ch10.html#data-collection-and-processing" title="10.3. Data collection, processing, and pipelines">Section 10.3, “Data collection, processing, and pipelines”</a>) that is defined in
the <a class="link" href="https://git.openstack.org/cgit/openstack/ceilometer/plain/etc/ceilometer/pipeline.yaml" target="_blank">pipeline.yaml</a>
file.</p><p>The following publisher types are supported:</p><div class="variablelist "><dl class="variablelist"><dt id="id-1.4.12.12.6.7.1"><span class="term ">direct</span></dt><dd><p>It can be specified in the form of <code class="literal">direct://?dispatcher=http</code>. The
dispatcher's options include database, file, http, and gnocchi. For
more details on dispatcher, see <a class="xref" href="bk02ch10.html#telemetry-storing-samples" title="10.2.6. Storing samples">Section 10.2.6, “Storing samples”</a>.
It emits data in the configured dispatcher directly, default configuration
(the form is <code class="literal">direct://</code>) is database dispatcher.
In the Mitaka release, this method can only emit data to the database
dispatcher, and the form is <code class="literal">direct://</code>.</p></dd><dt id="id-1.4.12.12.6.7.2"><span class="term ">notifier</span></dt><dd><p>It can be specified in the form of
<code class="literal">notifier://?option1=value1&amp;option2=value2</code>. It emits data over
AMQP using oslo.messaging. This is the recommended method of
publishing.</p></dd><dt id="id-1.4.12.12.6.7.3"><span class="term ">rpc</span></dt><dd><p>It can be specified in the form of
<code class="literal">rpc://?option1=value1&amp;option2=value2</code>. It emits metering data
over lossy AMQP. This method is synchronous and may experience
performance issues. This publisher is deprecated in Liberty in favor of
the notifier publisher.</p></dd><dt id="id-1.4.12.12.6.7.4"><span class="term ">udp</span></dt><dd><p>It can be specified in the form of <code class="literal">udp://&lt;host&gt;:&lt;port&gt;/</code>. It emits
metering data for over UDP.</p></dd><dt id="id-1.4.12.12.6.7.5"><span class="term ">file</span></dt><dd><p>It can be specified in the form of
<code class="literal">file://path?option1=value1&amp;option2=value2</code>. This publisher
records metering data into a file.</p></dd></dl></div><div id="id-1.4.12.12.6.8" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note</h6><p>If a file name and location is not specified, this publisher
does not log any meters, instead it logs a warning message in
the configured log file for Telemetry.</p></div><div class="variablelist "><dl class="variablelist"><dt id="id-1.4.12.12.6.9.1"><span class="term ">kafka</span></dt><dd><p>It can be specified in the form of:
<code class="literal">kafka://kafka_broker_ip: kafka_broker_port?topic=kafka_topic
&amp;option1=value1</code>.</p><p>This publisher sends metering data to a kafka broker.</p></dd></dl></div><div id="id-1.4.12.12.6.10" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note</h6><p>If the topic parameter is missing, this publisher brings out
metering data under a topic name, <code class="literal">ceilometer</code>. When the port
number is not specified, this publisher uses 9092 as the
broker's port.</p></div><p>The following options are available for <code class="literal">rpc</code> and <code class="literal">notifier</code>. The
policy option can be used by <code class="literal">kafka</code> publisher:</p><div class="variablelist "><dl class="variablelist"><dt id="id-1.4.12.12.6.12.1"><span class="term ">
              <code class="literal">per_meter_topic</code>
            </span></dt><dd><p>The value of it is 1. It is used for publishing the samples on
additional <code class="literal">metering_topic.sample_name</code> topic queue besides the
default <code class="literal">metering_topic</code> queue.</p></dd><dt id="id-1.4.12.12.6.12.2"><span class="term ">
              <code class="literal">policy</code>
            </span></dt><dd><p>It is used for configuring the behavior for the case, when the
publisher fails to send the samples, where the possible predefined
values are the following:</p><div class="variablelist "><dl class="variablelist"><dt id="id-1.4.12.12.6.12.2.2.2.1"><span class="term ">default</span></dt><dd><p>Used for waiting and blocking until the samples have been sent.</p></dd><dt id="id-1.4.12.12.6.12.2.2.2.2"><span class="term ">drop</span></dt><dd><p>Used for dropping the samples which are failed to be sent.</p></dd><dt id="id-1.4.12.12.6.12.2.2.2.3"><span class="term ">queue</span></dt><dd><p>Used for creating an in-memory queue and retrying to send the
samples on the queue on the next samples publishing period (the
queue length can be configured with <code class="literal">max_queue_length</code>, where
1024 is the default value).</p></dd></dl></div></dd></dl></div><p>The following option is additionally available for the <code class="literal">notifier</code> publisher:</p><div class="variablelist "><dl class="variablelist"><dt id="id-1.4.12.12.6.14.1"><span class="term ">
              <code class="literal">topic</code>
            </span></dt><dd><p>The topic name of queue to publish to. Setting this will override the
default topic defined by <code class="literal">metering_topic</code> and <code class="literal">event_topic</code> options.
This option can be used to support multiple consumers. Support for this
feature was added in Kilo.</p></dd></dl></div><p>The following options are available for the <code class="literal">file</code> publisher:</p><div class="variablelist "><dl class="variablelist"><dt id="id-1.4.12.12.6.16.1"><span class="term ">
              <code class="literal">max_bytes</code>
            </span></dt><dd><p>When this option is greater than zero, it will cause a rollover.
When the size is about to be exceeded, the file is closed and a new
file is silently opened for output. If its value is zero, rollover
never occurs.</p></dd><dt id="id-1.4.12.12.6.16.2"><span class="term ">
              <code class="literal">backup_count</code>
            </span></dt><dd><p>If this value is non-zero, an extension will be appended to the
filename of the old log, as '.1', '.2', and so forth until the
specified value is reached. The file that is written and contains
the newest data is always the one that is specified without any
extensions.</p></dd></dl></div><p>The default publisher is <code class="literal">notifier</code>, without any additional options
specified. A sample <code class="literal">publishers</code> section in the
<code class="literal">/etc/ceilometer/pipeline.yaml</code> looks like the following:</p><div class="verbatim-wrap highlight yaml"><pre class="screen">publishers:
    - udp://10.0.0.2:1234
    - rpc://?per_meter_topic=1 (deprecated in Liberty)
    - notifier://?policy=drop&amp;max_queue_length=512&amp;topic=custom_target
    - direct://?dispatcher=http</pre></div></div></div><div class="sect1 " id="telemetry-alarms"><div class="titlepage"><div><div><h2 class="title"><span class="number">10.5 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Alarms</span> <a title="Permalink" class="permalink" href="bk02ch10.html#telemetry-alarms">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span>telemetry-alarms</li></ul></div></div></div></div><p>Alarms provide user-oriented Monitoring-as-a-Service for resources
running on OpenStack. This type of monitoring ensures you can
automatically scale in or out a group of instances through the
Orchestration service, but you can also use alarms for general-purpose
awareness of your cloud resources' health.</p><p>These alarms follow a tri-state model:</p><div class="variablelist "><dl class="variablelist"><dt id="id-1.4.12.13.4.1"><span class="term ">ok</span></dt><dd><p>The rule governing the alarm has been evaluated as <code class="literal">False</code>.</p></dd><dt id="id-1.4.12.13.4.2"><span class="term ">alarm</span></dt><dd><p>The rule governing the alarm have been evaluated as <code class="literal">True</code>.</p></dd><dt id="id-1.4.12.13.4.3"><span class="term ">insufficient data</span></dt><dd><p>There are not enough datapoints available in the evaluation periods
to meaningfully determine the alarm state.</p></dd></dl></div><div class="sect2 " id="id-1.4.12.13.5"><div class="titlepage"><div><div><h3 class="title"><span class="number">10.5.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Alarm definitions</span> <a title="Permalink" class="permalink" href="bk02ch10.html#id-1.4.12.13.5">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>The definition of an alarm provides the rules that govern when a state
transition should occur, and the actions to be taken thereon. The
nature of these rules depend on the alarm type.</p><div class="sect3 " id="id-1.4.12.13.5.3"><div class="titlepage"><div><div><h4 class="title"><span class="number">10.5.1.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Threshold rule alarms</span> <a title="Permalink" class="permalink" href="bk02ch10.html#id-1.4.12.13.5.3">#</a></h4><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>For conventional threshold-oriented alarms, state transitions are
governed by:</p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>A static threshold value with a comparison operator such as greater
than or less than.</p></li><li class="listitem "><p>A statistic selection to aggregate the data.</p></li><li class="listitem "><p>A sliding time window to indicate how far back into the recent past
you want to look.</p></li></ul></div></div><div class="sect3 " id="id-1.4.12.13.5.4"><div class="titlepage"><div><div><h4 class="title"><span class="number">10.5.1.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Combination rule alarms</span> <a title="Permalink" class="permalink" href="bk02ch10.html#id-1.4.12.13.5.4">#</a></h4><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>The Telemetry service also supports the concept of a meta-alarm, which
aggregates over the current state of a set of underlying basic alarms
combined via a logical operator (AND or OR).</p></div></div><div class="sect2 " id="id-1.4.12.13.6"><div class="titlepage"><div><div><h3 class="title"><span class="number">10.5.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Alarm dimensioning</span> <a title="Permalink" class="permalink" href="bk02ch10.html#id-1.4.12.13.6">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>A key associated concept is the notion of <span class="emphasis"><em>dimensioning</em></span> which
defines the set of matching meters that feed into an alarm
evaluation. Recall that meters are per-resource-instance, so in the
simplest case an alarm might be defined over a particular meter
applied to all resources visible to a particular user. More useful
however would be the option to explicitly select which specific
resources you are interested in alarming on.</p><p>At one extreme you might have narrowly dimensioned alarms where this
selection would have only a single target (identified by resource
ID). At the other extreme, you could have widely dimensioned alarms
where this selection identifies many resources over which the
statistic is aggregated. For example all instances booted from a
particular image or all instances with matching user metadata (the
latter is how the Orchestration service identifies autoscaling
groups).</p></div><div class="sect2 " id="id-1.4.12.13.7"><div class="titlepage"><div><div><h3 class="title"><span class="number">10.5.3 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Alarm evaluation</span> <a title="Permalink" class="permalink" href="bk02ch10.html#id-1.4.12.13.7">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>Alarms are evaluated by the <code class="literal">alarm-evaluator</code> service on a periodic
basis, defaulting to once every minute.</p><div class="sect3 " id="id-1.4.12.13.7.3"><div class="titlepage"><div><div><h4 class="title"><span class="number">10.5.3.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Alarm actions</span> <a title="Permalink" class="permalink" href="bk02ch10.html#id-1.4.12.13.7.3">#</a></h4><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>Any state transition of individual alarm (to <code class="literal">ok</code>, <code class="literal">alarm</code>, or
<code class="literal">insufficient data</code>) may have one or more actions associated with
it. These actions effectively send a signal to a consumer that the
state transition has occurred, and provide some additional context.
This includes the new and previous states, with some reason data
describing the disposition with respect to the threshold, the number
of datapoints involved and most recent of these. State transitions
are detected by the <code class="literal">alarm-evaluator</code>, whereas the
<code class="literal">alarm-notifier</code> effects the actual notification action.</p><p>
            <span class="bold"><strong>Webhooks</strong></span>
          </p><p>These are the <span class="emphasis"><em>de facto</em></span> notification type used by Telemetry alarming
and simply involve an HTTP POST request being sent to an endpoint,
with a request body containing a description of the state transition
encoded as a JSON fragment.</p><p>
            <span class="bold"><strong>Log actions</strong></span>
          </p><p>These are a lightweight alternative to webhooks, whereby the state
transition is simply logged by the <code class="literal">alarm-notifier</code>, and are
intended primarily for testing purposes.</p></div><div class="sect3 " id="id-1.4.12.13.7.4"><div class="titlepage"><div><div><h4 class="title"><span class="number">10.5.3.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Workload partitioning</span> <a title="Permalink" class="permalink" href="bk02ch10.html#id-1.4.12.13.7.4">#</a></h4><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>The alarm evaluation process uses the same mechanism for workload
partitioning as the central and compute agents. The
<a class="link" href="https://pypi.python.org/pypi/tooz" target="_blank">Tooz</a> library provides the
coordination within the groups of service instances. For further
information about this approach, see the section called
<a class="xref" href="bk02ch10.html#ha-deploy-services" title="10.2.3. Support for HA deployment">Section 10.2.3, “Support for HA deployment”</a>.</p><p>To use this workload partitioning solution set the
<code class="literal">evaluation_service</code> option to <code class="literal">default</code>. For more
information, see the alarm section in the
<a class="link" href="http://docs.openstack.org/newton/config-reference/telemetry.html" target="_blank">OpenStack Configuration Reference</a>.</p></div></div><div class="sect2 " id="id-1.4.12.13.8"><div class="titlepage"><div><div><h3 class="title"><span class="number">10.5.4 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Using alarms</span> <a title="Permalink" class="permalink" href="bk02ch10.html#id-1.4.12.13.8">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><div class="sect3 " id="id-1.4.12.13.8.2"><div class="titlepage"><div><div><h4 class="title"><span class="number">10.5.4.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Alarm creation</span> <a title="Permalink" class="permalink" href="bk02ch10.html#id-1.4.12.13.8.2">#</a></h4><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>An example of creating a threshold-oriented alarm, based on an upper
bound on the CPU utilization for a particular instance:</p><div class="verbatim-wrap"><pre class="screen">$ ceilometer alarm-threshold-create --name cpu_hi \
  --description 'instance running hot' \
  --meter-name cpu_util --threshold 70.0 \
  --comparison-operator gt --statistic avg \
  --period 600 --evaluation-periods 3 \
  --alarm-action 'log://' \
  --query resource_id=INSTANCE_ID</pre></div><p>This creates an alarm that will fire when the average CPU utilization
for an individual instance exceeds 70% for three consecutive 10
minute periods. The notification in this case is simply a log message,
though it could alternatively be a webhook URL.</p><div id="id-1.4.12.13.8.2.5" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note</h6><p>Alarm names must be unique for the alarms associated with an
individual project. Administrator can limit the maximum
resulting actions for three different states, and the
ability for a normal user to create <code class="literal">log://</code> and <code class="literal">test://</code>
notifiers is disabled. This prevents unintentional
consumption of disk and memory resources by the
Telemetry service.</p></div><p>The sliding time window over which the alarm is evaluated is 30
minutes in this example. This window is not clamped to wall-clock
time boundaries, rather it's anchored on the current time for each
evaluation cycle, and continually creeps forward as each evaluation
cycle rolls around (by default, this occurs every minute).</p><p>The period length is set to 600s in this case to reflect the
out-of-the-box default cadence for collection of the associated
meter. This period matching illustrates an important general
principal to keep in mind for alarms:</p><div id="id-1.4.12.13.8.2.8" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note</h6><p>The alarm period should be a whole number multiple (1 or more)
of the interval configured in the pipeline corresponding to the
target meter.</p></div><p>Otherwise the alarm will tend to flit in and out of the
<code class="literal">insufficient data</code> state due to the mismatch between the actual
frequency of datapoints in the metering store and the statistics
queries used to compare against the alarm threshold. If a shorter
alarm period is needed, then the corresponding interval should be
adjusted in the <code class="literal">pipeline.yaml</code> file.</p><p>Other notable alarm attributes that may be set on creation, or via a
subsequent update, include:</p><div class="variablelist "><dl class="variablelist"><dt id="id-1.4.12.13.8.2.11.1"><span class="term ">state</span></dt><dd><p>The initial alarm state (defaults to <code class="literal">insufficient data</code>).</p></dd><dt id="id-1.4.12.13.8.2.11.2"><span class="term ">description</span></dt><dd><p>A free-text description of the alarm (defaults to a synopsis of the
alarm rule).</p></dd><dt id="id-1.4.12.13.8.2.11.3"><span class="term ">enabled</span></dt><dd><p>True if evaluation and actioning is to be enabled for this alarm
(defaults to <code class="literal">True</code>).</p></dd><dt id="id-1.4.12.13.8.2.11.4"><span class="term ">repeat-actions</span></dt><dd><p>True if actions should be repeatedly notified while the alarm
remains in the target state (defaults to <code class="literal">False</code>).</p></dd><dt id="id-1.4.12.13.8.2.11.5"><span class="term ">ok-action</span></dt><dd><p>An action to invoke when the alarm state transitions to <code class="literal">ok</code>.</p></dd><dt id="id-1.4.12.13.8.2.11.6"><span class="term ">insufficient-data-action</span></dt><dd><p>An action to invoke when the alarm state transitions to
<code class="literal">insufficient data</code>.</p></dd><dt id="id-1.4.12.13.8.2.11.7"><span class="term ">time-constraint</span></dt><dd><p>Used to restrict evaluation of the alarm to certain times of the
day or days of the week (expressed as <code class="literal">cron</code> expression with an
optional timezone).</p></dd></dl></div><p>An example of creating a combination alarm, based on the combined
state of two underlying alarms:</p><div class="verbatim-wrap"><pre class="screen">$ ceilometer alarm-combination-create --name meta \
  --alarm_ids ALARM_ID1 \
  --alarm_ids ALARM_ID2 \
  --operator or \
  --alarm-action 'http://example.org/notify'</pre></div><p>This creates an alarm that will fire when either one of two underlying
alarms transition into the alarm state. The notification in this case
is a webhook call. Any number of underlying alarms can be combined in
this way, using either <code class="literal">and</code> or <code class="literal">or</code>.</p></div><div class="sect3 " id="id-1.4.12.13.8.3"><div class="titlepage"><div><div><h4 class="title"><span class="number">10.5.4.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Alarm retrieval</span> <a title="Permalink" class="permalink" href="bk02ch10.html#id-1.4.12.13.8.3">#</a></h4><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>You can display all your alarms via (some attributes are omitted for
brevity):</p><div class="verbatim-wrap"><pre class="screen">$ ceilometer alarm-list
+----------+--------+-------------------+---------------------------------+
| Alarm ID | Name   | State             | Alarm condition                 |
+----------+--------+-------------------+---------------------------------+
| ALARM_ID | cpu_hi | insufficient data | cpu_util &gt; 70.0 during 3 x 600s |
+----------+--------+-------------------+---------------------------------+</pre></div><p>In this case, the state is reported as <code class="literal">insufficient data</code> which
could indicate that:</p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>meters have not yet been gathered about this instance over the
evaluation window into the recent past (for example a brand-new
instance)</p></li><li class="listitem "><p><span class="emphasis"><em>or</em></span>, that the identified instance is not visible to the
user/project owning the alarm</p></li><li class="listitem "><p><span class="emphasis"><em>or</em></span>, simply that an alarm evaluation cycle hasn't kicked off since
the alarm was created (by default, alarms are evaluated once per
minute).</p></li></ul></div><div id="id-1.4.12.13.8.3.6" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note</h6><p>The visibility of alarms depends on the role and project
associated with the user issuing the query:</p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>admin users see <span class="emphasis"><em>all</em></span> alarms, regardless of the owner</p></li><li class="listitem "><p>non-admin users see only the alarms associated with their project
(as per the normal project segregation in OpenStack)</p></li></ul></div></div></div><div class="sect3 " id="id-1.4.12.13.8.4"><div class="titlepage"><div><div><h4 class="title"><span class="number">10.5.4.3 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Alarm update</span> <a title="Permalink" class="permalink" href="bk02ch10.html#id-1.4.12.13.8.4">#</a></h4><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>Once the state of the alarm has settled down, we might decide that we
set that bar too low with 70%, in which case the threshold (or most
any other alarm attribute) can be updated thusly:</p><div class="verbatim-wrap"><pre class="screen">$ ceilometer alarm-update --threshold 75 ALARM_ID</pre></div><p>The change will take effect from the next evaluation cycle, which by
default occurs every minute.</p><p>Most alarm attributes can be changed in this way, but there is also
a convenient short-cut for getting and setting the alarm state:</p><div class="verbatim-wrap"><pre class="screen">$ ceilometer alarm-state-get ALARM_ID
$ ceilometer alarm-state-set --state ok -a ALARM_ID</pre></div><p>Over time the state of the alarm may change often, especially if the
threshold is chosen to be close to the trending value of the
statistic. You can follow the history of an alarm over its lifecycle
via the audit API:</p><div class="verbatim-wrap"><pre class="screen">$ ceilometer alarm-history ALARM_ID
+------------------+-----------+---------------------------------------+
| Type             | Timestamp | Detail                                |
+------------------+-----------+---------------------------------------+
| creation         | time0     | name: cpu_hi                          |
|                  |           | description: instance running hot     |
|                  |           | type: threshold                       |
|                  |           | rule: cpu_util &gt; 70.0 during 3 x 600s |
| state transition | time1     | state: ok                             |
| rule change      | time2     | rule: cpu_util &gt; 75.0 during 3 x 600s |
+------------------+-----------+---------------------------------------+</pre></div></div><div class="sect3 " id="id-1.4.12.13.8.5"><div class="titlepage"><div><div><h4 class="title"><span class="number">10.5.4.4 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Alarm deletion</span> <a title="Permalink" class="permalink" href="bk02ch10.html#id-1.4.12.13.8.5">#</a></h4><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>An alarm that is no longer required can be disabled so that it is no
longer actively evaluated:</p><div class="verbatim-wrap"><pre class="screen">$ ceilometer alarm-update --enabled False -a ALARM_ID</pre></div><p>or even deleted permanently (an irreversible step):</p><div class="verbatim-wrap"><pre class="screen">$ ceilometer alarm-delete ALARM_ID</pre></div><div id="id-1.4.12.13.8.5.6" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note</h6><p>By default, alarm history is retained for deleted alarms.</p></div></div></div></div><div class="sect1 " id="telemetry-measurements"><div class="titlepage"><div><div><h2 class="title"><span class="number">10.6 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Measurements</span> <a title="Permalink" class="permalink" href="bk02ch10.html#telemetry-measurements">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span>telemetry-measurements</li></ul></div></div></div></div><p>The Telemetry service collects meters within an OpenStack deployment.
This section provides a brief summary about meters format and origin and
also contains the list of available meters.</p><p>Telemetry collects meters by polling the infrastructure elements and
also by consuming the notifications emitted by other OpenStack services.
For more information about the polling mechanism and notifications see
<a class="xref" href="bk02ch10.html#telemetry-data-collection" title="10.2. Data collection">Section 10.2, “Data collection”</a>. There are several meters which are collected
by polling and by consuming. The origin for each meter is listed in the tables
below.</p><div id="id-1.4.12.14.4" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note</h6><p>You may need to configure Telemetry or other OpenStack services in
order to be able to collect all the samples you need. For further
information about configuration requirements see the <a class="link" href="http://docs.openstack.org/project-install-guide/telemetry/newton/" target="_blank">Telemetry chapter</a>
in the Installation Tutorials and Guides. Also check the <a class="link" href="http://docs.openstack.org/developer/ceilometer/install/manual.html" target="_blank">Telemetry manual
installation</a>
description.</p></div><p>Telemetry uses the following meter types:</p><div class="informaltable"><table class="informaltable" border="1"><colgroup><col class="c1" /><col class="c2" /></colgroup><thead><tr><th>
                <p>Type</p>
              </th><th>
                <p>Description</p>
              </th></tr></thead><tbody><tr><td>
                <p>Cumulative</p>
              </td><td>
                <p>Increasing over time (instance hours)</p>
              </td></tr><tr><td>
                <p>Delta</p>
              </td><td>
                <p>Changing over time (bandwidth)</p>
              </td></tr><tr><td>
                <p>Gauge</p>
              </td><td>
                <p>Discrete items (floating IPs, image uploads) and fluctuating
values (disk I/O)</p>
              </td></tr></tbody></table></div><p>Telemetry provides the possibility to store metadata for samples. This
metadata can be extended for OpenStack Compute and OpenStack Object
Storage.</p><p>In order to add additional metadata information to OpenStack Compute you
have two options to choose from. The first one is to specify them when
you boot up a new instance. The additional information will be stored
with the sample in the form of <code class="literal">resource_metadata.user_metadata.*</code>.
The new field should be defined by using the prefix <code class="literal">metering.</code>. The
modified boot command look like the following:</p><div class="verbatim-wrap"><pre class="screen">$ openstack server create --property metering.custom_metadata=a_value my_vm</pre></div><p>The other option is to set the <code class="literal">reserved_metadata_keys</code> to the list of
metadata keys that you would like to be included in
<code class="literal">resource_metadata</code> of the instance related samples that are collected
for OpenStack Compute. This option is included in the <code class="literal">DEFAULT</code>
section of the <code class="literal">ceilometer.conf</code> configuration file.</p><p>You might also specify headers whose values will be stored along with
the sample data of OpenStack Object Storage. The additional information
is also stored under <code class="literal">resource_metadata</code>. The format of the new field
is <code class="literal">resource_metadata.http_header_$name</code>, where <code class="literal">$name</code> is the name of
the header with <code class="literal">-</code> replaced by <code class="literal">_</code>.</p><p>For specifying the new header, you need to set <code class="literal">metadata_headers</code> option
under the <code class="literal">[filter:ceilometer]</code> section in <code class="literal">proxy-server.conf</code> under the
<code class="literal">swift</code> folder. You can use this additional data for instance to distinguish
external and internal users.</p><p>Measurements are grouped by services which are polled by
Telemetry or emit notifications that this service consumes.</p><div id="id-1.4.12.14.14" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note</h6><p>The Telemetry service supports storing notifications as events. This
functionality was added later, therefore the list of meters still
contains existence type and other event related items. The proper
way of using Telemetry is to configure it to use the event store and
turn off the collection of the event related meters. For further
information about events see <a class="link" href="http://docs.openstack.org/developer/ceilometer/events.html" target="_blank">Events section</a>
in the Telemetry documentation. For further information about how to
turn on and off meters see <a class="xref" href="bk02ch10.html#telemetry-pipeline-configuration" title="10.3.1. Pipeline configuration">Section 10.3.1, “Pipeline configuration”</a>. Please
also note that currently no migration is available to move the already
existing event type samples to the event store.</p></div><div class="sect2 " id="telemetry-compute-meters"><div class="titlepage"><div><div><h3 class="title"><span class="number">10.6.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">OpenStack Compute</span> <a title="Permalink" class="permalink" href="bk02ch10.html#telemetry-compute-meters">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span>telemetry-compute-meters</li></ul></div></div></div></div><p>The following meters are collected for OpenStack Compute:</p><div class="informaltable"><table class="informaltable" border="1"><colgroup><col class="c1" /><col class="c2" /><col class="c3" /><col class="c4" /><col class="c5" /><col class="c6" /><col class="c7" /></colgroup><thead><tr><th>
                  <p>Name</p>
                </th><th>
                  <p>Type</p>
                </th><th>
                  <p>Unit</p>
                </th><th>
                  <p>Resource</p>
                </th><th>
                  <p>Origin</p>
                </th><th>
                  <p>Support</p>
                </th><th>
                  <p>Note</p>
                </th></tr></thead><tbody><tr><td colspan="7">
                  <p>
                    <span class="bold"><strong>Meters added in the Icehouse release or earlier</strong></span>
                  </p>
                </td></tr><tr><td>
                  <p>instance</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>instance</p>
                </td><td>
                  <p>instance
ID</p>
                </td><td>
                  <p>Notification,
Pollster</p>
                </td><td>
                  <p>Libvirt, vSphere</p>
                </td><td>
                  <p>Existence of
instance</p>
                </td></tr><tr><td>
                  <p>instance:&lt;type&gt;</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>instance</p>
                </td><td>
                  <p>instance
ID</p>
                </td><td>
                  <p>Notification,
Pollster</p>
                </td><td>
                  <p>Libvirt, vSphere</p>
                </td><td>
                  <p>Existence of
instance &lt;type&gt;
(OpenStack types)</p>
                </td></tr><tr><td>
                  <p>memory</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>MB</p>
                </td><td>
                  <p>instance
ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>Libvirt</p>
                </td><td>
                  <p>Volume of RAM
allocated to the
instance</p>
                </td></tr><tr><td>
                  <p>memory.usage</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>MB</p>
                </td><td>
                  <p>instance
ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>vSphere</p>
                </td><td>
                  <p>Volume of RAM
used by the
instance from the
amount of its
allocated memory</p>
                </td></tr><tr><td>
                  <p>cpu</p>
                </td><td>
                  <p>Cumulative</p>
                </td><td>
                  <p>ns</p>
                </td><td>
                  <p>instance
ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Libvirt</p>
                </td><td>
                  <p>CPU time used</p>
                </td></tr><tr><td>
                  <p>cpu_util</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>%</p>
                </td><td>
                  <p>instance
ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>vSphere</p>
                </td><td>
                  <p>Average CPU
utilization</p>
                </td></tr><tr><td>
                  <p>vcpus</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>vcpu</p>
                </td><td>
                  <p>instance
ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>Libvirt</p>
                </td><td>
                  <p>Number of virtual
CPUs allocated to
the instance</p>
                </td></tr><tr><td>
                  <p>disk.read.requests</p>
                </td><td>
                  <p>Cumulative</p>
                </td><td>
                  <p>request</p>
                </td><td>
                  <p>instance
ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Libvirt</p>
                </td><td>
                  <p>Number of read
requests</p>
                </td></tr><tr><td>
                  <p>disk.read.requests.rate</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>request/s</p>
                </td><td>
                  <p>instance
ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Libvirt, vSphere</p>
                </td><td>
                  <p>Average rate of
read requests</p>
                </td></tr><tr><td>
                  <p>disk.write.requests</p>
                </td><td>
                  <p>Cumulative</p>
                </td><td>
                  <p>request</p>
                </td><td>
                  <p>instance
ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Libvirt</p>
                </td><td>
                  <p>Number of write
requests</p>
                </td></tr><tr><td>
                  <p>disk.write.requests.rate</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>request/s</p>
                </td><td>
                  <p>instance
ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Libvirt, vSphere</p>
                </td><td>
                  <p>Average rate of
write requests</p>
                </td></tr><tr><td>
                  <p>disk.read.bytes</p>
                </td><td>
                  <p>Cumulative</p>
                </td><td>
                  <p>B</p>
                </td><td>
                  <p>instance
ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Libvirt</p>
                </td><td>
                  <p>Volume of reads</p>
                </td></tr><tr><td>
                  <p>disk.read.bytes.rate</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>B/s</p>
                </td><td>
                  <p>instance
ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Libvirt, vSphere</p>
                </td><td>
                  <p>Average rate of
reads</p>
                </td></tr><tr><td>
                  <p>disk.write.bytes</p>
                </td><td>
                  <p>Cumulative</p>
                </td><td>
                  <p>B</p>
                </td><td>
                  <p>instance
ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Libvirt </p>
                </td><td>
                  <p>Volume of writes</p>
                </td></tr><tr><td>
                  <p>disk.write.bytes.rate</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>B/s</p>
                </td><td>
                  <p>instance
ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Libvirt, vSphere</p>
                </td><td>
                  <p>Average rate of
writes</p>
                </td></tr><tr><td>
                  <p>disk.root.size</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>GB</p>
                </td><td>
                  <p>instance
ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>Libvirt</p>
                </td><td>
                  <p>Size of root disk</p>
                </td></tr><tr><td>
                  <p>disk.ephemeral.size</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>GB</p>
                </td><td>
                  <p>instance
ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>Libvirt</p>
                </td><td>
                  <p>Size of ephemeral
disk</p>
                </td></tr><tr><td>
                  <p>network.incoming.bytes</p>
                </td><td>
                  <p>Cumulative</p>
                </td><td>
                  <p>B</p>
                </td><td>
                  <p>interface
ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Libvirt</p>
                </td><td>
                  <p>Number of
incoming bytes</p>
                </td></tr><tr><td>
                  <p>network.incoming.bytes.rate</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>B/s</p>
                </td><td>
                  <p>interface
ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Libvirt, vSphere</p>
                </td><td>
                  <p>Average rate of
incoming bytes</p>
                </td></tr><tr><td>
                  <p>network.outgoing.bytes</p>
                </td><td>
                  <p>Cumulative</p>
                </td><td>
                  <p>B</p>
                </td><td>
                  <p>interface
ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Libvirt</p>
                </td><td>
                  <p>Number of
outgoing bytes</p>
                </td></tr><tr><td>
                  <p>network.outgoing.bytes.rate</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>B/s</p>
                </td><td>
                  <p>interface
ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Libvirt, vSphere</p>
                </td><td>
                  <p>Average rate of
outgoing bytes</p>
                </td></tr><tr><td>
                  <p>network.incoming.packets</p>
                </td><td>
                  <p>Cumulative</p>
                </td><td>
                  <p>packet</p>
                </td><td>
                  <p>interface
ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Libvirt</p>
                </td><td>
                  <p>Number of
incoming packets</p>
                </td></tr><tr><td>
                  <p>network.incoming.packets.rate</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>packet/s</p>
                </td><td>
                  <p>interface
ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Libvirt, vSphere</p>
                </td><td>
                  <p>Average rate of
incoming packets</p>
                </td></tr><tr><td>
                  <p>network.outgoing.packets</p>
                </td><td>
                  <p>Cumulative</p>
                </td><td>
                  <p>packet</p>
                </td><td>
                  <p>interface
ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Libvirt</p>
                </td><td>
                  <p>Number of
outgoing packets</p>
                </td></tr><tr><td>
                  <p>network.outgoing.packets.rate</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>packet/s</p>
                </td><td>
                  <p>interface
ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Libvirt, vSphere</p>
                </td><td>
                  <p>Average rate of
outgoing packets</p>
                </td></tr><tr><td colspan="7">
                  <p>
                    <span class="bold"><strong>Meters added or hypervisor support changed in the Juno release</strong></span>
                  </p>
                </td></tr><tr><td>
                  <p>instance</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>instance</p>
                </td><td>
                  <p>instance
ID</p>
                </td><td>
                  <p>Notification,
Pollster</p>
                </td><td>
                  <p>Libvirt,
vSphere,
XenAPI</p>
                </td><td>
                  <p>Existence of
instance</p>
                </td></tr><tr><td>
                  <p>instance:&lt;type&gt;</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>instance</p>
                </td><td>
                  <p>instance
ID</p>
                </td><td>
                  <p>Notification,
Pollster</p>
                </td><td>
                  <p>Libvirt,
vSphere,
XenAPI</p>
                </td><td>
                  <p>Existence of
instance &lt;type&gt;
(OpenStack types)</p>
                </td></tr><tr><td>
                  <p>memory.usage</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>MB</p>
                </td><td>
                  <p>instance
ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>vSphere,
XenAPI</p>
                </td><td>
                  <p>Volume of RAM
used by the
instance from the
amount of its
allocated memory</p>
                </td></tr><tr><td>
                  <p>cpu_util</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>%</p>
                </td><td>
                  <p>instance
ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>vSphere,
XenAPI</p>
                </td><td>
                  <p>Average CPU
utilization</p>
                </td></tr><tr><td>
                  <p>disk.read.bytes.rate</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>B/s</p>
                </td><td>
                  <p>instance
ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Libvirt,
vSphere,
XenAPI</p>
                </td><td>
                  <p>Average rate of
reads</p>
                </td></tr><tr><td>
                  <p>disk.write.bytes.rate</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>B/s</p>
                </td><td>
                  <p>instance
ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Libvirt,
vSphere,
XenAPI</p>
                </td><td>
                  <p>Average rate of
writes</p>
                </td></tr><tr><td>
                  <p>disk.device.read.requests</p>
                </td><td>
                  <p>Cumulative</p>
                </td><td>
                  <p>request</p>
                </td><td>
                  <p>disk ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Libvirt</p>
                </td><td>
                  <p>Number of read
requests</p>
                </td></tr><tr><td>
                  <p>disk.device.read.requests.rate</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>request/s</p>
                </td><td>
                  <p>disk ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Libvirt, vSphere</p>
                </td><td>
                  <p>Average rate of
read requests</p>
                </td></tr><tr><td>
                  <p>disk.device.write.requests</p>
                </td><td>
                  <p>Cumulative</p>
                </td><td>
                  <p>request</p>
                </td><td>
                  <p>disk ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Libvirt</p>
                </td><td>
                  <p>Number of write
requests</p>
                </td></tr><tr><td>
                  <p>disk.device.write.requests.rate</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>request/s</p>
                </td><td>
                  <p>disk ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Libvirt, vSphere</p>
                </td><td>
                  <p>Average rate of
write requests</p>
                </td></tr><tr><td>
                  <p>disk.device.read.bytes</p>
                </td><td>
                  <p>Cumulative</p>
                </td><td>
                  <p>B</p>
                </td><td>
                  <p>disk ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Libvirt</p>
                </td><td>
                  <p>Volume of reads</p>
                </td></tr><tr><td>
                  <p>disk.device.read.bytes
.rate</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>B/s</p>
                </td><td>
                  <p>disk ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Libvirt, vSphere</p>
                </td><td>
                  <p>Average rate of
reads</p>
                </td></tr><tr><td>
                  <p>disk.device.write.bytes</p>
                </td><td>
                  <p>Cumulative</p>
                </td><td>
                  <p>B</p>
                </td><td>
                  <p>disk ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Libvirt</p>
                </td><td>
                  <p>Volume of writes</p>
                </td></tr><tr><td>
                  <p>disk.device.write.bytes
.rate</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>B/s</p>
                </td><td>
                  <p>disk ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Libvirt, vSphere</p>
                </td><td>
                  <p>Average rate of
writes</p>
                </td></tr><tr><td>
                  <p>network.incoming.bytes.rate</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>B/s</p>
                </td><td>
                  <p>interface
ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Libvirt,
vSphere,
XenAPI</p>
                </td><td>
                  <p>Average rate of
incoming bytes</p>
                </td></tr><tr><td>
                  <p>network.outgoing.bytes.rate</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>B/s</p>
                </td><td>
                  <p>interface
ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Libvirt,
vSphere,
XenAPI</p>
                </td><td>
                  <p>Average rate of
outgoing bytes</p>
                </td></tr><tr><td>
                  <p>network.incoming.packets.rate</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>packet/s</p>
                </td><td>
                  <p>interface
ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Libvirt,
vSphere,
XenAPI</p>
                </td><td>
                  <p>Average rate of
incoming packets</p>
                </td></tr><tr><td>
                  <p>network.outgoing.packets.rate</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>packet/s</p>
                </td><td>
                  <p>interface
ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Libvirt,
vSphere,
XenAPI</p>
                </td><td>
                  <p>Average rate of
outgoing packets</p>
                </td></tr><tr><td colspan="7">
                  <p>
                    <span class="bold"><strong>Meters added or hypervisor support changed in the Kilo release</strong></span>
                  </p>
                </td></tr><tr><td>
                  <p>memory.usage</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>MB</p>
                </td><td>
                  <p>instance
ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Libvirt,
vSphere,
XenAPI</p>
                </td><td>
                  <p>Volume of RAM
used by the instance from the
amount of its
allocated memory</p>
                </td></tr><tr><td>
                  <p>memory.resident</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>MB</p>
                </td><td>
                  <p>instance
ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Libvirt</p>
                </td><td>
                  <p>Volume of RAM used by the instance on the physical machine</p>
                </td></tr><tr><td>
                  <p>disk.capacity</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>B</p>
                </td><td>
                  <p>instance
ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Libvirt</p>
                </td><td>
                  <p>The amount of disk that the instance can see</p>
                </td></tr><tr><td>
                  <p>disk.allocation</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>B</p>
                </td><td>
                  <p>instance
ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Libvirt</p>
                </td><td>
                  <p>The amount of disk occupied by
the instance on the host machine</p>
                </td></tr><tr><td>
                  <p>disk.usage</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>B</p>
                </td><td>
                  <p>instance
ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Libvirt</p>
                </td><td>
                  <p>The physical size in bytes of
the image container on the host</p>
                </td></tr><tr><td>
                  <p>disk.device.capacity</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>B</p>
                </td><td>
                  <p>disk ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Libvirt</p>
                </td><td>
                  <p>The amount of disk per device
that the instance can see</p>
                </td></tr><tr><td>
                  <p>disk.device.allocation</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>B</p>
                </td><td>
                  <p>disk ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Libvirt</p>
                </td><td>
                  <p>The amount of disk per device
occupied by the
instance on the host machine</p>
                </td></tr><tr><td>
                  <p>disk.device.usage</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>B</p>
                </td><td>
                  <p>disk ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Libvirt</p>
                </td><td>
                  <p>The physical size in bytes of
the image container on the host per device</p>
                </td></tr><tr><td colspan="7">
                  <p>
                    <span class="bold"><strong>Meters deprecated in the Kilo release</strong></span>
                  </p>
                </td></tr><tr><td>
                  <p>instance:&lt;type&gt;</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>instance</p>
                </td><td>
                  <p>instance
ID</p>
                </td><td>
                  <p>Notification,
Pollster</p>
                </td><td>
                  <p>Libvirt,
vSphere,
XenAPI</p>
                </td><td>
                  <p>Existence of
instance &lt;type&gt;
(OpenStack types)</p>
                </td></tr><tr><td colspan="7">
                  <p>
                    <span class="bold"><strong>Meters added in the Liberty release</strong></span>
                  </p>
                </td></tr><tr><td>
                  <p>cpu.delta</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>ns</p>
                </td><td>
                  <p>instance
ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Libvirt</p>
                </td><td>
                  <p>CPU time used since previous datapoint</p>
                </td></tr><tr><td colspan="7">
                  <p>
                    <span class="bold"><strong>Meters added in the Newton release</strong></span>
                  </p>
                </td></tr><tr><td>
                  <p>cpu_l3_cache</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>B</p>
                </td><td>
                  <p>instance
ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Libvirt</p>
                </td><td>
                  <p>L3 cache used by the instance</p>
                </td></tr><tr><td>
                  <p>memory.bandwidth.total</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>B/s</p>
                </td><td>
                  <p>instance
ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Libvirt</p>
                </td><td>
                  <p>Total system bandwidth from one level of cache</p>
                </td></tr><tr><td>
                  <p>memory.bandwidth.local</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>B/s</p>
                </td><td>
                  <p>instance
ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Libvirt</p>
                </td><td>
                  <p>Bandwidth of memory traffic for a memory controller</p>
                </td></tr><tr><td>
                  <p>perf.cpu.cycles</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>cycle</p>
                </td><td>
                  <p>instance
ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Libvirt</p>
                </td><td>
                  <p>the number of cpu cycles one instruction needs</p>
                </td></tr><tr><td>
                  <p>perf.instructions</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>instruction</p>
                </td><td>
                  <p>instance
ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Libvirt</p>
                </td><td>
                  <p>the count of instructions</p>
                </td></tr><tr><td>
                  <p>perf.cache.references</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>count</p>
                </td><td>
                  <p>instance
ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Libvirt</p>
                </td><td>
                  <p>the count of cache hits</p>
                </td></tr><tr><td>
                  <p>perf.cache.misses</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>count</p>
                </td><td>
                  <p>instance
ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Libvirt</p>
                </td><td>
                  <p>the count of cache misses</p>
                </td></tr></tbody></table></div><div id="id-1.4.12.14.15.4" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note</h6><div class="procedure "><div class="procedure-contents"><ul class="procedure"><li class="step "><p>The <code class="literal">instance:&lt;type&gt;</code> meter can be replaced by using extra parameters in
both the samples and statistics queries. Sample queries look like:</p></li></ul></div></div><div class="verbatim-wrap"><pre class="screen">statistics:

  ceilometer statistics -m instance -g resource_metadata.instance_type

samples:

  ceilometer sample-list -m instance -q metadata.instance_type=&lt;value&gt;</pre></div></div><p>The Telemetry service supports to create new meters by using
transformers. For more details about transformers see
<a class="xref" href="bk02ch10.html#telemetry-transformers" title="10.3.1.1. Transformers">Section 10.3.1.1, “Transformers”</a>. Among the meters gathered from libvirt there are a few ones which are generated from other meters. The list of
meters that are created by using the <code class="literal">rate_of_change</code> transformer from the
above table is the following:</p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>cpu_util</p></li><li class="listitem "><p>disk.read.requests.rate</p></li><li class="listitem "><p>disk.write.requests.rate</p></li><li class="listitem "><p>disk.read.bytes.rate</p></li><li class="listitem "><p>disk.write.bytes.rate</p></li><li class="listitem "><p>disk.device.read.requests.rate</p></li><li class="listitem "><p>disk.device.write.requests.rate</p></li><li class="listitem "><p>disk.device.read.bytes.rate</p></li><li class="listitem "><p>disk.device.write.bytes.rate</p></li><li class="listitem "><p>network.incoming.bytes.rate</p></li><li class="listitem "><p>network.outgoing.bytes.rate</p></li><li class="listitem "><p>network.incoming.packets.rate</p></li><li class="listitem "><p>network.outgoing.packets.rate</p></li></ul></div><div id="id-1.4.12.14.15.7" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note</h6><p>To enable the libvirt <code class="literal">memory.usage</code> support, you need to install
libvirt version 1.1.1+, QEMU version 1.5+, and you also need to
prepare suitable balloon driver in the image. It is applicable
particularly for Windows guests, most modern Linux distributions
already have it built in. Telemetry is not able to fetch the
<code class="literal">memory.usage</code> samples without the image balloon driver.</p></div><p>OpenStack Compute is capable of collecting <code class="literal">CPU</code> related meters from
the compute host machines. In order to use that you need to set the
<code class="literal">compute_monitors</code> option to <code class="literal">ComputeDriverCPUMonitor</code> in the
<code class="literal">nova.conf</code> configuration file. For further information see the
Compute configuration section in the <a class="link" href="http://docs.openstack.org/newton/config-reference/compute/config-options.html" target="_blank">Compute chapter</a>
of the OpenStack Configuration Reference.</p><p>The following host machine related meters are collected for OpenStack
Compute:</p><div class="informaltable"><table class="informaltable" border="1"><colgroup><col class="c1" /><col class="c2" /><col class="c3" /><col class="c4" /><col class="c5" /><col class="c6" /></colgroup><thead><tr><th>
                  <p>Name</p>
                </th><th>
                  <p>Type</p>
                </th><th>
                  <p>Unit</p>
                </th><th>
                  <p>Resource</p>
                </th><th>
                  <p>Origin</p>
                </th><th>
                  <p>Note</p>
                </th></tr></thead><tbody><tr><td colspan="6">
                  <p>
                    <span class="bold"><strong>Meters added in the Icehouse release or earlier</strong></span>
                  </p>
                </td></tr><tr><td>
                  <p>compute.node.cpu.frequency</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>MHz</p>
                </td><td>
                  <p>host ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>CPU frequency</p>
                </td></tr><tr><td>
                  <p>compute.node.cpu.kernel.time</p>
                </td><td>
                  <p>Cumulative</p>
                </td><td>
                  <p>ns</p>
                </td><td>
                  <p>host ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>CPU kernel
time</p>
                </td></tr><tr><td>
                  <p>compute.node.cpu.idle.time</p>
                </td><td>
                  <p>Cumulative</p>
                </td><td>
                  <p>ns</p>
                </td><td>
                  <p>host ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>CPU idle time</p>
                </td></tr><tr><td>
                  <p>compute.node.cpu.user.time</p>
                </td><td>
                  <p>Cumulative</p>
                </td><td>
                  <p>ns</p>
                </td><td>
                  <p>host ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>CPU user mode
time</p>
                </td></tr><tr><td>
                  <p>compute.node.cpu.iowait.time</p>
                </td><td>
                  <p>Cumulative</p>
                </td><td>
                  <p>ns</p>
                </td><td>
                  <p>host ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>CPU I/O wait
time</p>
                </td></tr><tr><td>
                  <p>compute.node.cpu.kernel.percent</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>%</p>
                </td><td>
                  <p>host ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>CPU kernel
percentage</p>
                </td></tr><tr><td>
                  <p>compute.node.cpu.idle.percent</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>%</p>
                </td><td>
                  <p>host ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>CPU idle
percentage</p>
                </td></tr><tr><td>
                  <p>compute.node.cpu.user.percent</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>%</p>
                </td><td>
                  <p>host ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>CPU user mode
percentage</p>
                </td></tr><tr><td>
                  <p>compute.node.cpu.iowait.percent</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>%</p>
                </td><td>
                  <p>host ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>CPU I/O wait
percentage</p>
                </td></tr><tr><td>
                  <p>compute.node.cpu.percent</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>%</p>
                </td><td>
                  <p>host ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>CPU
utilization</p>
                </td></tr></tbody></table></div></div><div class="sect2 " id="telemetry-bare-metal-service"><div class="titlepage"><div><div><h3 class="title"><span class="number">10.6.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Bare metal service</span> <a title="Permalink" class="permalink" href="bk02ch10.html#telemetry-bare-metal-service">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span>telemetry-bare-metal-service</li></ul></div></div></div></div><p>Telemetry captures notifications that are emitted by the Bare metal
service. The source of the notifications are IPMI sensors that collect
data from the host machine.</p><div id="id-1.4.12.14.16.3" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note</h6><p>The sensor data is not available in the Bare metal service by
default. To enable the meters and configure this module to emit
notifications about the measured values see the <a class="link" href="http://docs.openstack.org/project-install-guide/baremetal/newton" target="_blank">Installation
Guide</a>
for the Bare metal service.</p></div><p>The following meters are recorded for the Bare metal service:</p><div class="informaltable"><table class="informaltable" border="1"><colgroup><col class="c1" /><col class="c2" /><col class="c3" /><col class="c4" /><col class="c5" /><col class="c6" /></colgroup><thead><tr><th>
                  <p>Name</p>
                </th><th>
                  <p>Type</p>
                </th><th>
                  <p>Unit</p>
                </th><th>
                  <p>Resource</p>
                </th><th>
                  <p>Origin</p>
                </th><th>
                  <p>Note</p>
                </th></tr></thead><tbody><tr><td colspan="6">
                  <p>
                    <span class="bold"><strong>Meters added in the Juno release</strong></span>
                  </p>
                </td></tr><tr><td>
                  <p>hardware.ipmi.fan</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>RPM</p>
                </td><td>
                  <p>fan
sensor</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>Fan rounds per
minute (RPM)</p>
                </td></tr><tr><td>
                  <p>hardware.ipmi.temperature</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>C</p>
                </td><td>
                  <p>temperature
sensor</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>Temperature reading from sensor</p>
                </td></tr><tr><td>
                  <p>hardware.ipmi.current</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>W</p>
                </td><td>
                  <p>current
sensor</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>Current reading
from sensor</p>
                </td></tr><tr><td>
                  <p>hardware.ipmi.voltage</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>V</p>
                </td><td>
                  <p>voltage
sensor</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>Voltage reading
from sensor</p>
                </td></tr></tbody></table></div></div><div class="sect2 " id="id-1.4.12.14.17"><div class="titlepage"><div><div><h3 class="title"><span class="number">10.6.3 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">IPMI based meters</span> <a title="Permalink" class="permalink" href="bk02ch10.html#id-1.4.12.14.17">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>Another way of gathering IPMI based data is to use IPMI sensors
independently from the Bare metal service's components. Same meters as
<a class="xref" href="bk02ch10.html#telemetry-bare-metal-service" title="10.6.2. Bare metal service">Section 10.6.2, “Bare metal service”</a> could be fetched except that origin is
<code class="literal">Pollster</code> instead of <code class="literal">Notification</code>.</p><p>You need to deploy the ceilometer-agent-ipmi on each IPMI-capable node
in order to poll local sensor data. For further information about the
IPMI agent see <a class="xref" href="bk02ch10.html#telemetry-ipmi-agent" title="10.2.2.2. IPMI agent">Section 10.2.2.2, “IPMI agent”</a>.</p><div id="id-1.4.12.14.17.4" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg" /><h6>Warning</h6><p>To avoid duplication of metering data and unnecessary load on the
IPMI interface, do not deploy the IPMI agent on nodes that are
managed by the Bare metal service and keep the
<code class="literal">conductor.send_sensor_data</code> option set to <code class="literal">False</code> in the
<code class="literal">ironic.conf</code> configuration file.</p></div><p>Besides generic IPMI sensor data, the following Intel Node Manager
meters are recorded from capable platform:</p><div class="informaltable"><table class="informaltable" border="1"><colgroup><col class="c1" /><col class="c2" /><col class="c3" /><col class="c4" /><col class="c5" /><col class="c6" /></colgroup><thead><tr><th>
                  <p>Name</p>
                </th><th>
                  <p>Type</p>
                </th><th>
                  <p>Unit</p>
                </th><th>
                  <p>Resource</p>
                </th><th>
                  <p>Origin</p>
                </th><th>
                  <p>Note</p>
                </th></tr></thead><tbody><tr><td colspan="6">
                  <p>
                    <span class="bold"><strong>Meters added in the Juno release</strong></span>
                  </p>
                </td></tr><tr><td>
                  <p>hardware.ipmi.node.power</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>W</p>
                </td><td>
                  <p>host ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Current power
of the system</p>
                </td></tr><tr><td>
                  <p>hardware.ipmi.node.temperature</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>C</p>
                </td><td>
                  <p>host ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Current temperature of the
system</p>
                </td></tr><tr><td colspan="6">
                  <p>
                    <span class="bold"><strong>Meters added in the Kilo release</strong></span>
                  </p>
                </td></tr><tr><td>
                  <p>hardware.ipmi.node.inlet_temperature</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>C</p>
                </td><td>
                  <p>host ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Inlet temperature of the system</p>
                </td></tr><tr><td>
                  <p>hardware.ipmi.node.outlet_temperature</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>C</p>
                </td><td>
                  <p>host ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Outlet temperature of the system</p>
                </td></tr><tr><td>
                  <p>hardware.ipmi.node.airflow</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>CFM</p>
                </td><td>
                  <p>host ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Volumetric airflow of the system, expressed as
1/10th of CFM</p>
                </td></tr><tr><td>
                  <p>hardware.ipmi.node.cups</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>CUPS</p>
                </td><td>
                  <p>host ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>CUPS(Compute Usage Per Second)
index data of the
system</p>
                </td></tr><tr><td>
                  <p>hardware.ipmi.node.cpu_util</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>%</p>
                </td><td>
                  <p>host ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>CPU CUPS utilization of the
system</p>
                </td></tr><tr><td>
                  <p>hardware.ipmi.node.mem_util</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>%</p>
                </td><td>
                  <p>host ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Memory CUPS
utilization of
the system</p>
                </td></tr><tr><td>
                  <p>hardware.ipmi.node.io_util</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>%</p>
                </td><td>
                  <p>host ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>IO CUPS
utilization of
the system</p>
                </td></tr></tbody></table></div><div class="informaltable"><table class="informaltable" border="1"><colgroup><col class="c1" /><col class="c2" /></colgroup><thead><tr><th colspan="2">
                  <p>Meters renamed in the Kilo release</p>
                </th></tr></thead><tbody><tr><td>
                  <p>
                    <span class="bold"><strong>Original Name</strong></span>
                  </p>
                </td><td>
                  <p>
                    <span class="bold"><strong>New Name</strong></span>
                  </p>
                </td></tr><tr><td>
                  <p>hardware.ipmi.node.temperature</p>
                </td><td>
                  <p>hardware.ipmi.node.inlet_temperature</p>
                </td></tr><tr><td>
                  <p>hardware.ipmi.node.inlet_temperature</p>
                </td><td>
                  <p>hardware.ipmi.node.temperature</p>
                </td></tr></tbody></table></div></div><div class="sect2 " id="id-1.4.12.14.18"><div class="titlepage"><div><div><h3 class="title"><span class="number">10.6.4 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">SNMP based meters</span> <a title="Permalink" class="permalink" href="bk02ch10.html#id-1.4.12.14.18">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>Telemetry supports gathering SNMP based generic host meters. In order to
be able to collect this data you need to run snmpd on each target host.</p><p>The following meters are available about the host machines by using
SNMP:</p><div class="informaltable"><table class="informaltable" border="1"><colgroup><col class="c1" /><col class="c2" /><col class="c3" /><col class="c4" /><col class="c5" /><col class="c6" /></colgroup><thead><tr><th>
                  <p>Name</p>
                </th><th>
                  <p>Type</p>
                </th><th>
                  <p>Unit</p>
                </th><th>
                  <p>Resource</p>
                </th><th>
                  <p>Origin</p>
                </th><th>
                  <p>Note</p>
                </th></tr></thead><tbody><tr><td colspan="6">
                  <p>
                    <span class="bold"><strong>Meters added in the Kilo release</strong></span>
                  </p>
                </td></tr><tr><td>
                  <p>hardware.cpu.load.1min</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>process</p>
                </td><td>
                  <p>host ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>CPU load in the
past 1 minute</p>
                </td></tr><tr><td>
                  <p>hardware.cpu.load.5min</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>process</p>
                </td><td>
                  <p>host ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>CPU load in the
past 5 minutes</p>
                </td></tr><tr><td>
                  <p>hardware.cpu.load.15min</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>process</p>
                </td><td>
                  <p>host ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>CPU load in the
past 15 minutes</p>
                </td></tr><tr><td>
                  <p>hardware.disk.size.total</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>KB</p>
                </td><td>
                  <p>disk ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Total disk size</p>
                </td></tr><tr><td>
                  <p>hardware.disk.size.used</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>KB</p>
                </td><td>
                  <p>disk ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Used disk size</p>
                </td></tr><tr><td>
                  <p>hardware.memory.total</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>KB</p>
                </td><td>
                  <p>host ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Total physical
memory size</p>
                </td></tr><tr><td>
                  <p>hardware.memory.used</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>KB</p>
                </td><td>
                  <p>host ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Used physical memory size</p>
                </td></tr><tr><td>
                  <p>hardware.memory.buffer</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>KB</p>
                </td><td>
                  <p>host ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Physical memory
buffer size</p>
                </td></tr><tr><td>
                  <p>hardware.memory.cached</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>KB</p>
                </td><td>
                  <p>host ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Cached physical
memory size</p>
                </td></tr><tr><td>
                  <p>hardware.memory.swap.total</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>KB</p>
                </td><td>
                  <p>host ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Total swap space
size</p>
                </td></tr><tr><td>
                  <p>hardware.memory.swap.avail</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>KB</p>
                </td><td>
                  <p>host ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Available swap
space size</p>
                </td></tr><tr><td>
                  <p>hardware.network.incoming.bytes</p>
                </td><td>
                  <p>Cumulative</p>
                </td><td>
                  <p>B</p>
                </td><td>
                  <p>interface
ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Bytes received
by network interface</p>
                </td></tr><tr><td>
                  <p>hardware.network.outgoing.bytes</p>
                </td><td>
                  <p>Cumulative</p>
                </td><td>
                  <p>B</p>
                </td><td>
                  <p>interface
ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Bytes sent by network interface</p>
                </td></tr><tr><td>
                  <p>hardware.network.outgoing.errors</p>
                </td><td>
                  <p>Cumulative</p>
                </td><td>
                  <p>packet</p>
                </td><td>
                  <p>interface
ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Sending error of network interface</p>
                </td></tr><tr><td>
                  <p>hardware.network.ip.incoming.datagrams</p>
                </td><td>
                  <p>Cumulative</p>
                </td><td>
                  <p>datagrams</p>
                </td><td>
                  <p>host ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Number of received datagrams</p>
                </td></tr><tr><td>
                  <p>hardware.network.ip.outgoing.datagrams</p>
                </td><td>
                  <p>Cumulative</p>
                </td><td>
                  <p>datagrams</p>
                </td><td>
                  <p>host ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Number of sent
datagrams</p>
                </td></tr><tr><td>
                  <p>hardware.system_stats.io.incoming.blocks</p>
                </td><td>
                  <p>Cumulative</p>
                </td><td>
                  <p>blocks</p>
                </td><td>
                  <p>host ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Aggregated number of blocks received to block
device</p>
                </td></tr><tr><td>
                  <p>hardware.system_stats.io.outgoing.blocks</p>
                </td><td>
                  <p>Cumulative</p>
                </td><td>
                  <p>blocks</p>
                </td><td>
                  <p>host ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Aggregated number of blocks sent to block device</p>
                </td></tr><tr><td>
                  <p>hardware.system_stats.cpu.idle</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>%</p>
                </td><td>
                  <p>host ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>CPU idle percentage</p>
                </td></tr><tr><td colspan="6">
                  <p>
                    <span class="bold"><strong>Meters added in the Mitaka release</strong></span>
                  </p>
                </td></tr><tr><td>
                  <p>hardware.cpu.util</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>%</p>
                </td><td>
                  <p>host ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>cpu usage
percentage</p>
                </td></tr></tbody></table></div></div><div class="sect2 " id="id-1.4.12.14.19"><div class="titlepage"><div><div><h3 class="title"><span class="number">10.6.5 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">OpenStack Image service</span> <a title="Permalink" class="permalink" href="bk02ch10.html#id-1.4.12.14.19">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>The following meters are collected for OpenStack Image service:</p><div class="informaltable"><table class="informaltable" border="1"><colgroup><col class="c1" /><col class="c2" /><col class="c3" /><col class="c4" /><col class="c5" /><col class="c6" /></colgroup><thead><tr><th>
                  <p>Name</p>
                </th><th>
                  <p>Type</p>
                </th><th>
                  <p>Unit</p>
                </th><th>
                  <p>Resource</p>
                </th><th>
                  <p>Origin</p>
                </th><th>
                  <p>Note</p>
                </th></tr></thead><tbody><tr><td colspan="6">
                  <p>
                    <span class="bold"><strong>Meters added in the Icehouse release or earlier</strong></span>
                  </p>
                </td></tr><tr><td>
                  <p>image</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>image</p>
                </td><td>
                  <p>image ID</p>
                </td><td>
                  <p>Notification, Pollster</p>
                </td><td>
                  <p>Existence of the
image</p>
                </td></tr><tr><td>
                  <p>image.size</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>image</p>
                </td><td>
                  <p>image ID</p>
                </td><td>
                  <p>Notification, Pollster</p>
                </td><td>
                  <p>Size of the uploaded image</p>
                </td></tr><tr><td>
                  <p>image.update</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>image</p>
                </td><td>
                  <p>image ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>Number of updates on the image</p>
                </td></tr><tr><td>
                  <p>image.upload</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>image</p>
                </td><td>
                  <p>image ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>Number of uploads on the image</p>
                </td></tr><tr><td>
                  <p>image.delete</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>image</p>
                </td><td>
                  <p>image ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>Number of deletes on the image</p>
                </td></tr><tr><td>
                  <p>image.download</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>B</p>
                </td><td>
                  <p>image ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>Image is downloaded</p>
                </td></tr><tr><td>
                  <p>image.serve</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>B</p>
                </td><td>
                  <p>image ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>Image is served
out</p>
                </td></tr></tbody></table></div></div><div class="sect2 " id="id-1.4.12.14.20"><div class="titlepage"><div><div><h3 class="title"><span class="number">10.6.6 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">OpenStack Block Storage</span> <a title="Permalink" class="permalink" href="bk02ch10.html#id-1.4.12.14.20">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>The following meters are collected for OpenStack Block Storage:</p><div class="informaltable"><table class="informaltable" border="1"><colgroup><col class="c1" /><col class="c2" /><col class="c3" /><col class="c4" /><col class="c5" /><col class="c6" /></colgroup><thead><tr><th>
                  <p>Name</p>
                </th><th>
                  <p>Type</p>
                </th><th>
                  <p>Unit</p>
                </th><th>
                  <p>Resource</p>
                </th><th>
                  <p>Origin</p>
                </th><th>
                  <p>Note</p>
                </th></tr></thead><tbody><tr><td colspan="6">
                  <p>
                    <span class="bold"><strong>Meters added in the Icehouse release or earlier</strong></span>
                  </p>
                </td></tr><tr><td>
                  <p>volume</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>volume</p>
                </td><td>
                  <p>volume ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>Existence of the
volume</p>
                </td></tr><tr><td>
                  <p>volume.size</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>GB</p>
                </td><td>
                  <p>volume ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>Size of the volume</p>
                </td></tr><tr><td colspan="6">
                  <p>
                    <span class="bold"><strong>Meters added in the Juno release</strong></span>
                  </p>
                </td></tr><tr><td>
                  <p>snapshot</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>snapshot</p>
                </td><td>
                  <p>snapshot
ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>Existence of the
snapshot</p>
                </td></tr><tr><td>
                  <p>snapshot.size</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>GB</p>
                </td><td>
                  <p>snapshot
ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>Size of the snapshot</p>
                </td></tr><tr><td colspan="6">
                  <p>
                    <span class="bold"><strong>Meters added in the Kilo release</strong></span>
                  </p>
                </td></tr><tr><td>
                  <p>volume.create.(start|end)</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>volume</p>
                </td><td>
                  <p>volume ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>Creation of the
volume</p>
                </td></tr><tr><td>
                  <p>volume.delete.(start|end)</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>volume</p>
                </td><td>
                  <p>volume ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>Deletion of the
volume</p>
                </td></tr><tr><td>
                  <p>volume.update.(start|end)</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>volume</p>
                </td><td>
                  <p>volume ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>Update the name
or description
of the volume</p>
                </td></tr><tr><td>
                  <p>volume.resize.(start|end)</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>volume</p>
                </td><td>
                  <p>volume ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>Update the size
of the volume</p>
                </td></tr><tr><td>
                  <p>volume.attach.(start|end)</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>volume</p>
                </td><td>
                  <p>volume ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>Attaching the volume to an instance</p>
                </td></tr><tr><td>
                  <p>volume.detach.(start|end)</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>volume</p>
                </td><td>
                  <p>volume ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>Detaching the volume from an instance</p>
                </td></tr><tr><td>
                  <p>snapshot.create.(start|end)</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>snapshot</p>
                </td><td>
                  <p>snapshot
ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>Creation of the
snapshot</p>
                </td></tr><tr><td>
                  <p>snapshot.delete.(start|end)</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>snapshot</p>
                </td><td>
                  <p>snapshot
ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>Deletion of the
snapshot</p>
                </td></tr><tr><td>
                  <p>volume.backup.create.(start|end)</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>volume</p>
                </td><td>
                  <p>backup ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>Creation of the
volume backup</p>
                </td></tr><tr><td>
                  <p>volume.backup.delete.(start|end)</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>volume</p>
                </td><td>
                  <p>backup ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>Deletion of the
volume backup</p>
                </td></tr><tr><td>
                  <p>volume.backup.restore.(start|end)</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>volume</p>
                </td><td>
                  <p>backup ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>Restoration of
the volume backup</p>
                </td></tr></tbody></table></div></div><div class="sect2 " id="telemetry-object-storage-meter"><div class="titlepage"><div><div><h3 class="title"><span class="number">10.6.7 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">OpenStack Object Storage</span> <a title="Permalink" class="permalink" href="bk02ch10.html#telemetry-object-storage-meter">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span>telemetry-object-storage-meter</li></ul></div></div></div></div><p>The following meters are collected for OpenStack Object Storage:</p><div class="informaltable"><table class="informaltable" border="1"><colgroup><col class="c1" /><col class="c2" /><col class="c3" /><col class="c4" /><col class="c5" /><col class="c6" /></colgroup><thead><tr><th>
                  <p>Name</p>
                </th><th>
                  <p>Type</p>
                </th><th>
                  <p>Unit</p>
                </th><th>
                  <p>Resource</p>
                </th><th>
                  <p>Origin</p>
                </th><th>
                  <p>Note</p>
                </th></tr></thead><tbody><tr><td colspan="6">
                  <p>
                    <span class="bold"><strong>Meters added in the Icehouse release or earlier</strong></span>
                  </p>
                </td></tr><tr><td>
                  <p>storage.objects</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>object</p>
                </td><td>
                  <p>storage ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Number of objects</p>
                </td></tr><tr><td>
                  <p>storage.objects.size</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>B</p>
                </td><td>
                  <p>storage ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Total size of stored objects</p>
                </td></tr><tr><td>
                  <p>storage.objects.containers</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>container</p>
                </td><td>
                  <p>storage ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Number of containers</p>
                </td></tr><tr><td>
                  <p>storage.objects.incoming.bytes</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>B</p>
                </td><td>
                  <p>storage ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>Number of incoming bytes</p>
                </td></tr><tr><td>
                  <p>storage.objects.outgoing.bytes</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>B</p>
                </td><td>
                  <p>storage ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>Number of outgoing bytes</p>
                </td></tr><tr><td>
                  <p>storage.api.request</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>request</p>
                </td><td>
                  <p>storage ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>Number of API requests against
OpenStack Object Storage</p>
                </td></tr><tr><td>
                  <p>storage.containers.objects</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>object</p>
                </td><td>
                  <p>storage ID/container</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Number of objects in container</p>
                </td></tr><tr><td>
                  <p>storage.containers.objects.size</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>B</p>
                </td><td>
                  <p>storage ID/container</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Total size of stored objects in container</p>
                </td></tr><tr><td colspan="6">
                  <p>
                    <span class="bold"><strong>meters deprecated in the Kilo release</strong></span>
                  </p>
                </td></tr><tr><td colspan="6">
                  <p>storage.objects.in| Delta | B     | storage ID | Notific| Number of incomcoming.bytes       |       |       |            | ation   | ing bytes</p>
                </td></tr><tr><td>
                  <p>storage.objects.outgoing.bytes</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>B</p>
                </td><td>
                  <p>storage ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>Number of outgoing bytes</p>
                </td></tr><tr><td>
                  <p>storage.api.request</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>request</p>
                </td><td>
                  <p>storage ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>Number of API requests against
OpenStack Object Storage</p>
                </td></tr></tbody></table></div></div><div class="sect2 " id="id-1.4.12.14.22"><div class="titlepage"><div><div><h3 class="title"><span class="number">10.6.8 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Ceph Object Storage</span> <a title="Permalink" class="permalink" href="bk02ch10.html#id-1.4.12.14.22">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>In order to gather meters from Ceph, you have to install and configure
the Ceph Object Gateway (radosgw) as it is described in the <a class="link" href="http://docs.ceph.com/docs/master/radosgw/" target="_blank">Installation
Manual</a>. You have to enable
<a class="link" href="http://ceph.com/docs/master/man/8/radosgw/#usage-logging" target="_blank">usage logging</a> in
order to get the related meters from Ceph. You will also need an
<code class="literal">admin</code> user with <code class="literal">users</code>, <code class="literal">buckets</code>, <code class="literal">metadata</code> and <code class="literal">usage</code><code class="literal">caps</code> configured.</p><p>In order to access Ceph from Telemetry, you need to specify a
<code class="literal">service group</code> for <code class="literal">radosgw</code> in the <code class="literal">ceilometer.conf</code>
configuration file along with <code class="literal">access_key</code> and <code class="literal">secret_key</code> of the
<code class="literal">admin</code> user mentioned above.</p><p>The following meters are collected for Ceph Object Storage:</p><div class="informaltable"><table class="informaltable" border="1"><colgroup><col class="c1" /><col class="c2" /><col class="c3" /><col class="c4" /><col class="c5" /><col class="c6" /></colgroup><thead><tr><th>
                  <p>Name</p>
                </th><th>
                  <p>Type</p>
                </th><th>
                  <p>Unit</p>
                </th><th>
                  <p>Resource</p>
                </th><th>
                  <p>Origin</p>
                </th><th>
                  <p>Note</p>
                </th></tr></thead><tbody><tr><td colspan="6">
                  <p>
                    <span class="bold"><strong>Meters added in the Kilo release</strong></span>
                  </p>
                </td></tr><tr><td>
                  <p>radosgw.objects</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>object</p>
                </td><td>
                  <p>storage ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Number of objects</p>
                </td></tr><tr><td>
                  <p>radosgw.objects.size</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>B</p>
                </td><td>
                  <p>storage ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Total size of stored objects</p>
                </td></tr><tr><td>
                  <p>radosgw.objects.containers</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>container</p>
                </td><td>
                  <p>storage ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Number of containers</p>
                </td></tr><tr><td>
                  <p>radosgw.api.request</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>request</p>
                </td><td>
                  <p>storage ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Number of API requests against
Ceph Object Gateway (radosgw)</p>
                </td></tr><tr><td>
                  <p>radosgw.containers.objects</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>object</p>
                </td><td>
                  <p>storage ID/container</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Number of objects in container</p>
                </td></tr><tr><td>
                  <p>radosgw.containers.objects.size</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>B</p>
                </td><td>
                  <p>storage ID/container</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Total size of stored objects in
container</p>
                </td></tr></tbody></table></div><div id="id-1.4.12.14.22.6" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note</h6><p>The <code class="literal">usage</code> related information may not be updated right after an
upload or download, because the Ceph Object Gateway needs time to
update the usage properties. For instance, the default configuration
needs approximately 30 minutes to generate the usage logs.</p></div></div><div class="sect2 " id="id-1.4.12.14.23"><div class="titlepage"><div><div><h3 class="title"><span class="number">10.6.9 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">OpenStack Identity</span> <a title="Permalink" class="permalink" href="bk02ch10.html#id-1.4.12.14.23">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>The following meters are collected for OpenStack Identity:</p><div class="informaltable"><table class="informaltable" border="1"><colgroup><col class="c1" /><col class="c2" /><col class="c3" /><col class="c4" /><col class="c5" /><col class="c6" /></colgroup><thead><tr><th>
                  <p>Name</p>
                </th><th>
                  <p>Type</p>
                </th><th>
                  <p>Unit</p>
                </th><th>
                  <p>Resource</p>
                </th><th>
                  <p>Origin</p>
                </th><th>
                  <p>Note</p>
                </th></tr></thead><tbody><tr><td colspan="6">
                  <p>
                    <span class="bold"><strong>Meters added in the Juno release</strong></span>
                  </p>
                </td></tr><tr><td>
                  <p>identity.authenticate.success</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>user</p>
                </td><td>
                  <p>user ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>User successfully authenticated</p>
                </td></tr><tr><td>
                  <p>identity.authenticate.pending</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>user</p>
                </td><td>
                  <p>user ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>User pending authentication</p>
                </td></tr><tr><td>
                  <p>identity.authenticate.failure</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>user</p>
                </td><td>
                  <p>user ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>User failed to
authenticate</p>
                </td></tr><tr><td>
                  <p>identity.user.created</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>user</p>
                </td><td>
                  <p>user ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>User is created</p>
                </td></tr><tr><td>
                  <p>identity.user.deleted</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>user</p>
                </td><td>
                  <p>user ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>User is deleted</p>
                </td></tr><tr><td>
                  <p>identity.user.updated</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>user</p>
                </td><td>
                  <p>user ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>User is updated</p>
                </td></tr><tr><td>
                  <p>identity.group.created</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>group</p>
                </td><td>
                  <p>group ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>Group is created</p>
                </td></tr><tr><td>
                  <p>identity.group.deleted</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>group</p>
                </td><td>
                  <p>group ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>Group is deleted</p>
                </td></tr><tr><td>
                  <p>identity.group.updated</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>group</p>
                </td><td>
                  <p>group ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>Group is updated</p>
                </td></tr><tr><td>
                  <p>identity.role.created</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>role</p>
                </td><td>
                  <p>role ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>Role is created</p>
                </td></tr><tr><td>
                  <p>identity.role.deleted</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>role</p>
                </td><td>
                  <p>role ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>Role is deleted</p>
                </td></tr><tr><td>
                  <p>identity.role.updated</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>role</p>
                </td><td>
                  <p>role ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>Role is updated</p>
                </td></tr><tr><td>
                  <p>identity.project.created</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>project</p>
                </td><td>
                  <p>project ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>Project is created</p>
                </td></tr><tr><td>
                  <p>identity.project.deleted</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>project</p>
                </td><td>
                  <p>project ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>Project is deleted</p>
                </td></tr><tr><td>
                  <p>identity.project.updated</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>project</p>
                </td><td>
                  <p>project ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>Project is updated</p>
                </td></tr><tr><td>
                  <p>identity.trust.created</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>trust</p>
                </td><td>
                  <p>trust ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>Trust is created</p>
                </td></tr><tr><td>
                  <p>identity.trust.deleted</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>trust</p>
                </td><td>
                  <p>trust ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>Trust is deleted</p>
                </td></tr><tr><td colspan="6">
                  <p>
                    <span class="bold"><strong>Meters added in the Kilo release</strong></span>
                  </p>
                </td></tr><tr><td>
                  <p>identity.role_assignment.created</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>role_assignment</p>
                </td><td>
                  <p>role ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>Role is added to
an actor on a
target</p>
                </td></tr><tr><td>
                  <p>identity.role_assignment.deleted</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>role_assignment</p>
                </td><td>
                  <p>role ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>Role is removed
from an actor
on a target</p>
                </td></tr><tr><td colspan="6">
                  <p>
                    <span class="bold"><strong>All meters thoroughly deprecated in the liberty release</strong></span>
                  </p>
                </td></tr></tbody></table></div></div><div class="sect2 " id="id-1.4.12.14.24"><div class="titlepage"><div><div><h3 class="title"><span class="number">10.6.10 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">OpenStack Networking</span> <a title="Permalink" class="permalink" href="bk02ch10.html#id-1.4.12.14.24">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>The following meters are collected for OpenStack Networking:</p><div class="informaltable"><table class="informaltable" border="1"><colgroup><col class="c1" /><col class="c2" /><col class="c3" /><col class="c4" /><col class="c5" /><col class="c6" /></colgroup><thead><tr><th>
                  <p>Name</p>
                </th><th>
                  <p>Type</p>
                </th><th>
                  <p>Unit</p>
                </th><th>
                  <p>Resource</p>
                </th><th>
                  <p>Origin</p>
                </th><th>
                  <p>Note</p>
                </th></tr></thead><tbody><tr><td colspan="6">
                  <p>
                    <span class="bold"><strong>Meters added in the Icehouse release or earlier</strong></span>
                  </p>
                </td></tr><tr><td>
                  <p>network</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>network</p>
                </td><td>
                  <p>network ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>Existence of network</p>
                </td></tr><tr><td>
                  <p>network.create</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>network</p>
                </td><td>
                  <p>network ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>Creation requests for this network</p>
                </td></tr><tr><td>
                  <p>network.update</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>network</p>
                </td><td>
                  <p>network ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>Update requests
for this network</p>
                </td></tr><tr><td>
                  <p>subnet</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>subnet</p>
                </td><td>
                  <p>subnet ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>Existence of subnet</p>
                </td></tr><tr><td>
                  <p>subnet.create</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>subnet</p>
                </td><td>
                  <p>subnet ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>Creation requests for this subnet</p>
                </td></tr><tr><td>
                  <p>subnet.update</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>subnet</p>
                </td><td>
                  <p>subnet ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>Update requests
for this subnet</p>
                </td></tr><tr><td>
                  <p>port</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>port</p>
                </td><td>
                  <p>port ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>Existence of port</p>
                </td></tr><tr><td>
                  <p>port.create</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>port</p>
                </td><td>
                  <p>port ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>Creation requests for this port</p>
                </td></tr><tr><td>
                  <p>port.update</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>port</p>
                </td><td>
                  <p>port ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>Update requests
for this port</p>
                </td></tr><tr><td>
                  <p>router</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>router</p>
                </td><td>
                  <p>router ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>Existence of router</p>
                </td></tr><tr><td>
                  <p>router.create</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>router</p>
                </td><td>
                  <p>router ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>Creation requests for this router</p>
                </td></tr><tr><td>
                  <p>router.update</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>router</p>
                </td><td>
                  <p>router ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>Update requests
for this router</p>
                </td></tr><tr><td>
                  <p>ip.floating</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>ip</p>
                </td><td>
                  <p>ip ID</p>
                </td><td>
                  <p>Notification, Pollster</p>
                </td><td>
                  <p>Existence of IP</p>
                </td></tr><tr><td>
                  <p>ip.floating.create</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>ip</p>
                </td><td>
                  <p>ip ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>Creation requests for this IP</p>
                </td></tr><tr><td>
                  <p>ip.floating.update</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>ip</p>
                </td><td>
                  <p>ip ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>Update requests
for this IP</p>
                </td></tr><tr><td>
                  <p>bandwidth</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>B</p>
                </td><td>
                  <p>label ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>Bytes through this l3 metering
label</p>
                </td></tr></tbody></table></div></div><div class="sect2 " id="id-1.4.12.14.25"><div class="titlepage"><div><div><h3 class="title"><span class="number">10.6.11 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">SDN controllers</span> <a title="Permalink" class="permalink" href="bk02ch10.html#id-1.4.12.14.25">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>The following meters are collected for SDN:</p><div class="informaltable"><table class="informaltable" border="1"><colgroup><col class="c1" /><col class="c2" /><col class="c3" /><col class="c4" /><col class="c5" /><col class="c6" /></colgroup><thead><tr><th>
                  <p>Name</p>
                </th><th>
                  <p>Type</p>
                </th><th>
                  <p>Unit</p>
                </th><th>
                  <p>Resource</p>
                </th><th>
                  <p>Origin</p>
                </th><th>
                  <p>Note</p>
                </th></tr></thead><tbody><tr><td colspan="6">
                  <p>
                    <span class="bold"><strong>Meters added in the Icehouse release or earlier</strong></span>
                  </p>
                </td></tr><tr><td>
                  <p>switch</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>switch</p>
                </td><td>
                  <p>switch ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Existence of switch</p>
                </td></tr><tr><td>
                  <p>switch.port</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>port</p>
                </td><td>
                  <p>switch ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Existence of port</p>
                </td></tr><tr><td>
                  <p>switch.port.receive.packets</p>
                </td><td>
                  <p>Cumulative</p>
                </td><td>
                  <p>packet</p>
                </td><td>
                  <p>switch ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Packets received on port</p>
                </td></tr><tr><td>
                  <p>switch.port.transmit.packets</p>
                </td><td>
                  <p>Cumulative</p>
                </td><td>
                  <p>packet</p>
                </td><td>
                  <p>switch ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Packets transmitted on port</p>
                </td></tr><tr><td>
                  <p>switch.port.receive.bytes</p>
                </td><td>
                  <p>Cumulative</p>
                </td><td>
                  <p>B</p>
                </td><td>
                  <p>switch ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Bytes received
on port</p>
                </td></tr><tr><td>
                  <p>switch.port.transmit.bytes</p>
                </td><td>
                  <p>Cumulative</p>
                </td><td>
                  <p>B</p>
                </td><td>
                  <p>switch ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Bytes transmitted on port</p>
                </td></tr><tr><td>
                  <p>switch.port.receive.drops</p>
                </td><td>
                  <p>Cumulative</p>
                </td><td>
                  <p>packet</p>
                </td><td>
                  <p>switch ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Drops received
on port</p>
                </td></tr><tr><td>
                  <p>switch.port.transmit.drops</p>
                </td><td>
                  <p>Cumulative</p>
                </td><td>
                  <p>packet</p>
                </td><td>
                  <p>switch ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Drops transmitted on port</p>
                </td></tr><tr><td>
                  <p>switch.port.receive.errors</p>
                </td><td>
                  <p>Cumulative</p>
                </td><td>
                  <p>packet</p>
                </td><td>
                  <p>switch ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Errors received
on port</p>
                </td></tr><tr><td>
                  <p>switch.port.transmit.errors</p>
                </td><td>
                  <p>Cumulative</p>
                </td><td>
                  <p>packet</p>
                </td><td>
                  <p>switch ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Errors transmitted on port</p>
                </td></tr><tr><td>
                  <p>switch.port.receive.frame_error</p>
                </td><td>
                  <p>Cumulative</p>
                </td><td>
                  <p>packet</p>
                </td><td>
                  <p>switch ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Frame alignment
errors received on port</p>
                </td></tr><tr><td>
                  <p>switch.port.receive.overrun_error</p>
                </td><td>
                  <p>Cumulative</p>
                </td><td>
                  <p>packet</p>
                </td><td>
                  <p>switch ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Overrun errors
received on port</p>
                </td></tr><tr><td>
                  <p>switch.port.receive.crc_error</p>
                </td><td>
                  <p>Cumulative</p>
                </td><td>
                  <p>packet</p>
                </td><td>
                  <p>switch ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>CRC errors received on port</p>
                </td></tr><tr><td>
                  <p>switch.port.collision.count</p>
                </td><td>
                  <p>Cumulative</p>
                </td><td>
                  <p>count</p>
                </td><td>
                  <p>switch ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Collisions on port</p>
                </td></tr><tr><td>
                  <p>switch.table</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>table</p>
                </td><td>
                  <p>switch ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Duration of table</p>
                </td></tr><tr><td>
                  <p>switch.table.active.entries</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>entry</p>
                </td><td>
                  <p>switch ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Active entries
in table</p>
                </td></tr><tr><td>
                  <p>switch.table.lookup.packets</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>packet</p>
                </td><td>
                  <p>switch ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Lookup packets
for table</p>
                </td></tr><tr><td>
                  <p>switch.table.matched.packets</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>packet</p>
                </td><td>
                  <p>switch ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Packets matches
for table</p>
                </td></tr><tr><td>
                  <p>switch.flow</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>flow</p>
                </td><td>
                  <p>switch ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Duration of flow</p>
                </td></tr><tr><td>
                  <p>switch.flow.duration.seconds</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>s</p>
                </td><td>
                  <p>switch ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Duration of flow
in seconds</p>
                </td></tr><tr><td>
                  <p>switch.flow.duration.nanoseconds</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>ns</p>
                </td><td>
                  <p>switch ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Duration of flow
in nanoseconds</p>
                </td></tr><tr><td>
                  <p>switch.flow.packets</p>
                </td><td>
                  <p>Cumulative</p>
                </td><td>
                  <p>packet</p>
                </td><td>
                  <p>switch ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Packets received</p>
                </td></tr><tr><td>
                  <p>switch.flow.bytes</p>
                </td><td>
                  <p>Cumulative</p>
                </td><td>
                  <p>B</p>
                </td><td>
                  <p>switch ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Bytes received</p>
                </td></tr></tbody></table></div><p>These meters are available for OpenFlow based switches. In order to
enable these meters, each driver needs to be properly configured.</p></div><div class="sect2 " id="id-1.4.12.14.26"><div class="titlepage"><div><div><h3 class="title"><span class="number">10.6.12 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Load-Balancer-as-a-Service (LBaaS v1)</span> <a title="Permalink" class="permalink" href="bk02ch10.html#id-1.4.12.14.26">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>The following meters are collected for LBaaS v1:</p><div class="informaltable"><table class="informaltable" border="1"><colgroup><col class="c1" /><col class="c2" /><col class="c3" /><col class="c4" /><col class="c5" /><col class="c6" /></colgroup><thead><tr><th>
                  <p>Name</p>
                </th><th>
                  <p>Type</p>
                </th><th>
                  <p>Unit</p>
                </th><th>
                  <p>Resource</p>
                </th><th>
                  <p>Origin</p>
                </th><th>
                  <p>Note</p>
                </th></tr></thead><tbody><tr><td colspan="6">
                  <p>
                    <span class="bold"><strong>Meters added in the Juno release</strong></span>
                  </p>
                </td></tr><tr><td>
                  <p>network.services.lb.pool</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>pool</p>
                </td><td>
                  <p>pool ID</p>
                </td><td>
                  <p>Notification, Pollster</p>
                </td><td>
                  <p>Existence of a
LB pool</p>
                </td></tr><tr><td>
                  <p>network.services.lb.vip</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>vip</p>
                </td><td>
                  <p>vip ID</p>
                </td><td>
                  <p>Notification, Pollster</p>
                </td><td>
                  <p>Existence of a
LB VIP</p>
                </td></tr><tr><td>
                  <p>network.services.lb.member</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>member</p>
                </td><td>
                  <p>member ID</p>
                </td><td>
                  <p>Notification, Pollster</p>
                </td><td>
                  <p>Existence of a
LB member</p>
                </td></tr><tr><td>
                  <p>network.services.lb.health_monitor</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>health_monitor</p>
                </td><td>
                  <p>monitor ID</p>
                </td><td>
                  <p>Notification, Pollster</p>
                </td><td>
                  <p>Existence of a
LB health probe</p>
                </td></tr><tr><td>
                  <p>network.services.lb.total.connections</p>
                </td><td>
                  <p>Cumulative</p>
                </td><td>
                  <p>connection</p>
                </td><td>
                  <p>pool ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Total connections on a LB</p>
                </td></tr><tr><td>
                  <p>network.services.lb.active.connections</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>connection</p>
                </td><td>
                  <p>pool ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Active connections on a LB</p>
                </td></tr><tr><td>
                  <p>network.services.lb.incoming.bytes</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>B</p>
                </td><td>
                  <p>pool ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Number of incoming Bytes</p>
                </td></tr><tr><td>
                  <p>network.services.lb.outgoing.bytes</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>B</p>
                </td><td>
                  <p>pool ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Number of outgoing Bytes</p>
                </td></tr><tr><td colspan="6">
                  <p>
                    <span class="bold"><strong>Meters added in the Kilo release</strong></span>
                  </p>
                </td></tr><tr><td>
                  <p>network.services.lb.pool.create</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>pool</p>
                </td><td>
                  <p>pool ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>LB pool was created</p>
                </td></tr><tr><td>
                  <p>network.services.lb.pool.update</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>pool</p>
                </td><td>
                  <p>pool ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>LB pool was updated</p>
                </td></tr><tr><td>
                  <p>network.services.lb.vip.create</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>vip</p>
                </td><td>
                  <p>vip ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>LB VIP was created</p>
                </td></tr><tr><td>
                  <p>network.services.lb.vip.update</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>vip</p>
                </td><td>
                  <p>vip ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>LB VIP was updated</p>
                </td></tr><tr><td>
                  <p>network.services.lb.member.create</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>member</p>
                </td><td>
                  <p>member ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>LB member was created</p>
                </td></tr><tr><td>
                  <p>network.services.lb.member.update</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>member</p>
                </td><td>
                  <p>member ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>LB member was updated</p>
                </td></tr><tr><td>
                  <p>network.services.lb.health_monitor.create</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>health_monitor</p>
                </td><td>
                  <p>monitor ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>LB health probe
was created</p>
                </td></tr><tr><td>
                  <p>network.services.lb.health_monitor.update</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>health_monitor</p>
                </td><td>
                  <p>monitor ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>LB health probe
was updated</p>
                </td></tr></tbody></table></div></div><div class="sect2 " id="id-1.4.12.14.27"><div class="titlepage"><div><div><h3 class="title"><span class="number">10.6.13 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Load-Balancer-as-a-Service (LBaaS v2)</span> <a title="Permalink" class="permalink" href="bk02ch10.html#id-1.4.12.14.27">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>The following meters are collected for LBaaS v2. They are added in Mitaka
release:</p><div class="informaltable"><table class="informaltable" border="1"><colgroup><col class="c1" /><col class="c2" /><col class="c3" /><col class="c4" /><col class="c5" /><col class="c6" /></colgroup><thead><tr><th>
                  <p>Name</p>
                </th><th>
                  <p>Type</p>
                </th><th>
                  <p>Unit</p>
                </th><th>
                  <p>Resource</p>
                </th><th>
                  <p>Origin</p>
                </th><th>
                  <p>Note</p>
                </th></tr></thead><tbody><tr><td>
                  <p>network.services.lb.pool</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>pool</p>
                </td><td>
                  <p>pool ID</p>
                </td><td>
                  <p>Notification, Pollster</p>
                </td><td>
                  <p>Existence of a
LB pool</p>
                </td></tr><tr><td>
                  <p>network.services.lb.listener</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>listener</p>
                </td><td>
                  <p>listener
ID</p>
                </td><td>
                  <p>Notification, Pollster</p>
                </td><td>
                  <p>Existence of a
LB listener</p>
                </td></tr><tr><td>
                  <p>network.services.lb.member</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>member</p>
                </td><td>
                  <p>member ID</p>
                </td><td>
                  <p>Notification, Pollster</p>
                </td><td>
                  <p>Existence of a
LB member</p>
                </td></tr><tr><td>
                  <p>network.services.lb.health_monitor</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>health_monitor</p>
                </td><td>
                  <p>monitor ID</p>
                </td><td>
                  <p>Notification, Pollster</p>
                </td><td>
                  <p>Existence of a
LB health probe</p>
                </td></tr><tr><td>
                  <p>network.services.lb.loadbalancer</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>loadbalancer</p>
                </td><td>
                  <p>loadbalancer ID</p>
                </td><td>
                  <p>Notification, Pollster</p>
                </td><td>
                  <p>Existence of a
LB loadbalancer</p>
                </td></tr><tr><td>
                  <p>network.services.lb.total.connections</p>
                </td><td>
                  <p>Cumulative</p>
                </td><td>
                  <p>connection</p>
                </td><td>
                  <p>pool ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Total connections on a LB</p>
                </td></tr><tr><td>
                  <p>network.services.lb.active.connections</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>connection</p>
                </td><td>
                  <p>pool ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Active connections on a LB</p>
                </td></tr><tr><td>
                  <p>network.services.lb.incoming.bytes</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>B</p>
                </td><td>
                  <p>pool ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Number of incoming Bytes</p>
                </td></tr><tr><td>
                  <p>network.services.lb.outgoing.bytes</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>B</p>
                </td><td>
                  <p>pool ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Number of outgoing Bytes</p>
                </td></tr><tr><td>
                  <p>network.services.lb.pool.create</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>pool</p>
                </td><td>
                  <p>pool ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>LB pool was created</p>
                </td></tr><tr><td>
                  <p>network.services.lb.pool.update</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>pool</p>
                </td><td>
                  <p>pool ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>LB pool was updated</p>
                </td></tr><tr><td>
                  <p>network.services.lb.listener.create</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>listener</p>
                </td><td>
                  <p>listener
ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>LB listener was
created</p>
                </td></tr><tr><td>
                  <p>network.services.lb.listener.update</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>listener</p>
                </td><td>
                  <p>listener
ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>LB listener was
updated</p>
                </td></tr><tr><td>
                  <p>network.services.lb.member.create</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>member</p>
                </td><td>
                  <p>member ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>LB member was created</p>
                </td></tr><tr><td>
                  <p>network.services.lb.member.update</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>member</p>
                </td><td>
                  <p>member ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>LB member was updated</p>
                </td></tr><tr><td>
                  <p>network.services.lb.healthmonitor.create</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>health_monitor</p>
                </td><td>
                  <p>monitor ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>LB health probe
was created</p>
                </td></tr><tr><td>
                  <p>network.services.lb.healthmonitor.update</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>health_monitor</p>
                </td><td>
                  <p>monitor ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>LB health probe
was updated</p>
                </td></tr><tr><td>
                  <p>network.services.lb.loadbalancer.create</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>loadbalancer</p>
                </td><td>
                  <p>loadbalancer ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>LB loadbalancer
was created</p>
                </td></tr><tr><td>
                  <p>network.services.lb.loadbalancer.update</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>loadbalancer</p>
                </td><td>
                  <p>loadbalancer ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>LB loadbalancer
was updated</p>
                </td></tr></tbody></table></div><div id="id-1.4.12.14.27.4" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note</h6><p>The above meters are experimental and may generate a large load against the
Neutron APIs. The future enhancement will be implemented when Neutron
supports the new APIs.</p></div></div><div class="sect2 " id="id-1.4.12.14.28"><div class="titlepage"><div><div><h3 class="title"><span class="number">10.6.14 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">VPN-as-a-Service (VPNaaS)</span> <a title="Permalink" class="permalink" href="bk02ch10.html#id-1.4.12.14.28">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>The following meters are collected for VPNaaS:</p><div class="informaltable"><table class="informaltable" border="1"><colgroup><col class="c1" /><col class="c2" /><col class="c3" /><col class="c4" /><col class="c5" /><col class="c6" /></colgroup><thead><tr><th>
                  <p>Name</p>
                </th><th>
                  <p>Type</p>
                </th><th>
                  <p>Unit</p>
                </th><th>
                  <p>Resource</p>
                </th><th>
                  <p>Origin</p>
                </th><th>
                  <p>Note</p>
                </th></tr></thead><tbody><tr><td colspan="6">
                  <p>
                    <span class="bold"><strong>Meters added in the Juno release</strong></span>
                  </p>
                </td></tr><tr><td>
                  <p>network.services.vpn</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>vpnservice</p>
                </td><td>
                  <p>vpn ID</p>
                </td><td>
                  <p>Notification, Pollster</p>
                </td><td>
                  <p>Existence of a
VPN</p>
                </td></tr><tr><td>
                  <p>network.services.vpn.connections</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>ipsec_site_connection</p>
                </td><td>
                  <p>connection
ID</p>
                </td><td>
                  <p>Notification, Pollster</p>
                </td><td>
                  <p>Existence of an
IPSec connection</p>
                </td></tr><tr><td colspan="6">
                  <p>
                    <span class="bold"><strong>Meters added in the Kilo release</strong></span>
                  </p>
                </td></tr><tr><td>
                  <p>network.services.vpn.create</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>vpnservice</p>
                </td><td>
                  <p>vpn ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>VPN was created</p>
                </td></tr><tr><td>
                  <p>network.services.vpn.update</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>vpnservice</p>
                </td><td>
                  <p>vpn ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>VPN was updated</p>
                </td></tr><tr><td>
                  <p>network.services.vpn.connections.create</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>ipsec_site_connection</p>
                </td><td>
                  <p>connection
ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>IPSec connection
was created</p>
                </td></tr><tr><td>
                  <p>network.services.vpn.connections.update</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>ipsec_site_connection</p>
                </td><td>
                  <p>connection
ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>IPSec connection
was updated</p>
                </td></tr><tr><td>
                  <p>network.services.vpn.ipsecpolicy</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>ipsecpolicy</p>
                </td><td>
                  <p>ipsecpolicy
ID</p>
                </td><td>
                  <p>Notification, Pollster</p>
                </td><td>
                  <p>Existence of an
IPSec policy</p>
                </td></tr><tr><td>
                  <p>network.services.vpn.ipsecpolicy.create</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>ipsecpolicy</p>
                </td><td>
                  <p>ipsecpolicy
ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>IPSec policy was
created</p>
                </td></tr><tr><td>
                  <p>network.services.vpn.ipsecpolicy.update</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>ipsecpolicy</p>
                </td><td>
                  <p>ipsecpolicy
ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>IPSec policy was
updated</p>
                </td></tr><tr><td>
                  <p>network.services.vpn.ikepolicy</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>ikepolicy</p>
                </td><td>
                  <p>ikepolicy
ID</p>
                </td><td>
                  <p>Notification, Pollster</p>
                </td><td>
                  <p>Existence of an
Ike policy</p>
                </td></tr><tr><td>
                  <p>network.services.vpn.ikepolicy.create</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>ikepolicy</p>
                </td><td>
                  <p>ikepolicy
ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>Ike policy was
created</p>
                </td></tr><tr><td>
                  <p>network.services.vpn.ikepolicy.update</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>ikepolicy</p>
                </td><td>
                  <p>ikepolicy
ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>Ike policy was
updated</p>
                </td></tr></tbody></table></div></div><div class="sect2 " id="id-1.4.12.14.29"><div class="titlepage"><div><div><h3 class="title"><span class="number">10.6.15 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Firewall-as-a-Service (FWaaS)</span> <a title="Permalink" class="permalink" href="bk02ch10.html#id-1.4.12.14.29">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>The following meters are collected for FWaaS:</p><div class="informaltable"><table class="informaltable" border="1"><colgroup><col class="c1" /><col class="c2" /><col class="c3" /><col class="c4" /><col class="c5" /><col class="c6" /></colgroup><thead><tr><th>
                  <p>Name</p>
                </th><th>
                  <p>Type</p>
                </th><th>
                  <p>Unit</p>
                </th><th>
                  <p>Resource</p>
                </th><th>
                  <p>Origin</p>
                </th><th>
                  <p>Note</p>
                </th></tr></thead><tbody><tr><td colspan="6">
                  <p>
                    <span class="bold"><strong>Meters added in the Juno release</strong></span>
                  </p>
                </td></tr><tr><td>
                  <p>network.services.firewall</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>firewall</p>
                </td><td>
                  <p>firewall ID</p>
                </td><td>
                  <p>Notification, Pollster</p>
                </td><td>
                  <p>Existence of a
firewall</p>
                </td></tr><tr><td>
                  <p>network.services.firewall.policy</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>firewall_policy</p>
                </td><td>
                  <p>firewall ID</p>
                </td><td>
                  <p>Notification, Pollster</p>
                </td><td>
                  <p>Existence of a
firewall policy</p>
                </td></tr><tr><td colspan="6">
                  <p>
                    <span class="bold"><strong>Meters added in the Kilo release</strong></span>
                  </p>
                </td></tr><tr><td>
                  <p>network.services.firewall.create</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>firewall</p>
                </td><td>
                  <p>firewall ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>Firewall was created</p>
                </td></tr><tr><td>
                  <p>network.services.firewall.update</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>firewall</p>
                </td><td>
                  <p>firewall ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>Firewall was updated</p>
                </td></tr><tr><td>
                  <p>network.services.firewall.policy.create</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>firewall_policy</p>
                </td><td>
                  <p>policy ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>Firewall policy
was created</p>
                </td></tr><tr><td>
                  <p>network.services.firewall.policy.update</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>firewall_policy</p>
                </td><td>
                  <p>policy ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>Firewall policy
was updated</p>
                </td></tr><tr><td>
                  <p>network.services.firewall.rule</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>firewall_rule</p>
                </td><td>
                  <p>rule ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>Existence of a
firewall rule</p>
                </td></tr><tr><td>
                  <p>network.services.firewall.rule.create</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>firewall_rule</p>
                </td><td>
                  <p>rule ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>Firewall rule was created</p>
                </td></tr><tr><td>
                  <p>network.services.firewall.rule.update</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>firewall_rule</p>
                </td><td>
                  <p>rule ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>Firewall rule was updated</p>
                </td></tr></tbody></table></div></div><div class="sect2 " id="id-1.4.12.14.30"><div class="titlepage"><div><div><h3 class="title"><span class="number">10.6.16 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Orchestration service</span> <a title="Permalink" class="permalink" href="bk02ch10.html#id-1.4.12.14.30">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>The following meters are collected for the Orchestration service:</p><div class="informaltable"><table class="informaltable" border="1"><colgroup><col class="c1" /><col class="c2" /><col class="c3" /><col class="c4" /><col class="c5" /><col class="c6" /></colgroup><thead><tr><th>
                  <p>Name</p>
                </th><th>
                  <p>Type</p>
                </th><th>
                  <p>Unit</p>
                </th><th>
                  <p>Resource</p>
                </th><th>
                  <p>Origin</p>
                </th><th>
                  <p>Note</p>
                </th></tr></thead><tbody><tr><td colspan="6">
                  <p>
                    <span class="bold"><strong>Meters added in the Icehouse release or earlier</strong></span>
                  </p>
                </td></tr><tr><td>
                  <p>stack.create</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>stack</p>
                </td><td>
                  <p>stack ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>Stack was successfully created</p>
                </td></tr><tr><td>
                  <p>stack.update</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>stack</p>
                </td><td>
                  <p>stack ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>Stack was successfully updated</p>
                </td></tr><tr><td>
                  <p>stack.delete</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>stack</p>
                </td><td>
                  <p>stack ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>Stack was successfully deleted</p>
                </td></tr><tr><td>
                  <p>stack.resume</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>stack</p>
                </td><td>
                  <p>stack ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>Stack was successfully resumed</p>
                </td></tr><tr><td>
                  <p>stack.suspend</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>stack</p>
                </td><td>
                  <p>stack ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>Stack was successfully suspended</p>
                </td></tr><tr><td colspan="6">
                  <p>
                    <span class="bold"><strong>All meters thoroughly deprecated in the Liberty release</strong></span>
                  </p>
                </td></tr></tbody></table></div></div><div class="sect2 " id="id-1.4.12.14.31"><div class="titlepage"><div><div><h3 class="title"><span class="number">10.6.17 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Data processing service for OpenStack</span> <a title="Permalink" class="permalink" href="bk02ch10.html#id-1.4.12.14.31">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>The following meters are collected for the Data processing service for
OpenStack:</p><div class="informaltable"><table class="informaltable" border="1"><colgroup><col class="c1" /><col class="c2" /><col class="c3" /><col class="c4" /><col class="c5" /><col class="c6" /></colgroup><thead><tr><th>
                  <p>Name</p>
                </th><th>
                  <p>Type</p>
                </th><th>
                  <p>Unit</p>
                </th><th>
                  <p>Resource</p>
                </th><th>
                  <p>Origin</p>
                </th><th>
                  <p>Note</p>
                </th></tr></thead><tbody><tr><td colspan="6">
                  <p>
                    <span class="bold"><strong>Meters added in the Juno release</strong></span>
                  </p>
                </td></tr><tr><td>
                  <p>cluster.create</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>cluster</p>
                </td><td>
                  <p>cluster ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>Cluster was
successfully
created</p>
                </td></tr><tr><td>
                  <p>cluster.update</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>cluster</p>
                </td><td>
                  <p>cluster ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>Cluster was
successfully
updated</p>
                </td></tr><tr><td>
                  <p>cluster.delete</p>
                </td><td>
                  <p>Delta</p>
                </td><td>
                  <p>cluster</p>
                </td><td>
                  <p>cluster ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>Cluster was
successfully
deleted</p>
                </td></tr><tr><td colspan="6">
                  <p>
                    <span class="bold"><strong>All meters thoroughly deprecated in the Liberty release</strong></span>
                  </p>
                </td></tr></tbody></table></div></div><div class="sect2 " id="id-1.4.12.14.32"><div class="titlepage"><div><div><h3 class="title"><span class="number">10.6.18 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Key Value Store module</span> <a title="Permalink" class="permalink" href="bk02ch10.html#id-1.4.12.14.32">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>The following meters are collected for the Key Value Store module:</p><div class="informaltable"><table class="informaltable" border="1"><colgroup><col class="c1" /><col class="c2" /><col class="c3" /><col class="c4" /><col class="c5" /><col class="c6" /></colgroup><thead><tr><th>
                  <p>Name</p>
                </th><th>
                  <p>Type</p>
                </th><th>
                  <p>Unit</p>
                </th><th>
                  <p>Resource</p>
                </th><th>
                  <p>Origin</p>
                </th><th>
                  <p>Note</p>
                </th></tr></thead><tbody><tr><td colspan="6">
                  <p>
                    <span class="bold"><strong>Meters added in the Kilo release</strong></span>
                  </p>
                </td></tr><tr><td>
                  <p>magnetodb.table.create</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>table</p>
                </td><td>
                  <p>table ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>Table was successfully created</p>
                </td></tr><tr><td>
                  <p>magnetodb.table.delete</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>table</p>
                </td><td>
                  <p>table ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>Table was successfully deleted</p>
                </td></tr><tr><td>
                  <p>magnetodb.table.index.count</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>index</p>
                </td><td>
                  <p>table ID</p>
                </td><td>
                  <p>Notification</p>
                </td><td>
                  <p>Number of indices
created in a
table</p>
                </td></tr></tbody></table></div><div id="id-1.4.12.14.32.4" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note</h6><p>The the Key Value Store meters are not supported in the Newton release and
later.</p></div></div><div class="sect2 " id="id-1.4.12.14.33"><div class="titlepage"><div><div><h3 class="title"><span class="number">10.6.19 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Energy</span> <a title="Permalink" class="permalink" href="bk02ch10.html#id-1.4.12.14.33">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>The following energy related meters are available:</p><div class="informaltable"><table class="informaltable" border="1"><colgroup><col class="c1" /><col class="c2" /><col class="c3" /><col class="c4" /><col class="c5" /><col class="c6" /></colgroup><thead><tr><th>
                  <p>Name</p>
                </th><th>
                  <p>Type</p>
                </th><th>
                  <p>Unit</p>
                </th><th>
                  <p>Resource</p>
                </th><th>
                  <p>Origin</p>
                </th><th>
                  <p>Note</p>
                </th></tr></thead><tbody><tr><td colspan="6">
                  <p>
                    <span class="bold"><strong>Meters added in the Icehouse release or earlier</strong></span>
                  </p>
                </td></tr><tr><td>
                  <p>energy</p>
                </td><td>
                  <p>Cumulative</p>
                </td><td>
                  <p>kWh</p>
                </td><td>
                  <p>probe ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Amount of energy</p>
                </td></tr><tr><td>
                  <p>power</p>
                </td><td>
                  <p>Gauge</p>
                </td><td>
                  <p>W</p>
                </td><td>
                  <p>probe ID</p>
                </td><td>
                  <p>Pollster</p>
                </td><td>
                  <p>Power consumption</p>
                </td></tr></tbody></table></div></div></div><div class="sect1 " id="id-1.4.12.15"><div class="titlepage"><div><div><h2 class="title"><span class="number">10.7 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Events</span> <a title="Permalink" class="permalink" href="bk02ch10.html#id-1.4.12.15">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>In addition to meters, the Telemetry service collects events triggered
within an OpenStack environment. This section provides a brief summary
of the events format in the Telemetry service.</p><p>While a sample represents a single, numeric datapoint within a
time-series, an event is a broader concept that represents the state of
a resource at a point in time. The state may be described using various
data types including non-numeric data such as an instance's flavor. In
general, events represent any action made in the OpenStack system.</p><div class="sect2 " id="id-1.4.12.15.4"><div class="titlepage"><div><div><h3 class="title"><span class="number">10.7.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Event configuration</span> <a title="Permalink" class="permalink" href="bk02ch10.html#id-1.4.12.15.4">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>To enable the creation and storage of events in the Telemetry service
<code class="literal">store_events</code> option needs to be set to <code class="literal">True</code>. For further configuration
options, see the event section in the <a class="link" href="http://docs.openstack.org/newton/config-reference/telemetry.html" target="_blank">OpenStack Configuration Reference</a>.</p><div id="id-1.4.12.15.4.3" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note</h6><p>It is advisable to set <code class="literal">disable_non_metric_meters</code> to <code class="literal">True</code>
when enabling events in the Telemetry service. The Telemetry service
historically represented events as metering data, which may create
duplication of data if both events and non-metric meters are
enabled.</p></div></div><div class="sect2 " id="id-1.4.12.15.5"><div class="titlepage"><div><div><h3 class="title"><span class="number">10.7.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Event structure</span> <a title="Permalink" class="permalink" href="bk02ch10.html#id-1.4.12.15.5">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>Events captured by the Telemetry service are represented by five key
attributes:</p><div class="variablelist "><dl class="variablelist"><dt id="id-1.4.12.15.5.3.1"><span class="term ">event_type</span></dt><dd><p>A dotted string defining what event occurred such as
<code class="literal">"compute.instance.resize.start"</code>.</p></dd><dt id="id-1.4.12.15.5.3.2"><span class="term ">message_id</span></dt><dd><p>A UUID for the event.</p></dd><dt id="id-1.4.12.15.5.3.3"><span class="term ">generated</span></dt><dd><p>A timestamp of when the event occurred in the system.</p></dd><dt id="id-1.4.12.15.5.3.4"><span class="term ">traits</span></dt><dd><p>A flat mapping of key-value pairs which describe the event. The
event's traits contain most of the details of the event. Traits are
typed, and can be strings, integers, floats, or datetimes.</p></dd><dt id="id-1.4.12.15.5.3.5"><span class="term ">raw</span></dt><dd><p>Mainly for auditing purpose, the full event message can be stored
(unindexed) for future evaluation.</p></dd></dl></div></div><div class="sect2 " id="id-1.4.12.15.6"><div class="titlepage"><div><div><h3 class="title"><span class="number">10.7.3 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Event indexing</span> <a title="Permalink" class="permalink" href="bk02ch10.html#id-1.4.12.15.6">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>The general philosophy of notifications in OpenStack is to emit any and
all data someone might need, and let the consumer filter out what they
are not interested in. In order to make processing simpler and more
efficient, the notifications are stored and processed within Ceilometer
as events. The notification payload, which can be an arbitrarily complex
JSON data structure, is converted to a flat set of key-value pairs. This
conversion is specified by a config file.</p><div id="id-1.4.12.15.6.3" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note</h6><p>The event format is meant for efficient processing and querying.
Storage of complete notifications for auditing purposes can be
enabled by configuring <code class="literal">store_raw</code> option.</p></div><div class="sect3 " id="id-1.4.12.15.6.4"><div class="titlepage"><div><div><h4 class="title"><span class="number">10.7.3.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Event conversion</span> <a title="Permalink" class="permalink" href="bk02ch10.html#id-1.4.12.15.6.4">#</a></h4><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>The conversion from notifications to events is driven by a configuration
file defined by the <code class="literal">definitions_cfg_file</code> in the <code class="literal">ceilometer.conf</code>
configuration file.</p><p>This includes descriptions of how to map fields in the notification body
to Traits, and optional plug-ins for doing any programmatic translations
(splitting a string, forcing case).</p><p>The mapping of notifications to events is defined per event_type, which
can be wildcarded. Traits are added to events if the corresponding
fields in the notification exist and are non-null.</p><div id="id-1.4.12.15.6.4.5" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note</h6><p>The default definition file included with the Telemetry service
contains a list of known notifications and useful traits. The
mappings provided can be modified to include more or less data
according to user requirements.</p></div><p>If the definitions file is not present, a warning will be logged, but an
empty set of definitions will be assumed. By default, any notifications
that do not have a corresponding event definition in the definitions
file will be converted to events with a set of minimal traits. This can
be changed by setting the option <code class="literal">drop_unmatched_notifications</code> in the
<code class="literal">ceilometer.conf</code> file. If this is set to <code class="literal">True</code>, any unmapped
notifications will be dropped.</p><p>The basic set of traits (all are TEXT type) that will be added to all
events if the notification has the relevant data are: service
(notification's publisher), tenant_id, and request_id. These do not
have to be specified in the event definition, they are automatically
added, but their definitions can be overridden for a given event_type.</p></div><div class="sect3 " id="id-1.4.12.15.6.5"><div class="titlepage"><div><div><h4 class="title"><span class="number">10.7.3.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Event definitions format</span> <a title="Permalink" class="permalink" href="bk02ch10.html#id-1.4.12.15.6.5">#</a></h4><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>The event definitions file is in YAML format. It consists of a list of
event definitions, which are mappings. Order is significant, the list of
definitions is scanned in reverse order to find a definition which
matches the notification's event_type. That definition will be used to
generate the event. The reverse ordering is done because it is common to
want to have a more general wildcarded definition (such as
<code class="literal">compute.instance.*</code>) with a set of traits common to all of those
events, with a few more specific event definitions afterwards that have
all of the above traits, plus a few more.</p><p>Each event definition is a mapping with two keys:</p><div class="variablelist "><dl class="variablelist"><dt id="id-1.4.12.15.6.5.4.1"><span class="term ">event_type</span></dt><dd><p>This is a list (or a string, which will be taken as a 1 element
list) of event_types this definition will handle. These can be
wildcarded with unix shell glob syntax. An exclusion listing
(starting with a <code class="literal">!</code>) will exclude any types listed from matching.
If only exclusions are listed, the definition will match anything
not matching the exclusions.</p></dd><dt id="id-1.4.12.15.6.5.4.2"><span class="term ">traits</span></dt><dd><p>This is a mapping, the keys are the trait names, and the values are
trait definitions.</p></dd></dl></div><p>Each trait definition is a mapping with the following keys:</p><div class="variablelist "><dl class="variablelist"><dt id="id-1.4.12.15.6.5.6.1"><span class="term ">fields</span></dt><dd><p>A path specification for the field(s) in the notification you wish
to extract for this trait. Specifications can be written to match
multiple possible fields. By default the value will be the first
such field. The paths can be specified with a dot syntax
(<code class="literal">payload.host</code>). Square bracket syntax (<code class="literal">payload[host]</code>) is
also supported. In either case, if the key for the field you are
looking for contains special characters, like <code class="literal">.</code>, it will need to
be quoted (with double or single quotes):
<code class="literal">payload.image_meta.’org.openstack__1__architecture’</code>. The syntax
used for the field specification is a variant of
<a class="link" href="https://github.com/kennknowles/python-jsonpath-rw" target="_blank">JSONPath</a></p></dd><dt id="id-1.4.12.15.6.5.6.2"><span class="term ">type</span></dt><dd><p>(Optional) The data type for this trait. Valid options are:
<code class="literal">text</code>, <code class="literal">int</code>, <code class="literal">float</code>, and <code class="literal">datetime</code>. Defaults to <code class="literal">text</code>
if not specified.</p></dd><dt id="id-1.4.12.15.6.5.6.3"><span class="term ">plugin</span></dt><dd><p>(Optional) Used to execute simple programmatic conversions on the
value in a notification field.</p></dd></dl></div></div><div class="sect3 " id="id-1.4.12.15.6.6"><div class="titlepage"><div><div><h4 class="title"><span class="number">10.7.3.3 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Event delivery to external sinks</span> <a title="Permalink" class="permalink" href="bk02ch10.html#id-1.4.12.15.6.6">#</a></h4><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>You can configure the Telemetry service to deliver the events
into external sinks. These sinks are configurable in the
<code class="literal">/etc/ceilometer/event_pipeline.yaml</code> file.</p></div></div></div><div class="sect1 " id="id-1.4.12.16"><div class="titlepage"><div><div><h2 class="title"><span class="number">10.8 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Troubleshoot Telemetry</span> <a title="Permalink" class="permalink" href="bk02ch10.html#id-1.4.12.16">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><div class="sect2 " id="id-1.4.12.16.2"><div class="titlepage"><div><div><h3 class="title"><span class="number">10.8.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Logging in Telemetry</span> <a title="Permalink" class="permalink" href="bk02ch10.html#id-1.4.12.16.2">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>The Telemetry service has similar log settings as the other OpenStack
services. Multiple options are available to change the target of
logging, the format of the log entries and the log levels.</p><p>The log settings can be changed in <code class="literal">ceilometer.conf</code>. The list of
configuration options are listed in the logging configuration options
table in the <a class="link" href="http://docs.openstack.org/newton/config-reference/telemetry.html" target="_blank">Telemetry
section</a>
in the OpenStack Configuration Reference.</p><p>By default <code class="literal">stderr</code> is used as standard output for the log messages.
It can be changed to either a log file or syslog. The <code class="literal">debug</code> and
<code class="literal">verbose</code> options are also set to false in the default settings, the
default log levels of the corresponding modules can be found in the
table referred above.</p></div><div class="sect2 " id="id-1.4.12.16.3"><div class="titlepage"><div><div><h3 class="title"><span class="number">10.8.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Recommended order of starting services</span> <a title="Permalink" class="permalink" href="bk02ch10.html#id-1.4.12.16.3">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>As it can be seen in <a class="link" href="https://bugs.launchpad.net/devstack/+bug/1355809" target="_blank">Bug
1355809</a>, the wrong
ordering of service startup can result in data loss.</p><p>When the services are started for the first time or in line with the
message queue service restart, it takes time while the
<code class="literal">ceilometer-collector</code> service establishes the connection and joins or
rejoins to the configured exchanges. Therefore, if the
<code class="literal">ceilometer-agent-compute</code>, <code class="literal">ceilometer-agent-central</code>, and the
<code class="literal">ceilometer-agent-notification</code> services are started before
the <code class="literal">ceilometer-collector</code> service, the <code class="literal">ceilometer-collector</code> service
may lose some messages while connecting to the message queue service.</p><p>The possibility of this issue to happen is higher, when the polling
interval is set to a relatively short period. In order to avoid this
situation, the recommended order of service startup is to start or
restart the <code class="literal">ceilometer-collector</code> service after the message queue. All
the other Telemetry services should be started or restarted after and
the <code class="literal">ceilometer-agent-compute</code> should be the last in the sequence, as this
component emits metering messages in order to send the samples to the
collector.</p></div><div class="sect2 " id="id-1.4.12.16.4"><div class="titlepage"><div><div><h3 class="title"><span class="number">10.8.3 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Notification agent</span> <a title="Permalink" class="permalink" href="bk02ch10.html#id-1.4.12.16.4">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>In the Icehouse release of OpenStack a new service was introduced to be
responsible for consuming notifications that are coming from other
OpenStack services.</p><p>If the <code class="literal">ceilometer-agent-notification</code> service is not installed and
started, samples originating from notifications will not be generated.
In case of the lack of notification based samples, the state of this
service and the log file of Telemetry should be checked first.</p><p>For the list of meters that are originated from notifications, see the
<a class="link" href="http://docs.openstack.org/developer/ceilometer/measurements.html" target="_blank">Telemetry Measurements
Reference</a>.</p></div><div class="sect2 " id="id-1.4.12.16.5"><div class="titlepage"><div><div><h3 class="title"><span class="number">10.8.4 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Recommended auth_url to be used</span> <a title="Permalink" class="permalink" href="bk02ch10.html#id-1.4.12.16.5">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>When using the Telemetry command-line client, the credentials and the
<code class="literal">os_auth_url</code> have to be set in order for the client to authenticate
against OpenStack Identity. For further details
about the credentials that have to be provided see the <a class="link" href="http://docs.openstack.org/developer/python-ceilometerclient/" target="_blank">Telemetry Python
API</a>.</p><p>The service catalog provided by OpenStack Identity contains the
URLs that are available for authentication. The URLs have
different <code class="literal">port</code>s, based on whether the type of the given URL is
<code class="literal">public</code>, <code class="literal">internal</code> or <code class="literal">admin</code>.</p><p>OpenStack Identity is about to change API version from v2 to v3. The
<code class="literal">adminURL</code> endpoint (which is available via the port: <code class="literal">35357</code>)
supports only the v3 version, while the other two supports both.</p><p>The Telemetry command line client is not adapted to the v3 version of
the OpenStack Identity API. If the <code class="literal">adminURL</code> is used as
<code class="literal">os_auth_url</code>, the <code class="command">ceilometer</code> command results in the following
error message:</p><div class="verbatim-wrap"><pre class="screen">$ ceilometer meter-list
  Unable to determine the Keystone version to authenticate with \
  using the given auth_url: http://10.0.2.15:35357/v2.0</pre></div><p>Therefore when specifying the <code class="literal">os_auth_url</code> parameter on the command
line or by using environment variable, use the <code class="literal">internalURL</code> or
<code class="literal">publicURL</code>.</p><p>For more details check the bug report <a class="link" href="https://bugs.launchpad.net/python-ceilometerclient/+bug/1351841" target="_blank">Bug
1351841</a>.</p></div></div><div class="sect1 " id="id-1.4.12.17"><div class="titlepage"><div><div><h2 class="title"><span class="number">10.9 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Telemetry best practices</span> <a title="Permalink" class="permalink" href="bk02ch10.html#id-1.4.12.17">#</a></h2><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><p>The following are some suggested best practices to follow when deploying
and configuring the Telemetry service. The best practices are divided
into data collection and storage.</p><div class="sect2 " id="id-1.4.12.17.3"><div class="titlepage"><div><div><h3 class="title"><span class="number">10.9.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Data collection</span> <a title="Permalink" class="permalink" href="bk02ch10.html#id-1.4.12.17.3">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>The Telemetry service collects a continuously growing set of data. Not
all the data will be relevant for an administrator to monitor.</p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>Based on your needs, you can edit the <code class="literal">pipeline.yaml</code> configuration
file to include a selected number of meters while disregarding the
rest.</p></li><li class="listitem "><p>By default, Telemetry service polls the service APIs every 10
minutes. You can change the polling interval on a per meter basis by
editing the <code class="literal">pipeline.yaml</code> configuration file.</p><div id="id-1.4.12.17.3.2.1.2.2.2" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg" /><h6>Warning</h6><p>If the polling interval is too short, it will likely cause
increase of stored data and the stress on the service APIs.</p></div></li><li class="listitem "><p>Expand the configuration to have greater control over different meter
intervals.</p><div id="id-1.4.12.17.3.2.1.2.3.2" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note</h6><p>For more information, see the
<a class="xref" href="bk02ch10.html#telemetry-pipeline-configuration" title="10.3.1. Pipeline configuration">Section 10.3.1, “Pipeline configuration”</a>.</p></div></li></ul></div></li><li class="step "><p>If you are using the Kilo version of Telemetry, you can delay or adjust
polling requests by enabling the jitter support. This adds a random
delay on how the polling agents send requests to the service APIs. To
enable jitter, set <code class="literal">shuffle_time_before_polling_task</code> in the
<code class="literal">ceilometer.conf</code> configuration file to an integer greater
than 0.</p></li><li class="step "><p>If you are using Juno or later releases, based on the number of
resources that will be polled, you can add additional central and
compute agents as necessary. The agents are designed to scale
horizontally.</p><div id="id-1.4.12.17.3.2.3.2" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note</h6><p>For more information see, <a class="xref" href="bk02ch10.html#ha-deploy-services" title="10.2.3. Support for HA deployment">Section 10.2.3, “Support for HA deployment”</a>.</p></div></li><li class="step "><p>If you are using Juno or later releases, use the <code class="literal">notifier://</code>
publisher rather than <code class="literal">rpc://</code> as there is a certain level of overhead
that comes with RPC.</p><div id="id-1.4.12.17.3.2.4.2" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note</h6><p>For more information on RPC overhead, see <a class="link" href="https://www.rabbitmq.com/tutorials/tutorial-six-python.html" target="_blank">RPC overhead
info</a>.</p></div></li></ol></div></div></div><div class="sect2 " id="id-1.4.12.17.4"><div class="titlepage"><div><div><h3 class="title"><span class="number">10.9.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Data storage</span> <a title="Permalink" class="permalink" href="bk02ch10.html#id-1.4.12.17.4">#</a></h3><div class="doc-status"><ul><li><span class="ds-label">File Name: </span>bk_openstack_admin.xml</li><li><span class="ds-label">ID: </span><span class="ds-message">no ID found</span></li></ul></div></div></div></div><div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step "><p>We recommend that you avoid open-ended queries. In order to get better
performance you can use reasonable time ranges and/or other query
constraints for retrieving measurements.</p><p>For example, this open-ended query might return an unpredictable amount
of data:</p><div class="verbatim-wrap"><pre class="screen">$ ceilometer sample-list --meter cpu -q 'resource_id=INSTANCE_ID_1'</pre></div><p>Whereas, this well-formed query returns a more reasonable amount of
data, hence better performance:</p><div class="verbatim-wrap"><pre class="screen">$ ceilometer sample-list --meter cpu -q 'resource_id=INSTANCE_ID_1;timestamp &gt; 2015-05-01T00:00:00;timestamp &lt; 2015-06-01T00:00:00'</pre></div><div id="id-1.4.12.17.4.2.1.6" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note</h6><p>As of the Liberty release, the number of items returned will be
restricted to the value defined by <code class="literal">default_api_return_limit</code> in the
<code class="literal">ceilometer.conf</code> configuration file. Alternatively, the value can
be set per query by passing <code class="literal">limit</code> option in request.</p></div></li><li class="step "><p>You can install the API behind <code class="literal">mod_wsgi</code>, as it provides more
settings to tweak, like <code class="literal">threads</code> and <code class="literal">processes</code> in case of
<code class="literal">WSGIDaemon</code>.</p><div id="id-1.4.12.17.4.2.2.2" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note</h6><p>For more information on how to configure <code class="literal">mod_wsgi</code>, see the
<a class="link" href="http://docs.openstack.org/developer/ceilometer/install/mod_wsgi.html" target="_blank">Telemetry Install Documentation</a>.</p></div></li><li class="step "><p>The collection service provided by the Telemetry project is not intended
to be an archival service. Set a Time to Live (TTL) value to expire data
and minimize the database size. If you would like to keep your data for
longer time period, you may consider storing it in a data warehouse
outside of Telemetry.</p><div id="id-1.4.12.17.4.2.3.2" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note</h6><p>For more information on how to set the TTL, see
<a class="xref" href="bk02ch10.html#telemetry-storing-samples" title="10.2.6. Storing samples">Section 10.2.6, “Storing samples”</a>.</p></div></li><li class="step "><p>We recommend that you do not use SQLAlchemy back end prior to the Juno
release, as it previously contained extraneous relationships to handle
deprecated data models. This resulted in extremely poor query
performance.</p></li><li class="step "><p>We recommend that you do not run MongoDB on the same node as the
controller. Keep it on a separate node optimized for fast storage for
better performance. Also it is advisable for the MongoDB node to have a
lot of memory.</p><div id="id-1.4.12.17.4.2.5.2" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg" /><h6>Note</h6><p>For more information on how much memory you need, see <a class="link" href="http://docs.mongodb.org/manual/faq/diagnostics/#how-do-i-calculate-how-much-ram-i-need-for-my-application" target="_blank">MongoDB
FAQ</a>.</p></div></li><li class="step "><p>Use replica sets in MongoDB. Replica sets provide high availability
through automatic failover. If your primary node fails, MongoDB will
elect a secondary node to replace the primary node, and your cluster
will remain functional.</p><p>For more information on replica sets, see the <a class="link" href="http://docs.mongodb.org/manual/tutorial/deploy-replica-set/" target="_blank">MongoDB replica sets
docs</a>.</p></li><li class="step "><p>Use sharding in MongoDB. Sharding helps in storing data records across
multiple machines and is the MongoDB’s approach to meet the demands of
data growth.</p><p>For more information on sharding, see the <a class="link" href="http://docs.mongodb.org/manual/sharding/" target="_blank">MongoDB sharding
docs</a>.</p></li></ol></div></div></div></div></div></div><div class="page-bottom"><div id="_bottom-navigation"><a class="nav-link" href="bk02ch11.html"><span class="next-icon">→</span><span class="nav-label"><span class="number">Chapter 11 </span>Database</span></a><a class="nav-link" href="networking.html"><span class="prev-icon">←</span><span class="nav-label"><span class="number">Chapter 9 </span>Networking</span></a></div><div class="_share-print"><div class="online-contents share"><strong>Share this page: </strong><span class="share-buttons"><span class="_share-fb bottom-button">Facebook</span><span class="spacer"> • </span><span class="_share-in bottom-button">LinkedIn</span><span class="spacer"> • </span><span class="_share-tw bottom-button">Twitter</span><span class="spacer"> • </span><span class="_share-mail bottom-button">E-Mail</span></span></div><div class="print"><span class="_print-button bottom-button">Print this page</span></div><div class="clearme"></div></div></div></div><div id="_inward"></div></div><div id="_footer-wrap"><div id="_footer"><p>©
        2022 
        SUSE</p><ul><li><a href="https://jobs.suse.com/" target="_top">Careers</a></li><li><a href="https://www.suse.com/company/legal/" target="_top">Legal</a></li><li><a href="https://www.suse.com/company/about/" target="_top">About</a></li><li><a href="https://www.suse.com/contact/" target="_top">Contact Us</a></li></ul></div></div></body></html>