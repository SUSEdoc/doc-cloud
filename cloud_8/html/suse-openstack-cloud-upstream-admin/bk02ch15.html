<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes"/><title>SUSE OpenStack Cloud 8 | OpenStack Administrator Guide | Cross-project features</title><link rel="stylesheet" type="text/css" href="static/css/style.css"/>
<meta name="title" content="Cross-project features | SUSE OpenStack Cloud 8"/>
<meta name="description" content="Many features are common to all the OpenStack services and are consistent in their configuration and deployment patterns. Unless explicitly noted, yo…"/>
<meta name="product-name" content="SUSE OpenStack Cloud"/>
<meta name="product-number" content="8"/>
<meta name="book-title" content="OpenStack Administrator Guide"/>
<meta name="chapter-title" content="Chapter 15. Cross-project features"/>
<meta name="tracker-url" content="https://bugzilla.suse.com/enter_bug.cgi"/>
<meta name="tracker-type" content="bsc"/>
<meta name="tracker-bsc-component" content="Documentation"/>
<meta name="tracker-bsc-product" content="SUSE OpenStack Cloud 8"/>
<meta property="og:title" content="Cross-project features | SUSE OpenStack Cloud 8"/>
<meta property="og:description" content="Many features are common to all the OpenStack services and are consistent in their configuration and deployment patterns. Unless explicitly noted, yo…"/>
<meta property="og:type" content="article"/>
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Cross-project features | SUSE OpenStack Cloud 8"/>
<meta name="twitter:description" content="Many features are common to all the OpenStack services and are consistent in their configuration and deployment patterns. Unless explicitly noted, yo…"/>
<link rel="prev" href="osadm-os-cli.html" title="Chapter 14. OpenStack command-line clients"/><link rel="next" href="bk02ch16.html" title="Chapter 16. Appendix"/>
<script type="text/javascript">

if ( window.location.protocol.toLowerCase() != 'file:' ) {
  document.write('<link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"></link>');
};

</script><noscript><link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"/></noscript><script src="static/js/jquery-1.12.4.min.js" type="text/javascript"> </script><script src="static/js/script.js" type="text/javascript"> </script><script src="static/js/highlight.min.js" type="text/javascript"> </script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script></head><body class="draft wide offline js-off" onload="$('#betawarn-button-wrap').toggle();if (document.cookie.length > 0) {if (document.cookie.indexOf('betawarn=closed') != -1){$('#betawarn').toggle()}};"><div id="betawarn" style="position:fixed;bottom:0;z-index:9025;background-color:#FDE8E8;padding:1em;margin-left:10%;margin-right:10%;display:block;border-top:.75em solid #E11;width:80%"><p style="color:#333;margin:1em 0;padding:0;">This is a draft document that was built and uploaded automatically. It may document beta software and be incomplete or even incorrect. <strong>Use this document at your own risk.</strong></p> <div id="betawarn-button-wrap" style="display:none;margin:0;padding:0;"><a href="#" onclick="$('#betawarn').toggle();var d=new Date();d.setTime(d.getTime()+(0.5*24*60*60*1000));document.cookie='betawarn=closed; expires='+d.toUTCString()+'; path=/'; return false;" style="color:#333;text-decoration:underline;float:left;margin-top:.5em;padding:1em;display:block;background-color:#FABEBE;">I understand this is a draft</a></div></div><div class="bypass-block"><a href="#_content">Jump to content</a><a href="#_bottom-pagination">Jump to page navigation: previous page [access key p]/next page [access key n]</a></div><header id="_mainnav"><div class="growth-inhibitor"><img src="static/images/logo.svg" alt="Logo" class="logo"/></div></header><div class="crumbs"><div class="growth-inhibitor"><a class="crumb" href="index.html">OpenStack Administrator Guide</a><span> / </span><a class="crumb" href="bk02ch15.html">Cross-project features</a></div></div><main id="_content"><nav id="_side-toc-overall" class="side-toc"><div class="side-title">OpenStack Administrator Guide</div><ol><li><a href="bk02ch01.html" class=" "><span class="title-number">1 </span><span class="title-name">Documentation Conventions</span></a></li><li><a href="bk02ch02.html" class=" "><span class="title-number">2 </span><span class="title-name">Get started with OpenStack</span></a></li><li><a href="cha-identity.html" class=" "><span class="title-number">3 </span><span class="title-name">Identity management</span></a></li><li><a href="bk02ch04.html" class=" "><span class="title-number">4 </span><span class="title-name">Dashboard</span></a></li><li><a href="bk02ch05.html" class=" "><span class="title-number">5 </span><span class="title-name">Compute</span></a></li><li><a href="bk02ch06.html" class=" "><span class="title-number">6 </span><span class="title-name">Object Storage</span></a></li><li><a href="bk02ch07.html" class=" "><span class="title-number">7 </span><span class="title-name">Block Storage</span></a></li><li><a href="bk02ch08.html" class=" "><span class="title-number">8 </span><span class="title-name">Shared File Systems</span></a></li><li><a href="networking.html" class=" "><span class="title-number">9 </span><span class="title-name">Networking</span></a></li><li><a href="bk02ch10.html" class=" "><span class="title-number">10 </span><span class="title-name">Telemetry</span></a></li><li><a href="bk02ch11.html" class=" "><span class="title-number">11 </span><span class="title-name">Database</span></a></li><li><a href="bk02ch12.html" class=" "><span class="title-number">12 </span><span class="title-name">Bare Metal</span></a></li><li><a href="bk02ch13.html" class=" "><span class="title-number">13 </span><span class="title-name">Orchestration</span></a></li><li><a href="osadm-os-cli.html" class=" "><span class="title-number">14 </span><span class="title-name">OpenStack command-line clients</span></a></li><li><a href="bk02ch15.html" class=" you-are-here"><span class="title-number">15 </span><span class="title-name">Cross-project features</span></a></li><li><a href="bk02ch16.html" class=" "><span class="title-number">16 </span><span class="title-name">Appendix</span></a></li><li><a href="bk02go01.html" class=" "><span class="title-number"> </span><span class="title-name">Glossary</span></a></li> </ol> </nav><button id="_open-side-toc-overall" title="Contents"> </button><article class="documentation"><button id="_unfold-side-toc-page">On this page</button><section class="chapter" id="id-1.4.17" data-id-title="Cross-project features"><div class="titlepage"><div><div class="version-info">Applies to  <span class="productname">SUSE OpenStack Cloud</span> <span class="productnumber">8</span></div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">15 </span><span class="title-name">Cross-project features</span></span> <a title="Permalink" class="permalink" href="bk02ch15.html#">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>Many features are common to all the OpenStack services and are consistent in
their configuration and deployment patterns. Unless explicitly noted, you can
safely assume that the features in this chapter are supported and configured
in a consistent manner.</p><section class="sect1" id="id-1.4.17.4" data-id-title="Cross-origin resource sharing"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">15.1 </span><span class="title-name">Cross-origin resource sharing</span></span> <a title="Permalink" class="permalink" href="bk02ch15.html#id-1.4.17.4">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><div id="id-1.4.17.4.2" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note</div><p>This is a new feature in OpenStack Liberty.</p></div><p>OpenStack supports <a class="xref" href="bk02go01.html#term-cross-origin-resource-sharing-cors" title="Cross-Origin Resource Sharing (CORS)">Cross-Origin Resource Sharing (CORS)</a>, a W3C
specification defining a contract by which the single-origin policy of a user
agent (usually a browser) may be relaxed. It permits the javascript engine
to access an API that does not reside on the same domain, protocol, or port.</p><p>This feature is most useful to organizations which maintain one or more
custom user interfaces for OpenStack, as it permits those interfaces to access
the services directly, rather than requiring an intermediate proxy server. It
can, however, also be misused by malicious actors; please review the
security advisory below for more information.</p><section class="sect2" id="id-1.4.17.4.5" data-id-title="Enabling CORS with configuration"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">15.1.1 </span><span class="title-name">Enabling CORS with configuration</span></span> <a title="Permalink" class="permalink" href="bk02ch15.html#id-1.4.17.4.5">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>In most cases, CORS support is built directly into the service itself. To
enable it, simply follow the configuration options exposed in the default
configuration file, or add it yourself according to the pattern below.</p><div class="verbatim-wrap highlight ini"><pre class="screen">[cors]
allowed_origin = https://first_ui.example.com
max_age = 3600
allow_methods = GET,POST,PUT,DELETE
allow_headers = Content-Type,Cache-Control,Content-Language,Expires,Last-Modified,Pragma,X-Custom-Header
expose_headers = Content-Type,Cache-Control,Content-Language,Expires,Last-Modified,Pragma,X-Custom-Header</pre></div><p>Additional origins can be explicitly added. To express this in
your configuration file, first begin with a <code class="literal">[cors]</code> group as above,
into which you place your default configuration values. Then, add as many
additional configuration groups as necessary, naming them
<code class="literal">[cors.{something}]</code> (each name must be unique). The purpose of the
suffix to <code class="literal">cors.</code> is legibility, we recommend using a reasonable
human-readable string:</p><div class="verbatim-wrap highlight ini"><pre class="screen">[cors.ironic_webclient]
# CORS Configuration for a hypothetical ironic webclient, which overrides
# authentication
allowed_origin = https://ironic.example.com:443
allow_credentials = True

[cors.horizon]
# CORS Configuration for horizon, which uses global options.
allowed_origin = https://horizon.example.com:443

[cors.wildcard]
# CORS Configuration for the CORS specified domain wildcard, which only
# permits HTTP GET requests.
allowed_origin = *
allow_methods = GET</pre></div><p>For more information about CORS configuration,
see <a class="link" href="http://docs.openstack.org/newton/config-reference/common-configurations/cors.html" target="_blank">cross-origin resource sharing</a>
in OpenStack Configuration Reference.</p></section><section class="sect2" id="id-1.4.17.4.6" data-id-title="Enabling CORS with PasteDeploy"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">15.1.2 </span><span class="title-name">Enabling CORS with PasteDeploy</span></span> <a title="Permalink" class="permalink" href="bk02ch15.html#id-1.4.17.4.6">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>CORS can also be configured using PasteDeploy. First of all, ensure that
OpenStack's <code class="literal">oslo_middleware</code> package (version 2.4.0 or later) is
available in the Python environment that is running the service. Then,
add the following configuration block to your <code class="literal">paste.ini</code> file.</p><div class="verbatim-wrap highlight ini"><pre class="screen">[filter:cors]
paste.filter_factory = oslo_middleware.cors:filter_factory
allowed_origin = https://website.example.com:443
max_age = 3600
allow_methods = GET,POST,PUT,DELETE
allow_headers = Content-Type,Cache-Control,Content-Language,Expires,Last-Modified,Pragma,X-Custom-Header
expose_headers = Content-Type,Cache-Control,Content-Language,Expires,Last-Modified,Pragma,X-Custom-Header</pre></div><div id="id-1.4.17.4.6.4" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note</div><p>To add an additional domain in oslo_middleware v2.4.0, add
another filter. In v3.0.0 and after, you may add multiple domains
in the above <code class="literal">allowed_origin</code> field, separated by commas.</p></div></section><section class="sect2" id="id-1.4.17.4.7" data-id-title="Security concerns"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">15.1.3 </span><span class="title-name">Security concerns</span></span> <a title="Permalink" class="permalink" href="bk02ch15.html#id-1.4.17.4.7">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>CORS specifies a wildcard character <code class="literal">*</code>, which permits access to all user
agents, regardless of domain, protocol, or host. While there are valid use
cases for this approach, it also permits a malicious actor to create a
convincing facsimile of a user interface, and trick users into revealing
authentication credentials. Please carefully evaluate your use case and the
relevant documentation for any risk to your organization.</p><div id="id-1.4.17.4.7.3" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note</div><p>The CORS specification does not support using this wildcard as
a part of a URI. Setting <code class="literal">allowed_origin</code> to <code class="literal">*</code> would work, while
<code class="literal">*.openstack.org</code> would not.</p></div></section><section class="sect2" id="id-1.4.17.4.8" data-id-title="Troubleshooting"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">15.1.4 </span><span class="title-name">Troubleshooting</span></span> <a title="Permalink" class="permalink" href="bk02ch15.html#id-1.4.17.4.8">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>CORS is very easy to get wrong, as even one incorrect property will violate
the prescribed contract. Here are some steps you can take to troubleshoot
your configuration.</p><section class="sect3" id="id-1.4.17.4.8.3" data-id-title="Check the service log"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">15.1.4.1 </span><span class="title-name">Check the service log</span></span> <a title="Permalink" class="permalink" href="bk02ch15.html#id-1.4.17.4.8.3">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>The CORS middleware used by OpenStack provides verbose debug logging that
should reveal most configuration problems. Here are some example log
messages, and how to resolve them.</p></section><section class="sect3" id="id-1.4.17.4.8.4" data-id-title="Problem"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">15.1.4.2 </span><span class="title-name">Problem</span></span> <a title="Permalink" class="permalink" href="bk02ch15.html#id-1.4.17.4.8.4">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>
            <code class="literal">CORS request from origin 'http://example.com' not permitted.</code>
          </p></section><section class="sect3" id="id-1.4.17.4.8.5" data-id-title="Solution"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">15.1.4.3 </span><span class="title-name">Solution</span></span> <a title="Permalink" class="permalink" href="bk02ch15.html#id-1.4.17.4.8.5">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>A request was received from the origin <code class="literal">http://example.com</code>, however this
origin was not found in the permitted list. The cause may be a superfluous
port notation (ports 80 and 443 do not need to be specified). To correct,
ensure that the configuration property for this host is identical to the
host indicated in the log message.</p></section><section class="sect3" id="id-1.4.17.4.8.6" data-id-title="Problem"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">15.1.4.4 </span><span class="title-name">Problem</span></span> <a title="Permalink" class="permalink" href="bk02ch15.html#id-1.4.17.4.8.6">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>
            <code class="literal">Request method 'DELETE' not in permitted list: GET,PUT,POST</code>
          </p></section><section class="sect3" id="id-1.4.17.4.8.7" data-id-title="Solution"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">15.1.4.5 </span><span class="title-name">Solution</span></span> <a title="Permalink" class="permalink" href="bk02ch15.html#id-1.4.17.4.8.7">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>A user agent has requested permission to perform a DELETE request, however
the CORS configuration for the domain does not permit this. To correct, add
this method to the <code class="literal">allow_methods</code> configuration property.</p></section><section class="sect3" id="id-1.4.17.4.8.8" data-id-title="Problem"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">15.1.4.6 </span><span class="title-name">Problem</span></span> <a title="Permalink" class="permalink" href="bk02ch15.html#id-1.4.17.4.8.8">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>
            <code class="literal">Request header 'X-Custom-Header' not in permitted list: X-Other-Header</code>
          </p></section><section class="sect3" id="id-1.4.17.4.8.9" data-id-title="Solution"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">15.1.4.7 </span><span class="title-name">Solution</span></span> <a title="Permalink" class="permalink" href="bk02ch15.html#id-1.4.17.4.8.9">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>A request was received with the header <code class="literal">X-Custom-Header</code>, which is not
permitted. Add this header to the <code class="literal">allow_headers</code> configuration
property.</p></section><section class="sect3" id="id-1.4.17.4.8.10" data-id-title="Open your browsers console log"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">15.1.4.8 </span><span class="title-name">Open your browser's console log</span></span> <a title="Permalink" class="permalink" href="bk02ch15.html#id-1.4.17.4.8.10">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>Most browsers provide helpful debug output when a CORS request is rejected.
Usually this happens when a request was successful, but the return headers on
the response do not permit access to a property which the browser is trying
to access.</p></section><section class="sect3" id="id-1.4.17.4.8.11" data-id-title="Manually construct a CORS request"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">15.1.4.9 </span><span class="title-name">Manually construct a CORS request</span></span> <a title="Permalink" class="permalink" href="bk02ch15.html#id-1.4.17.4.8.11">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>By using <code class="literal">curl</code> or a similar tool, you can trigger a CORS response with a
properly constructed HTTP request. An example request and response might look
like this.</p><p>Request example:</p><div class="verbatim-wrap"><pre class="screen">$ curl -I -X OPTIONS https://api.example.com/api -H "Origin: https://ui.example.com"</pre></div><p>Response example:</p><div class="verbatim-wrap"><pre class="screen">HTTP/1.1 204 No Content
Content-Length: 0
Access-Control-Allow-Origin: https://ui.example.com
Access-Control-Allow-Methods: GET,POST,PUT,DELETE
Access-Control-Expose-Headers: origin,authorization,accept,x-total,x-limit,x-marker,x-client,content-type
Access-Control-Allow-Headers: origin,authorization,accept,x-total,x-limit,x-marker,x-client,content-type
Access-Control-Max-Age: 3600</pre></div><p>If the service does not return any access control headers, check the service
log, such as <code class="literal">/var/log/upstart/ironic-api.log</code> for an indication on what
went wrong.</p></section></section></section></section><nav class="bottom-pagination"><div><a class="pagination-link prev" href="osadm-os-cli.html"><span class="pagination-relation">Previous</span><span class="pagination-label"><span class="title-number">Chapter 14 </span>OpenStack command-line clients</span></a> </div><div><a class="pagination-link next" href="bk02ch16.html"><span class="pagination-relation">Next</span><span class="pagination-label"><span class="title-number">Chapter 16 </span>Appendix</span></a> </div></nav></article><aside id="_side-toc-page" class="side-toc"><div class="side-title">On this page</div><div class="toc"><ul><li><span class="sect1"><a href="bk02ch15.html#id-1.4.17.4"><span class="title-number">15.1 </span><span class="title-name">Cross-origin resource sharing</span></a></span></li></ul></div><div class="side-title">Share this page</div><ul class="share"><li><a id="_share-fb" href="#" title="Facebook"> </a></li><li><a id="_share-in" href="#" title="LinkedIn"> </a></li><li><a id="_share-tw" href="#" title="Twitter"> </a></li><li><a id="_share-mail" href="#" title="E-Mail"> </a></li><li><a id="_print-button" href="#" title="Print this page"> </a></li></ul> </aside></main><footer id="_footer"><div class="growth-inhibitor"><div class="copy"><span class="copy__rights">© SUSE
                 2022</span></div></div></footer></body></html>