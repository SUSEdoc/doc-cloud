<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes"/><title>SUSE OpenStack Cloud 8 | Installing with Cloud Lifecycle Manager | Installing SUSE CaaS Platform Heat Templates</title><link rel="stylesheet" type="text/css" href="static/css/style.css"/>
<meta name="title" content="Installing SUSE CaaS Platform Heat Templates | SUSE Op…"/>
<meta name="description" content="This chapter describes how to install SUSE CaaS Platform Heat template on SUSE OpenStack Cloud."/>
<meta name="product-name" content="SUSE OpenStack Cloud"/>
<meta name="product-number" content="8"/>
<meta name="book-title" content="Installing with Cloud Lifecycle Manager"/>
<meta name="chapter-title" content="Chapter 21. Installing SUSE CaaS Platform Heat Templates"/>
<meta name="tracker-url" content="https://bugzilla.suse.com/enter_bug.cgi"/>
<meta name="tracker-type" content="bsc"/>
<meta name="tracker-bsc-component" content="Documentation"/>
<meta name="tracker-bsc-product" content="SUSE OpenStack Cloud 8"/>
<meta property="og:title" content="Installing SUSE CaaS Platform Heat Templates | SUSE Op…"/>
<meta property="og:description" content="This chapter describes how to install SUSE CaaS Platform Heat template on SUSE OpenStack Cloud."/>
<meta property="og:type" content="article"/>
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Installing SUSE CaaS Platform Heat Templates | SUSE Op…"/>
<meta name="twitter:description" content="This chapter describes how to install SUSE CaaS Platform Heat template on SUSE OpenStack Cloud."/>
<link rel="prev" href="install-ardana-manila.html" title="Chapter 20. Installing Manila and Creating Manila Shares"/><link rel="next" href="integrations.html" title="Chapter 22. Integrations"/>
<script type="text/javascript">

if ( window.location.protocol.toLowerCase() != 'file:' ) {
  document.write('<link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"></link>');
};

</script><noscript><link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"/></noscript><script src="static/js/jquery-1.12.4.min.js" type="text/javascript"> </script><script src="static/js/script.js" type="text/javascript"> </script><script src="static/js/highlight.min.js" type="text/javascript"> </script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script><meta name="edit-url" content="https://github.com/SUSE-Cloud/doc-cloud/blob/maintenance/cloud_8/xml/install_caasp_heat_templates.xml"/></head><body class="draft wide offline js-off" onload="$('#betawarn-button-wrap').toggle();if (document.cookie.length > 0) {if (document.cookie.indexOf('betawarn=closed') != -1){$('#betawarn').toggle()}};"><div id="betawarn" style="position:fixed;bottom:0;z-index:9025;background-color:#FDE8E8;padding:1em;margin-left:10%;margin-right:10%;display:block;border-top:.75em solid #E11;width:80%"><p style="color:#333;margin:1em 0;padding:0;">This is a draft document that was built and uploaded automatically. It may document beta software and be incomplete or even incorrect. <strong>Use this document at your own risk.</strong></p> <div id="betawarn-button-wrap" style="display:none;margin:0;padding:0;"><a href="#" onclick="$('#betawarn').toggle();var d=new Date();d.setTime(d.getTime()+(0.5*24*60*60*1000));document.cookie='betawarn=closed; expires='+d.toUTCString()+'; path=/'; return false;" style="color:#333;text-decoration:underline;float:left;margin-top:.5em;padding:1em;display:block;background-color:#FABEBE;">I understand this is a draft</a></div></div><div class="bypass-block"><a href="#_content">Jump to content</a><a href="#_bottom-pagination">Jump to page navigation: previous page [access key p]/next page [access key n]</a></div><header id="_mainnav"><div class="growth-inhibitor"><img src="static/images/logo.svg" alt="Logo" class="logo"/></div></header><div class="crumbs"><div class="growth-inhibitor"><a class="crumb" href="index.html">Installing with Cloud Lifecycle Manager</a><span> / </span><a class="crumb" href="cloudinstallation.html">Cloud Installation</a><span> / </span><a class="crumb" href="install-heat-templates.html">Installing SUSE CaaS Platform Heat Templates</a></div></div><main id="_content"><nav id="_side-toc-overall" class="side-toc"><div class="side-title"><em class="citetitle">Installing with Cloud Lifecycle Manager</em></div><ol><li><a href="install-overview.html" class=" "><span class="title-number"> </span><span class="title-name">Installation Overview</span></a></li><li><a href="preinstall.html" class="has-children "><span class="title-number">I </span><span class="title-name">Pre-Installation</span></a><ol><li><a href="preinstall-overview.html" class=" "><span class="title-number">1 </span><span class="title-name">Overview</span></a></li><li><a href="preinstall-checklist.html" class=" "><span class="title-number">2 </span><span class="title-name">Pre-Installation Checklist</span></a></li><li><a href="cha-depl-dep-inst.html" class=" "><span class="title-number">3 </span><span class="title-name">Installing the Cloud Lifecycle Manager server</span></a></li><li><a href="app-deploy-smt-lcm.html" class=" "><span class="title-number">4 </span><span class="title-name">Installing and Setting Up an SMT Server on the Cloud Lifecycle Manager server (Optional)</span></a></li><li><a href="cha-depl-repo-conf-lcm.html" class=" "><span class="title-number">5 </span><span class="title-name">Software Repository Setup</span></a></li><li><a href="multipath-boot-from-san.html" class=" "><span class="title-number">6 </span><span class="title-name">Boot from SAN and Multipath Configuration</span></a></li></ol></li><li class="active"><a href="cloudinstallation.html" class="has-children you-are-here"><span class="title-number">II </span><span class="title-name">Cloud Installation</span></a><ol><li><a href="cloudinstallation-overview.html" class=" "><span class="title-number">7 </span><span class="title-name">Overview</span></a></li><li><a href="preparing-standalone.html" class=" "><span class="title-number">8 </span><span class="title-name">Preparing for Stand-Alone Deployment</span></a></li><li><a href="install-gui.html" class=" "><span class="title-number">9 </span><span class="title-name">Installing with the Install UI</span></a></li><li><a href="using-git.html" class=" "><span class="title-number">10 </span><span class="title-name">Using Git for Configuration Management</span></a></li><li><a href="install-standalone.html" class=" "><span class="title-number">11 </span><span class="title-name">Installing a Stand-Alone Cloud Lifecycle Manager</span></a></li><li><a href="install-kvm.html" class=" "><span class="title-number">12 </span><span class="title-name">Installing Mid-scale and Entry-scale KVM</span></a></li><li><a href="DesignateInstallOverview.html" class=" "><span class="title-number">13 </span><span class="title-name">DNS Service Installation Overview</span></a></li><li><a href="MagnumOverview.html" class=" "><span class="title-number">14 </span><span class="title-name">Magnum Overview</span></a></li><li><a href="install-esx-ovsvapp.html" class=" "><span class="title-number">15 </span><span class="title-name">Installing ESX Computes and OVSvAPP</span></a></li><li><a href="integrate-nsx-vsphere.html" class=" "><span class="title-number">16 </span><span class="title-name">Integrating NSX for vSphere</span></a></li><li><a href="install-ironic-overview.html" class=" "><span class="title-number">17 </span><span class="title-name">Installing Baremetal (Ironic)</span></a></li><li><a href="install-swift.html" class=" "><span class="title-number">18 </span><span class="title-name">Installation for <span class="phrase"><span class="phrase">SUSE <span class="productname">OpenStack</span> Cloud</span></span> Entry-scale Cloud with Swift Only</span></a></li><li><a href="install-sles-compute.html" class=" "><span class="title-number">19 </span><span class="title-name">Installing SLES Compute</span></a></li><li><a href="install-ardana-manila.html" class=" "><span class="title-number">20 </span><span class="title-name">Installing Manila and Creating Manila Shares</span></a></li><li><a href="install-heat-templates.html" class=" you-are-here"><span class="title-number">21 </span><span class="title-name">Installing SUSE CaaS Platform Heat Templates</span></a></li><li><a href="integrations.html" class=" "><span class="title-number">22 </span><span class="title-name">Integrations</span></a></li><li><a href="troubleshooting-installation.html" class=" "><span class="title-number">23 </span><span class="title-name">Troubleshooting the Installation</span></a></li><li><a href="esx-troubleshooting-installation.html" class=" "><span class="title-number">24 </span><span class="title-name">Troubleshooting the ESX</span></a></li></ol></li><li><a href="post-install.html" class="has-children "><span class="title-number">III </span><span class="title-name">Post-Installation</span></a><ol><li><a href="post-install-overview.html" class=" "><span class="title-number">25 </span><span class="title-name">Overview</span></a></li><li><a href="cloud-verification.html" class=" "><span class="title-number">26 </span><span class="title-name">Cloud Verification</span></a></li><li><a href="ui-verification.html" class=" "><span class="title-number">27 </span><span class="title-name">UI Verification</span></a></li><li><a href="install-openstack-clients.html" class=" "><span class="title-number">28 </span><span class="title-name">Installing OpenStack Clients</span></a></li><li><a href="tls30.html" class=" "><span class="title-number">29 </span><span class="title-name">Configuring Transport Layer Security (TLS)</span></a></li><li><a href="config-availability-zones.html" class=" "><span class="title-number">30 </span><span class="title-name">Configuring Availability Zones</span></a></li><li><a href="OctaviaInstall.html" class=" "><span class="title-number">31 </span><span class="title-name">Configuring Load Balancer as a Service</span></a></li><li><a href="postinstall-checklist.html" class=" "><span class="title-number">32 </span><span class="title-name">Other Common Post-Installation Tasks</span></a></li></ol></li><li><a href="cha-inst-trouble.html" class=" "><span class="title-number">33 </span><span class="title-name">Support</span></a></li> </ol> </nav><button id="_open-side-toc-overall" title="Contents"> </button><article class="documentation"><button id="_unfold-side-toc-page">On this page</button><section class="chapter" id="install-heat-templates" data-id-title="Installing SUSE CaaS Platform Heat Templates"><div class="titlepage"><div><div class="version-info">Applies to  <span class="productname"><span class="phrase"><span class="phrase">SUSE <span class="productname">OpenStack</span> Cloud</span></span></span> <span class="productnumber"><span class="phrase"><span class="phrase">8</span></span></span></div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">21 </span><span class="title-name">Installing SUSE CaaS Platform Heat Templates</span></span> <a title="Permalink" class="permalink" href="install-heat-templates.html#">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE-Cloud/doc-cloud/blob/maintenance/cloud_8/xml/install_caasp_heat_templates.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  This chapter describes how to install SUSE CaaS Platform Heat template on
  <span class="phrase"><span class="phrase">SUSE <span class="productname">OpenStack</span> Cloud</span></span>.
 </p><section class="sect1" id="sec-heat-templates-install" data-id-title="SUSE CaaS Platform Heat Installation Procedure"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">21.1 </span><span class="title-name">SUSE CaaS Platform Heat Installation Procedure</span></span> <a title="Permalink" class="permalink" href="install-heat-templates.html#sec-heat-templates-install">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE-Cloud/doc-cloud/blob/maintenance/cloud_8/xml/install_caasp_heat_templates.xml" title="Edit source document"> </a></div></div></div></div></div><div class="procedure" id="id-1.4.5.16.3.2" data-id-title="Preparation"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 21.1: </span><span class="title-name">Preparation </span></span><a title="Permalink" class="permalink" href="install-heat-templates.html#id-1.4.5.16.3.2">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE-Cloud/doc-cloud/blob/maintenance/cloud_8/xml/install_caasp_heat_templates.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
     Download the latest SUSE CaaS Platform for <span class="productname">OpenStack</span> image (for example,
     <code class="filename">SUSE-CaaS-Platform-3.0-OpenStack-Cloud.x86_64-1.0.0-GM.qcow2</code>)
     from <a class="link" href="https://download.suse.com" target="_blank">https://download.suse.com</a>.
    </p></li><li class="step"><p>
     Upload the image to Glance:
    </p><div class="verbatim-wrap"><pre class="screen">openstack image create --public --disk-format qcow2 --container-format \
bare --file SUSE-CaaS-Platform-3.0-OpenStack-Cloud.x86_64-1.0.0-GM.qcow2 \
CaaSP-3</pre></div></li><li class="step"><p>
     Install the <span class="package">caasp-openstack-heat-templates</span> package on a
     machine with <span class="phrase"><span class="phrase">SUSE <span class="productname">OpenStack</span> Cloud</span></span> repositories:
    </p><div class="verbatim-wrap"><pre class="screen">zypper in caasp-openstack-heat-templates</pre></div><p>
     The installed templates are located in
     <code class="filename">/usr/share/caasp-openstack-heat-templates</code>.
    </p><p>
     Alternatively, you can get official Heat templates by cloning the
     appropriate Git repository:
    </p><div class="verbatim-wrap"><pre class="screen">git clone https://github.com/SUSE/caasp-openstack-heat-templates</pre></div></li></ol></div></div><div class="procedure" id="id-1.4.5.16.3.3" data-id-title="Installing Templates via Horizon"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 21.2: </span><span class="title-name">Installing Templates via Horizon </span></span><a title="Permalink" class="permalink" href="install-heat-templates.html#id-1.4.5.16.3.3">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE-Cloud/doc-cloud/blob/maintenance/cloud_8/xml/install_caasp_heat_templates.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
     In Horizon, go to
     <span class="guimenu">Project</span> › <span class="guimenu">Stacks</span> › <span class="guimenu">Launch
     Stack</span>.
    </p></li><li class="step"><p>
     Select <span class="guimenu">File</span> from the <span class="guimenu">Template Source</span>
     drop-down box and upload the <code class="filename">caasp-stack.yaml</code> file.
    </p></li><li class="step"><p>
     In the <span class="guimenu">Launch Stack</span> dialog, provide the required
     information (stack name, password, flavor size, external network of your
     environment, etc.).
    </p></li><li class="step"><p>
     Click <span class="guimenu">Launch</span> to launch the stack. This creates all
     required resources for running SUSE CaaS Platform in an <span class="productname">OpenStack</span> environment. The
     stack creates one Admin Node, one Master Node, and server worker nodes as
     specified.
    </p></li></ol></div></div><div class="procedure" id="id-1.4.5.16.3.4" data-id-title="Install Templates from the Command Line"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 21.3: </span><span class="title-name">Install Templates from the Command Line </span></span><a title="Permalink" class="permalink" href="install-heat-templates.html#id-1.4.5.16.3.4">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE-Cloud/doc-cloud/blob/maintenance/cloud_8/xml/install_caasp_heat_templates.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
     Specify the appropriate flavor and network settings in the
     <code class="filename">caasp-environment.yaml</code> file.
    </p></li><li class="step"><p>
     Create a stack in Heat by passing the template, environment file, and
     parameters:
    </p><div class="verbatim-wrap"><pre class="screen">openstack stack create -t caasp-stack.yaml -e caasp-environment.yaml \
--parameter image=CaaSP-3 caasp-stack</pre></div></li></ol></div></div><div class="procedure" id="id-1.4.5.16.3.5" data-id-title="Accessing Velum SUSE CaaS Platform dashboard"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 21.4: </span><span class="title-name">Accessing Velum SUSE CaaS Platform dashboard </span></span><a title="Permalink" class="permalink" href="install-heat-templates.html#id-1.4.5.16.3.5">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE-Cloud/doc-cloud/blob/maintenance/cloud_8/xml/install_caasp_heat_templates.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
     After the stack has been created, the Velum SUSE CaaS Platform dashboard runs on the Admin Node.
     You can access it using the Admin Node's floating IP address.
    </p></li><li class="step"><p>
     Create an account and follow the steps in the Velum SUSE CaaS Platform dashboard to complete the
     SUSE CaaS Platform installation.
    </p></li></ol></div></div><p>
   When you have successfully accessed the admin node web interface via the
   floating IP, follow the instructions at <a class="link" href="https://documentation.suse.com/suse-caasp/3/single-html/caasp-deployment/" target="_blank">https://documentation.suse.com/suse-caasp/3/single-html/caasp-deployment/</a> to
   continue the setup of SUSE CaaS Platform.
  </p></section><section class="sect1" id="id-1.4.5.16.4" data-id-title="Installing SUSE CaaS Platform with Multiple Masters"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">21.2 </span><span class="title-name">Installing SUSE CaaS Platform with Multiple Masters</span></span> <a title="Permalink" class="permalink" href="install-heat-templates.html#id-1.4.5.16.4">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE-Cloud/doc-cloud/blob/maintenance/cloud_8/xml/install_caasp_heat_templates.xml" title="Edit source document"> </a></div></div></div></div></div><div id="id-1.4.5.16.4.2" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note</div><p>
    A Heat stack with load balancing and multiple master nodes can only be
    created from the command line, because Horizon does not have support for nested
    Heat templates.
   </p></div><p>
   Install the <span class="package">caasp-openstack-heat-templates</span> package on a
   machine with <span class="phrase"><span class="phrase">SUSE <span class="productname">OpenStack</span> Cloud</span></span> repositories:
  </p><div class="verbatim-wrap"><pre class="screen">zypper in caasp-openstack-heat-templates</pre></div><p>
   The installed templates are located in
   <code class="filename">/usr/share/caasp-openstack-heat-templates</code>.
  </p><p>
   A working load balancer is needed in your SUSE <span class="productname">OpenStack</span> Cloud deployment. <span class="phrase"><span class="phrase">SUSE <span class="productname">OpenStack</span> Cloud</span></span>
   uses HAProxy.
  </p><p>
   Verify that load balancing with HAProxy is working correctly
   in your <span class="productname">OpenStack</span> installation by creating a load balancer manually and
   checking that the <code class="literal">provisioning_status</code> changes to
   <code class="literal">Active</code>.
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">ardana &gt; </code>openstack loadbalancer show
&lt;<em class="replaceable">LOAD_BALANCER_ID</em>&gt;</pre></div><p>
   HAProxy is the default load balancer provider in <span class="phrase"><span class="phrase">SUSE <span class="productname">OpenStack</span> Cloud</span></span>.
  </p><p>
   The steps below can be used to set up a network, subnet, router, security
   and IPs for a test <code class="literal">lb_net1</code> network with
   <code class="literal">lb_subnet1</code> subnet.
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">ardana &gt; </code>openstack network create lb_net1
  <code class="prompt user">ardana &gt; </code>openstack subnet create --name lb_subnet1 lb_net1 \
--subnet-range 172.29.0.0/24 --gateway 172.29.0.2
<code class="prompt user">ardana &gt; </code>openstack router create lb_router1
<code class="prompt user">ardana &gt; </code>openstack router add subnet lb_router1 lb_subnet1
<code class="prompt user">ardana &gt; </code>openstack router set lb_router1 --external-gateway ext-net
<code class="prompt user">ardana &gt; </code>openstack network list</pre></div><div class="procedure" id="id-1.4.5.16.4.12" data-id-title="Steps to Install SUSE CaaS Platform with Multiple Masters"><div class="title-container"><div class="procedure-title-wrap"><div class="procedure-title"><span class="title-number-name"><span class="title-number">Procedure 21.5: </span><span class="title-name">Steps to Install SUSE CaaS Platform with Multiple Masters </span></span><a title="Permalink" class="permalink" href="install-heat-templates.html#id-1.4.5.16.4.12">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE-Cloud/doc-cloud/blob/maintenance/cloud_8/xml/install_caasp_heat_templates.xml" title="Edit source document"> </a></div></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
     Specify the appropriate flavor and network settings in the
     <code class="filename">caasp-multi-master-environment.yaml</code> file.
    </p></li><li class="step"><p>
     Set <code class="literal">master_count</code> to the desired number in the
     <code class="filename">caasp-multi-master-environment.yaml</code> file. The master
     count must be set to an odd number of nodes.
    </p><div class="verbatim-wrap"><pre class="screen">master_count: 3</pre></div></li><li class="step"><p>
     Create a stack in Heat by passing the template, environment file, and
     parameters:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">ardana &gt; </code>openstack stack create -t caasp-multi-master-stack.yaml \
-e caasp-multi-master-environment.yaml --parameter image=CaaSP-3 caasp-multi-master-stack</pre></div></li><li class="step"><p>
     Find the floating IP address of the load balancer. This is necessary for
     accessing the Velum SUSE CaaS Platform dashboard.
    </p><ol type="a" class="substeps"><li class="step"><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">ardana &gt; </code>openstack loadbalancer list --provider</pre></div></li><li class="step"><p>
       From the output, copy the <code class="literal">id</code> and enter it in the
       following command as shown in the following example:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">ardana &gt; </code>openstack loadbalancer show id</pre></div><div class="verbatim-wrap"><pre class="screen">+---------------------+------------------------------------------------+
| Field               | Value                                          |
+---------------------+------------------------------------------------+
| admin_state_up      | True                                           |
| description         |                                                |
| id                  | 0d973d80-1c79-40a4-881b-42d111ee9625           |
| listeners           | {"id": "c9a34b63-a1c8-4a57-be22-75264769132d"} |
|                     | {"id": "4fa2dae0-126b-4eb0-899f-b2b6f5aab461"} |
| name                | caasp-stack-master_lb-bhr66gtrx3ue             |
| operating_status    | ONLINE                                         |
| pools               | {"id": "8c011309-150c-4252-bb04-6550920e0059"} |
|                     | {"id": "c5f55af7-0a25-4dfa-a088-79e548041929"} |
| provider            | haproxy                                        |
| provisioning_status | ACTIVE                                         |
| tenant_id           | fd7ffc07400642b1b05dbef647deb4c1               |
| vip_address         | 172.28.0.6                                     |
| vip_port_id         | 53ad27ba-1ae0-4cd7-b798-c96b53373e8b           |
| vip_subnet_id       | 87d18a53-ad0c-4d71-b82a-050c229b710a           |
+---------------------+------------------------------------------------+</pre></div></li><li class="step"><p>
       Search the floating IP list for <code class="literal">vip_address</code>
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">ardana &gt; </code>openstack floating ip list | grep 172.28.0.6
| d636f3...481b0c | fd7ff...deb4c1 | 172.28.0.6  | 10.84.65.37  | 53ad2...373e8b |</pre></div></li><li class="step"><p>
       The load balancer floating ip address is 10.84.65.37
      </p></li></ol></li></ol></div></div><p>
   <span class="bold"><strong>Accessing the Velum SUSE CaaS Platform Dashboard</strong></span>
  </p><p>
   After the stack has been created, the Velum SUSE CaaS Platform dashboard runs on the
   admin node. You can access it using the floating IP address of the admin
   node.
  </p><p>
   Create an account and follow the steps in the Velum SUSE CaaS Platform dashboard to
   complete the SUSE CaaS Platform installation.
  </p><p>
   SUSE CaaS Platform Admin Node Install: Screen 1
  </p><div class="informalfigure"><div class="mediaobject"><a href="images/caasp_1.png"><img src="images/caasp_1.png" width="90%" alt="Image" title="Image"/></a></div></div><p>
   SUSE CaaS Platform Admin Node Install: Screen 2
  </p><div class="informalfigure"><div class="mediaobject"><a href="images/caasp_2.png"><img src="images/caasp_2.png" width="90%" alt="Image" title="Image"/></a></div></div><p>
   SUSE CaaS Platform Admin Node Install: Screen 3
  </p><div class="informalfigure"><div class="mediaobject"><a href="images/caasp_3.png"><img src="images/caasp_3.png" width="90%" alt="Image" title="Image"/></a></div></div><p>
   SUSE CaaS Platform Admin Node Install: Screen 4
  </p><div class="informalfigure"><div class="mediaobject"><a href="images/caasp_4.png"><img src="images/caasp_4.png" width="90%" alt="Image" title="Image"/></a></div></div><p>
   SUSE CaaS Platform Admin Node Install: Screen 5
  </p><p>
   Set External Kubernetes API to
   <em class="replaceable">LOADBALANCER_FLOATING_IP</em>, External Dashboard FQDN
   to <em class="replaceable">ADMIN_NODE_FLOATING_IP</em>
  </p><div class="informalfigure"><div class="mediaobject"><a href="images/caasp_5.png"><img src="images/caasp_5.png" width="90%" alt="Image" title="Image"/></a></div></div><p>
   SUSE CaaS Platform Admin Node Install: Screen 6
  </p><div class="informalfigure"><div class="mediaobject"><a href="images/caasp_6.png"><img src="images/caasp_6.png" width="90%" alt="Image" title="Image"/></a></div></div><p>
   SUSE CaaS Platform Admin Node Install: Screen 7
  </p><div class="informalfigure"><div class="mediaobject"><a href="images/caasp_7.png"><img src="images/caasp_7.png" width="90%" alt="Image" title="Image"/></a></div></div></section><section class="sect1" id="id-1.4.5.16.5" data-id-title="Deploy SUSE CaaS Platform Stack Using Heat SUSE CaaS Platform Playbook"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">21.3 </span><span class="title-name">Deploy SUSE CaaS Platform Stack Using Heat SUSE CaaS Platform Playbook</span></span> <a title="Permalink" class="permalink" href="install-heat-templates.html#id-1.4.5.16.5">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE-Cloud/doc-cloud/blob/maintenance/cloud_8/xml/install_caasp_heat_templates.xml" title="Edit source document"> </a></div></div></div></div></div><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
     Install the <span class="package">caasp-openstack-heat-templates</span> package on a
     machine with <span class="phrase"><span class="phrase">SUSE <span class="productname">OpenStack</span> Cloud</span></span> repositories:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">ardana &gt; </code>zypper in caasp-openstack-heat-templates</pre></div><p>
     The installed templates are located in
     <code class="filename">/usr/share/caasp-openstack-heat-templates</code>.
    </p></li><li class="step"><p>
     Run <code class="filename">heat-caasp-deploy.yml</code> on the Cloud Lifecycle Manager to create a
     SUSE CaaS Platform cluster with Heat templates from the
     <code class="literal">caasp-openstack-heat-templates</code> package.
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">ardana &gt; </code>cd ~/scratch/ansible/next/ardana/ansible
<code class="prompt user">ardana &gt; </code>ansible-playbook -i hosts/localhost heat-caasp-deploy.yml</pre></div></li><li class="step"><p>
     In a browser, navigate to the Horizon UI to determine the floating IP
     address assigned to the admin node.
    </p></li><li class="step"><p>
     Go to http://<em class="replaceable">ADMIN-NODE-FLOATING-IP</em>/ to bring
     up the Velum dashboard.
    </p></li><li class="step"><p>
     Follow the steps for <code class="literal">bootstrap</code> and <code class="literal">add nodes
     to the cluster</code> to bring up the SUSE CaaS Platform Kubernetes cluster.
    </p></li></ol></div></div></section><section class="sect1" id="id-1.4.5.16.6" data-id-title="Deploy SUSE CaaS Platform Cluster with Multiple Masters Using Heat CaasP Playbook"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">21.4 </span><span class="title-name">Deploy SUSE CaaS Platform Cluster with Multiple Masters Using Heat CaasP
  Playbook</span></span> <a title="Permalink" class="permalink" href="install-heat-templates.html#id-1.4.5.16.6">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE-Cloud/doc-cloud/blob/maintenance/cloud_8/xml/install_caasp_heat_templates.xml" title="Edit source document"> </a></div></div></div></div></div><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
     Install the <span class="package">caasp-openstack-heat-templates</span> package on a
     machine with <span class="phrase"><span class="phrase">SUSE <span class="productname">OpenStack</span> Cloud</span></span> repositories:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">ardana &gt; </code>zypper in caasp-openstack-heat-templates</pre></div><p>
     The installed templates are located in
     <code class="filename">/usr/share/caasp-openstack-heat-templates</code>.
    </p></li><li class="step"><p>
     On the Cloud Lifecycle Manager, run the <code class="filename">heat-caasp-deploy.yml</code> playbook
     and pass parameters for <code class="literal">caasp_stack_name</code>,
     <code class="literal">caasp_stack_yaml_file</code> and
     <code class="literal">caasp_stack_env_yaml_file</code>.
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">ardana &gt; </code>ansible-playbook -i hosts/localhost heat-caasp-deploy.yml -e "caasp_stack_name=caasp_multi-master caasp_stack_yaml_file=caasp-multi-master-stack.yaml caasp_stack_env_yaml_file=caasp-multi-master-environment.yaml"</pre></div></li></ol></div></div></section><section class="sect1" id="id-1.4.5.16.7" data-id-title="SUSE CaaS Platform OpenStack Image for Heat SUSE CaaS Platform Playbook"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">21.5 </span><span class="title-name">SUSE CaaS Platform <span class="productname">OpenStack</span> Image for Heat SUSE CaaS Platform Playbook</span></span> <a title="Permalink" class="permalink" href="install-heat-templates.html#id-1.4.5.16.7">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE-Cloud/doc-cloud/blob/maintenance/cloud_8/xml/install_caasp_heat_templates.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   By default the Heat SUSE CaaS Platform playbook downloads the SUSE CaaS Platform image from <a class="link" href="http://download.suse.de/install/SUSE-CaaSP-3-GM/SUSE-CaaS-Platform-3.0-for-OpenStack-Cloud.x86_64-3.0.0-GM.qcow2" target="_blank">http://download.suse.de/install/SUSE-CaaSP-3-GM/SUSE-CaaS-Platform-3.0-for-OpenStack-Cloud.x86_64-3.0.0-GM.qcow2</a>. If
   this URL is not accessible, the SUSE CaaS Platform image can be downloaded from <a class="link" href="https://download.suse.com/Download?buildid=z7ezhywXXRc" target="_blank">https://download.suse.com/Download?buildid=z7ezhywXXRc</a> and
   copied to the deployer.
  </p><p>
   To create a SUSE CaaS Platform cluster and pass the path to the downloaded image, run the
   following commands:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">ardana &gt; </code>cd ~/scratch/ansible/next/ardana/ansible
<code class="prompt user">ardana &gt; </code>ansible-playbook -i hosts/localhost heat-caasp-deploy.yml -e "caasp_image_tmp_path=~/SUSE-CaaS-Platform-3.0-for-OpenStack-Cloud.x86_64-3.0.0-GM.qcow2"</pre></div><p>
   To create a SUSE CaaS Platform cluster with multiple masters and pass the path to the
   downloaded image, run the following commands:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">ardana &gt; </code>cd ~/scratch/ansible/next/ardana/ansible
<code class="prompt user">ardana &gt; </code>ansible-playbook -i hosts/localhost heat-caasp-deploy.yml -e "caasp_image_tmp_path=caasp_image_tmp_path=~/SUSE-CaaS-Platform-3.0-for-OpenStack-Cloud.x86_64-3.0.0-GM.qcow2
 caasp_stack_name=caasp_multi-master caasp_stack_yaml_file=caasp-multi-master-stack.yaml caasp_stack_env_yaml_file=caasp-multi-master-environment.yaml"</pre></div></section><section class="sect1" id="id-1.4.5.16.8" data-id-title="Enabling the Cloud Provider Integration (CPI) Feature"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">21.6 </span><span class="title-name">Enabling the Cloud Provider Integration (CPI) Feature</span></span> <a title="Permalink" class="permalink" href="install-heat-templates.html#id-1.4.5.16.8">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE-Cloud/doc-cloud/blob/maintenance/cloud_8/xml/install_caasp_heat_templates.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    When deploying a CaaaSP cluster using SUSE CaaS Platform <span class="productname">OpenStack</span> Heat
    templates, the following CPI parameters can be set in
    <code class="filename">caasp-environment.yaml</code> or
    <code class="filename">caasp-multi-master-environment.yaml</code>.
   </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.4.5.16.8.3.1"><span class="term">cpi_auth_url</span></dt><dd><p>
       The URL of the Keystone API used to authenticate the user. This value
       can be found on <span class="productname">OpenStack</span> Dashboard under
       <span class="guimenu">Access and Security</span> › <span class="guimenu">API
       Access</span> › <span class="guimenu">Credentials</span> (for
       example, https://api.keystone.example.net:5000/v3/)
      </p></dd><dt id="id-1.4.5.16.8.3.2"><span class="term">cpi_domain_name</span></dt><dd><p>
       Name of the domain the user belongs to
      </p></dd><dt id="id-1.4.5.16.8.3.3"><span class="term">cpi_tenant_name</span></dt><dd><p>
       Name of the project the user belongs to. This is the project where the
       resources will be created.
      </p></dd><dt id="id-1.4.5.16.8.3.4"><span class="term">cpi_region</span></dt><dd><p>
       Name of the region to use when running a multi-region <span class="productname">OpenStack</span>
       cloud. The region is a general division of an <span class="productname">OpenStack</span> deployment.
      </p></dd><dt id="id-1.4.5.16.8.3.5"><span class="term">cpi_username</span></dt><dd><p>
       Username of a valid user that has been set in Keystone. Default: admin
      </p></dd><dt id="id-1.4.5.16.8.3.6"><span class="term">cpi_password</span></dt><dd><p>
       Password of a valid user that has been set in Keystone.
      </p></dd><dt id="id-1.4.5.16.8.3.7"><span class="term">cpi_monitor_max_retries</span></dt><dd><p>
       Neutron load balancer monitoring max retries. Default: 3
      </p></dd><dt id="id-1.4.5.16.8.3.8"><span class="term">cpi_bs_version</span></dt><dd><p>
       Cinder Block Storage API version. Possible values are v1, v2 , v3 or
       auto. Default: auto
      </p></dd><dt id="id-1.4.5.16.8.3.9"><span class="term">cpi_ignore_volume_az</span></dt><dd><p>
       Ignore Cinder and Nova availability zones. Default: true
      </p></dd></dl></div><p>
    When the SUSE CaaS Platform cluster has been deployed by the Heat templates, the
    Velum dashboard on the admin node
    (https://<em class="replaceable">ADMIN-NODE-IP</em>/) will have entries for
    <span class="guimenu">Cloud Provider Integration</span> (CPI). The <span class="productname">OpenStack</span>
    settings form will show the values that were set in the
    <code class="filename">caasp-environment.yaml</code> or
    <code class="filename">caasp-multi-master-environment.yaml</code> files.
   </p><div class="informalfigure"><div class="mediaobject"><a href="images/cpi_1.png"><img src="images/cpi_1.png" width="90%" alt="Image" title="Image"/></a></div></div><p>
    After the SUSE CaaS Platform cluster comes up, install the latest SUSE CaaS Platform 3.0 Maintenance
    Update using the following steps:
   </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
      Spin up a SUSE CaaS Platform cluster using Heat templates following the
      instructions in <a class="xref" href="install-heat-templates.html#sec-heat-templates-install" title="21.1. SUSE CaaS Platform Heat Installation Procedure">Section 21.1, “SUSE CaaS Platform Heat Installation Procedure”</a>. Do not go
      through the bootstrapping steps, because the SUSE CaaS Platform Maintenance Update
      (MU) must be applied first. After the maintenance update process below
      succeeds, return to the SUSE CaaS Platform installation instructions and follow the
      admin node bootstrapping steps.
     </p><p>
      Apply the SUSE CaaS Platform 3.0 Maintenance Update with the following steps:
     </p><ol type="a" class="substeps"><li class="step"><p>
        Log in to each node and add the update repository.
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">ardana &gt; </code>sudo zypper ar http://nu.novell.com/SUSE/Updates/SUSE-CAASP/3.0/x86_64/update/ caasp_update</pre></div></li><li class="step"><p>
        With root privileges, run <code class="literal">transactional-update</code> on each node.
       </p></li><li class="step"><p>
        Reboot each node
       </p></li><li class="step"><p>
        Verify that the Velum image packages were updated
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">ardana &gt; </code>zypper se --detail velum-image
i | sles12-velum-image | package    | 3.1.7-3.27.3  | x86_64 | update_caasp</pre></div></li></ol></li><li class="step"><p>
      Upload a valid trust certificate that can validate a certificate
      presented by Keystone at the specified
      <code class="literal">keystone_auth_url</code> in the <code class="literal">system-wide
      certificate</code> section of Velum. The certificate must be uploaded
      to avoid bootstrapping failure with a <code class="literal">x509: certificate signed
      by unknown authority</code> error message.
     </p><p>
      Get SUSE Root CA certificate with the following steps:
     </p><ol type="a" class="substeps"><li class="step"><p>
        From the RPM provided in the repos:
       </p><ol type="i" class="substeps"><li class="step"><p>
          Add a repository for your distribution at
          <code class="literal">http://download.suse.de/ibs/SUSE:/CA/</code>. For
          example, with <code class="literal">openSUSE Leap</code>, use
          <code class="literal">http://download.suse.de/ibs/SUSE:/CA/openSUSE_Leap_15.0/SUSE:CA.repo</code>
         </p></li><li class="step"><p>
          Install certificates and find the <code class="filename">.pem</code> file.
         </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">ardana &gt; </code>sudo zypper in ca-certificates-suse
<code class="prompt user">ardana &gt; </code>rpm -ql ca-certificates-suse</pre></div><p>
          The path to the cert is <code class="filename">/usr/share/pki/trust/anchors/SUSE_Trust_Root.crt.pem</code>
         </p></li></ol></li><li class="step"><p>
        In <code class="literal">system wide certificate</code> during setup in Velum,
        upload this certificate so you can bootstrap with CPI.
     </p></li></ol></li><li class="step"><p>
      After the nodes come up, continue with the installation instructions in
      <a class="xref" href="install-heat-templates.html#sec-heat-templates-install" title="21.1. SUSE CaaS Platform Heat Installation Procedure">Section 21.1, “SUSE CaaS Platform Heat Installation Procedure”</a> following the admin node
      cluster bootstrapping steps.
     </p></li></ol></div></div></section><section class="sect1" id="id-1.4.5.16.9" data-id-title="More Information about SUSE CaaS Platform"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">21.7 </span><span class="title-name">More Information about SUSE CaaS Platform</span></span> <a title="Permalink" class="permalink" href="install-heat-templates.html#id-1.4.5.16.9">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE-Cloud/doc-cloud/blob/maintenance/cloud_8/xml/install_caasp_heat_templates.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  More information about the SUSE CaaS Platform is available at <a class="link" href="https://documentation.suse.com/suse-caasp/3/single-html/caasp-deployment/" target="_blank">https://documentation.suse.com/suse-caasp/3/single-html/caasp-deployment/</a>
 </p></section></section><nav class="bottom-pagination"><div><a class="pagination-link prev" href="install-ardana-manila.html"><span class="pagination-relation">Previous</span><span class="pagination-label"><span class="title-number">Chapter 20 </span>Installing Manila and Creating Manila Shares</span></a> </div><div><a class="pagination-link next" href="integrations.html"><span class="pagination-relation">Next</span><span class="pagination-label"><span class="title-number">Chapter 22 </span>Integrations</span></a> </div></nav></article><aside id="_side-toc-page" class="side-toc"><div class="side-title">On this page</div><div class="toc"><ul><li><span class="section"><a href="install-heat-templates.html#sec-heat-templates-install"><span class="title-number">21.1 </span><span class="title-name">SUSE CaaS Platform Heat Installation Procedure</span></a></span></li><li><span class="section"><a href="install-heat-templates.html#id-1.4.5.16.4"><span class="title-number">21.2 </span><span class="title-name">Installing SUSE CaaS Platform with Multiple Masters</span></a></span></li><li><span class="section"><a href="install-heat-templates.html#id-1.4.5.16.5"><span class="title-number">21.3 </span><span class="title-name">Deploy SUSE CaaS Platform Stack Using Heat SUSE CaaS Platform Playbook</span></a></span></li><li><span class="section"><a href="install-heat-templates.html#id-1.4.5.16.6"><span class="title-number">21.4 </span><span class="title-name">Deploy SUSE CaaS Platform Cluster with Multiple Masters Using Heat CaasP
  Playbook</span></a></span></li><li><span class="section"><a href="install-heat-templates.html#id-1.4.5.16.7"><span class="title-number">21.5 </span><span class="title-name">SUSE CaaS Platform <span class="productname">OpenStack</span> Image for Heat SUSE CaaS Platform Playbook</span></a></span></li><li><span class="section"><a href="install-heat-templates.html#id-1.4.5.16.8"><span class="title-number">21.6 </span><span class="title-name">Enabling the Cloud Provider Integration (CPI) Feature</span></a></span></li><li><span class="section"><a href="install-heat-templates.html#id-1.4.5.16.9"><span class="title-number">21.7 </span><span class="title-name">More Information about SUSE CaaS Platform</span></a></span></li></ul></div><div class="side-title">Share this page</div><ul class="share"><li><a id="_share-fb" href="#" title="Facebook"> </a></li><li><a id="_share-in" href="#" title="LinkedIn"> </a></li><li><a id="_share-tw" href="#" title="Twitter"> </a></li><li><a id="_share-mail" href="#" title="E-Mail"> </a></li><li><a id="_print-button" href="#" title="Print this page"> </a></li></ul> </aside></main><footer id="_footer"><div class="growth-inhibitor"><div class="copy"><span class="copy__rights">© SUSE
                 2022</span></div></div></footer></body></html>